var inputTimer = null;
if (
	((function (e, t) {
		var i = ".inputEvent ",
			a = "bound.inputEvent",
			s = "value.inputEvent",
			r = "delegated.inputEvent",
			o = ["input", "textInput", "propertychange", "paste", "cut", "keydown", "drop", ""].join(i),
			n = ["focusin", "mouseover", "dragstart", ""].join(i),
			l = {
				TEXTAREA: t,
				INPUT: t,
			},
			d = {
				paste: t,
				cut: t,
				keydown: t,
				drop: t,
				textInput: t,
			};
		(e.event.special.txtinput = {
			setup: function (t, i, c) {
				function c(t) {
					var i = t.target;
					window.clearTimeout(inputTimer),
						(inputTimer = null),
						g ||
							(t.type in d && !inputTimer
								? (inputTimer = window.setTimeout(function () {
										i.value !== e.data(i, s) && (e(i).trigger("txtinput"), e.data(i, s, i.value));
								  }, 0))
								: "propertychange" == t.type
								? "value" == t.originalEvent.propertyName &&
								  (e(i).trigger("txtinput"),
								  e.data(i, s, i.value),
								  (g = !0),
								  window.setTimeout(function () {
										g = !1;
								  }, 0))
								: (e(i).trigger("txtinput"),
								  e.data(i, s, i.value),
								  (g = !0),
								  window.setTimeout(function () {
										g = !1;
								  }, 0)));
				}
				var u,
					h = this,
					p = e(this),
					g = !1;
				h.tagName in l
					? ((u = e.data(h, a) || 0) || p.bind(o, c), e.data(h, a, ++u), e.data(h, s, h.value))
					: p.bind(n, function (t) {
							var i = t.target;
							i.tagName in l && !e.data(h, r) && ((u = e.data(i, a) || 0) || i.bind(o, c), e.data(h, r, !0), e.data(i, a, ++u), e.data(i, s, i.value));
					  });
			},
			teardown: function () {
				var t = e(this);
				t.unbind(n),
					t
						.find("input, textarea")
						.andSelf()
						.each(function () {
							(bndCount = e.data(this, a, (e.data(this, a) || 1) - 1)), bndCount || t.unbind(o);
						});
			},
		}),
			(e.fn.input = function (e) {
				return e ? this.bind("txtinput", e) : this.trigger("txtinput");
			});
	})(jQuery),
	null == DEBUGMODE)
)
	var DEBUGMODE = !0;
var debug = (function () {
		var e = {};
		return (
			jQuery(["log", "warn", "group", "groupCollapsed", "groupEnd"]).each(function (t, i) {
				e[i] = function () {
					window.console && DEBUGMODE && (null != window.console[i] ? console[i].apply(console, arguments) : console.log.apply(console, arguments));
				};
			}),
			(e.warn = function () {
				window.console && console.warn.apply(console, arguments);
			}),
			(e.error = function () {
				window.console && console.error.apply(console, arguments);
			}),
			e
		);
	})(),
	ArgumentException = function (e, t) {
		(this.name = "ArgumentException"), (this.message = e), (this.param = t), (this.stack = new Error().stack);
	},
	DeprecatedMethodException = function (e) {
		(this.name = "DeprecatedMethodException"),
			(this.message = e),
			(this.stack = new Error().stack),
			($_this = this),
			(this.showMsg = function () {
				debug.error($_this.name, $_this.message, $_this.stack);
			});
	};
(ArgumentException.prototype = new Error()),
	(DeprecatedMethodException.prototype = new Error()),
	(Date.prototype.toPrettyFormat = function () {
		return ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][this.getMonth()] + " " + this.getUTCDate() + ", " + this.getUTCFullYear();
	}),
	(String.prototype.toHHMMSS = function () {
		sec_numb = parseInt(this);
		var e = Math.floor(sec_numb / 3600),
			t = Math.floor((sec_numb - 3600 * e) / 60),
			i = sec_numb - 3600 * e - 60 * t;
		return e < 10 && (e = "0" + e), t < 10 && (t = "0" + t), i < 10 && (i = "0" + i), ("00" != e ? e + ":" : "") + t + ":" + i;
	}),
	(window.$Brid =
		(jQuery,
		{
			timer: [],
			timeout: [],
			methods: ["dropdown", "datepicker", "Html.Selectbox", "Html.Tabs", "Html.GoogleCheckbox", "Html.DefaultInput", "Html.Button", "Html.CheckboxElement", "Html.Radio", "Html.Sticky", "Html.Tooltip"],
			killTimer: function (e) {
				if ((debug.log("$Brid.killTimer()", e), null == e)) return !1;
				null != $Brid.timer[e] && (clearInterval($Brid.timer[e]), ($Brid.timer[e] = null));
			},
			stopTimeout: function (e) {
				if (null == e) return !1;
				null != $Brid.timeout[e] && (clearTimeout($Brid.timeout[e]), ($Brid.timeout[e] = null));
			},
			datepicker: function () {
				debug.log("$Brid.datepicker()", "Datepicker is jQuery plugin.");
				try {
					jQuery(".datepicker").datepick("destroy"),
						jQuery(".datepicker")
							.datepick({
								changeMonth: !0,
								changeYear: !0,
								dateFormat: "dd-mm-yyyy",
								showAnim: "fadeIn",
								disalbed: !0,
							})
							.on("change", function () {});
				} catch (e) {}
			},
			dropdown: function () {
				debug.log("$Brid.dropdown()", 'Init all "dropdownMenu" class elements. Jquery dropdown.'), jQuery(".dropdownMenu").dropdown("destroy"), jQuery(".dropdownMenu").dropdown();
			},
			init: function (e) {
				if (null != e && "object" != typeof e) throw new ArgumentException('$Brid.init argument must be typeof object. Try: $Brid.init(["Html.Checkbox"])');
				var t;
				for (var i in ((t = null != e ? e : this.methods), debug.log("METHODS;", e), this.timer)) this.killTimer(i);
				for (var i in this.timeout) this.stopTimeout(i);
				for (var a in (debug.group("INIT"), t))
					try {
						var s = null,
							r = null,
							o = null;
						if (("string" == typeof t[a] && (s = t[a]), "object" == typeof t[a] && ((s = t[a][0]), (r = t[a][1])), debug.groupCollapsed(s), null == this[s])) {
							debug.log("Auto execute init method.", s);
							var n = s.split(".");
							try {
								if (null == n || null == n[0]) throw new ArgumentException("Object/Method not defined (" + s + "). Try to use: Object.Object e.g. Html.Button");
								null == n[1] ? $Brid[n[0]].init() : $Brid[n[0]][n[1]].init(r);
							} catch (e) {
								(o = e), DEBUGMODE ? debug.error("Error AutoExecute:", n, e.message, e.stack) : debug.error("Error AutoExecute:", n, e.message, e);
							} finally {
								handleImportantError(o, "Object initialization failed <b>(" + s + ")</b>");
							}
						} else debug.log("Method defined in $Brid object, so execute it."), this[s].apply(this, r);
						debug.groupEnd();
					} catch (e) {
						debug.error("Error init:", e.message, "Method $Brid." + t[a] + "() does not exist?");
					}
				return debug.groupEnd(), "Init end";
			},
		})),
	($Brid.Callbacks = {
		className: "$Brid.Callbacks",
		onAdTagToChozen: function (arg) {
			debug.log("Arg", arg);
			debug.log("Callbacks.onAdTagToChozen");

			var Adtag = arg.ajaxResponse.data.Adtag;
			// var Post = arg.ajaxResponse.post.Adtag;

			debug.log("Callbacks.onAdTagToChozen", Adtag);

			var appendTo = "";
			if (Adtag.type == "outstream") {
				appendTo = "unit";
			} else {
				appendTo = Adtag.type;
			}

			//jQuery('#'+arg.ajaxResponse.selectbox_id).append('<option value="'+arg.ajaxResponse.adtag_id+'">'+arg.ajaxResponse.adtag_name+'</option>');
			jQuery(".chzn-select-adtag.chzn-select-adtag-" + appendTo).append('<option value="' + Adtag.id + '">' + Adtag.name + "</option>");
			//jQuery('.chzn-select-adtag.chzn-select-adtag-'+appendTo).trigger("chosen:updated");

			//alert('Proveriti da li je account eligable za automatsko dodavanje u waterfall');

			//if(Post.select_box_id!='' && parseInt(Post.append_to_stack)){

			//jQuery('#'+Post.select_box_id+' option[value='+Adtag.id+']').prop('selected', 'selected');
			//jQuery('#'+arg.ajaxResponse.selectbox_id).trigger("chosen:updated");

			//}

			jQuery(".chzn-select-adtag.chzn-select-adtag-" + appendTo).trigger("chosen:updated");
			//jQuery('.chzn-select-adtag').trigger("chosen:updated");

			$Brid.Html.Adtags.addEditToChozen();
			jQuery.colorbox.close();
		},
		onEditAdTagInChozen: function (arg) {
			//debug.log('Arg', arg);
			//debug.log('Callbacks.onEditAdTagInChozen');

			var Adtag = arg.ajaxResponse.data.Adtag;

			var appendTo = "";
			if (Adtag.type == "outstream") {
				appendTo = "unit";
			} else {
				appendTo = Adtag.type;
			}

			jQuery(".chzn-select-adtag.chzn-select-adtag-" + appendTo + ' option[value="' + Adtag.id + '"]').text(Adtag.name);
			//jQuery('.chzn-select-adtag.chzn-select-adtag-'+appendTo).trigger("chosen:updated");
			jQuery(".chzn-select-adtag").trigger("chosen:updated");

			$Brid.Html.Adtags.addEditToChozen();

			jQuery.colorbox.close();
		},
		onPlaylistSave: function (e) {
			debug.log("callback", "onPlaylistSave", e.ajaxResponse), jQuery("#VideoId").val(e.ajaxResponse.videoId), jQuery("#autoSaving").html("Saved");
			var t = $Brid.Util.shortCode(e.ajaxResponse.data.Playlist.id, $BridWordpressConfig.Player.id, e.ajaxResponse.data.Playlist.name, "playlist", false);
			var raw_embed = document.RAW_EMBED;
			if (raw_embed) {
				jQuery
					.ajax({
						method: "POST",
						url: "/wp-admin/admin-ajax.php?action=getRawEmbed",
						data: { shortcode: t },
					})
					.done(function (msg) {
						t = msg;
						jQuery("#brid_shortcode").val(t);
					});
			} else {
				jQuery("#brid_shortcode").val(t);
			}
		},
		addToAdList: function (e) {
			debug.log("Callback:addToAdList", e);
			var t = e.obj.attr("data-type");
			jQuery("#bridSpiner").show();
			jQuery("#brid-boxes-content").prepend(e.response), $Brid.init(["dropdown", "Html.DefaultInput"]), (ads[currentAdCount] = t), currentAdCount++, jQuery(".brid-box-remove").off("click", removeAdBox).on("click", removeAdBox), bindAdTabClick(), bindWaterfallClick();
			//jQuery(".chzn-select-adtag").chosen().chosenSortable();
			jQuery("#bridSpiner").hide();
		},
		cancel: function () {
			$Brid.Util.closeModalBox();
		},
		addToAdListUnit: function (e) {
			debug.log("Callback:addToAdListUnit", e), jQuery("#unitPrerollBox").prepend(e.response), jQuery(".unit-brid-box-remove").off("click", removeUnitAdBox).on("click", removeUnitAdBox), bindUnitAdTabClick(), bindUnitWaterfallClick();
			//jQuery(".chzn-select-adtag").chosen().chosenSortable();
		},
		refreshAdList: function (e) {
			if ((debug.log("Callback:refreshAdList", e), null != e.response && e.response.success)) {
				debug.log("Call: save.toggleSave from refreshAdList function.");
				try {
					save.toggleSave();
				} catch (e) {}
				var t = e.obj.attr("data-iterator");
				e.obj.closest(".brid-box-container").fadeOut(300, function () {
					jQuery(this).remove();
				}),
					jQuery("#brid-box-" + t).fadeOut(300, function () {
						jQuery(this).remove();
					});
				var i = e.obj.attr("data-type");
				delete ads[t], debug.log("remove midroll"), jQuery("#add-" + i + "-ad").removeClass("add-midroll-ad-disabled"), jQuery(".brid-box-remove").off("click", removeAdBox).on("click", removeAdBox);
			}
		},
		refreshAdListUnit: function (e) {
			if ((debug.log("Callback:refreshAdListUnit", e), null != e.response && e.response.success)) {
				var t = e.obj.attr("data-iterator");
				e.obj.closest(".brid-box-container").fadeOut(300, function () {
					jQuery(this).remove();
				}),
					jQuery("#unit-brid-box-" + t).fadeOut(300, function () {
						jQuery(this).remove();
					}),
					jQuery("#add-unit-preroll").removeClass("add-midroll-ad-disabled");
			}
		},
		toggleEmbedCodeType: function (e) {
			debug.log("Callback object", "toggleEmbedCodeType", e.val()), jQuery("#dynamicOptions").children().hide(), jQuery("#" + e.val()).length > 0 && (jQuery("#" + e.val()).fadeIn(), "" == jQuery("#" + e.val()).val() && "tag" == e.val() ? jQuery("#postPlaylistDynamic").addClass("disabled") : jQuery("#postPlaylistDynamic").removeClass("disabled")), debug.log(e.val());
		},
		partnerCreateSnapshot: function (e) {
			window.location = settingsUrl;
		},
		updatePlaylistItems: function (e) {
			debug.log("Callback object", "updatePlaylistItems", e), jQuery(".playlist-item").css("left", "0px"), updateNumbers(), jQuery(".disablePlaylistOrder").fadeOut(), hideOver();
		},
		itemsAddedToPlaylist: function (e) {
			debug.log("Callback object", "itemsAddedToPlaylist", e);
			if (e.response.status && null != e.response.playlist_videos) {
				var t = !1,
					i = jQuery("#sortable");
				if (i.length > 0) {
					var a = i.children().length + 1,
						s = "";
					for (var r in e.response.playlist_videos) {
						t = !0;
						var o = e.response.playlist_videos[r];
						(s = jQuery("#video-img-" + r).attr("src")), debug.log("FOUND SRC:", s), "/img/indicator.gif" == s && (s = jQuery("#video-img-" + r).attr("data-original")), i.append('<a href="javascript:void(0)" style="position:relative;" id="video-thumb-id-' + r + '" class="playlist-item tooltip" data-ajax-loaded="true"> <img src="' + s + '" width="120px" height="104px" /><div class="hoverDiv"></div><div class="playlist_delete_video" data-id="' + o + '" data-video-id="' + r + '"></div><div class="playlist_number" id="playlist-number-' + (a + 1) + '"><span>' + a++ + '</span></div> <div class="time">' + jQuery("#video-duration-" + r).html() + "</div></a>"), updateSortableWidth();
					}
				}
				t && initPlaylistMainFunctions();
			}
			alert(e.response.message);
		},
		removePlaylistSingleItem: function (e) {
			debug.log("Callback object", "removePlaylistSingleItem", e);
			var t = e.obj.attr("data-video-id");
			jQuery("#video-thumb-id-" + t).fadeOut(function () {
				jQuery(this).remove(), updateNumbers(), window.updateSortableWidth();
			});
		},
		removePlaylistItems: function (e) {
			debug.log("Callback object", "removePlaylistItems", e),
				jQuery("#sortable")
					.children()
					.each(function (e, t) {
						jQuery(this).fadeOut(function () {
							jQuery(this).remove();
						});
					});
		},
		disableVideoTitle: function (e) {
			debug.log("Callback object", "disableVideoTitle", e);
			var t = e.obj.attr("data-id"),
				i = jQuery("#video-title-" + t);
			e.obj.parent().hasClass("turnedoff") ? i.addClass("videoTitleDisabled") : i.removeClass("videoTitleDisabled");
		},
		channelSelected: function (e) {
			debug.log("Callback object", "channelSelected");
			// Show video status field
			jQuery("#VideoStatusWrap").show();
			var t = jQuery(e).find(":selected").val(),
				i = jQuery(e).find(":selected").text();
			t > 0 && addVideoFromSearch(t, i);
		},
		deletePlaylists: function (e) {
			debug.log("Callback object", "deletePlaylists", e);
			var t = e.response;

			var i = "insertContent" + e.obj.model + "s",
				a = "#" + e.obj.model + "s-content";
			$Brid.Api.call({
				data: $Brid.Util.getRedirectUrl("/playlists/index/"),
				callback: {
					after: {
						name: i,
						obj: jQuery(a),
					},
				},
			});
		},
		deleteVideos: function (e) {
			debug.log("Callback object", "deleteVideos", e);
			var t = e.response;
			t.redirect = "videos/index/";
			if (null != t.redirect) {
				var i = "insertContent" + e.obj.model + "s",
					a = "#" + e.obj.model + "s-content";
				$Brid.Api.call({
					data: $Brid.Util.getRedirectUrl(t.redirect),
					callback: {
						after: {
							name: i,
							obj: jQuery(a),
						},
					},
				});
			}
		},
		deleteAdTags: function (e) {
			debug.log("Callback object", "deleteAdTags", e);
			var t = e.response;
			if (null != t.redirect) {
				var i = "insertContent" + e.obj.model + "s",
					a = "#" + e.obj.model + "s-content";
				$Brid.Api.call({
					data: $Brid.Util.getRedirectUrl(t.redirect),
					callback: {
						after: {
							name: i,
							obj: jQuery(a),
						},
					},
				});
			}
		},
		onPlaylistUpdate: function (e) {
			var t = jQuery("#PlaylistName").val();
			jQuery(".bridItem").each(function (e, i) {
				jQuery(this).hasClass("selected") &&
					jQuery(this)
						.find(".filename")
						.html("<div>" + t + "</div>");
			});
		},
		onVideoUpdate: function (e) {
			debug.log("onVideoUpdate", e, "bridItem", jQuery(".bridItem"));
			var t = jQuery("#VideoName").val();
			jQuery(".bridItem").each(function (e, i) {
				jQuery(this).hasClass("selected") &&
					jQuery(this)
						.find(".filename")
						.html("<div>" + t + "</div>");
			});
		},
		onVideoSave: function (e) {
			debug.log("Callback object", "onVideoSave", e.ajaxResponse), jQuery("#VideoId").val(e.ajaxResponse.id), jQuery("#autoSaving").html("Saved");
			try {
				if ((null != $BridWordpressConfig && $BridWordpressConfig.Player, null != e.ajaxResponse.data.Video && null != $BridWordpressConfig.Player)) {
					brid_video_item = e.ajaxResponse.data;
					var t = $Brid.Util.shortCode(e.ajaxResponse.data.Video.id, $BridWordpressConfig.Player.id, e.ajaxResponse.data.Video.name);
					var raw_embed = document.RAW_EMBED;
					if (raw_embed) {
						jQuery
							.ajax({
								method: "POST",
								url: "/wp-admin/admin-ajax.php?action=getRawEmbed",
								data: { shortcode: t },
							})
							.done(function (msg) {
								t = msg;
								jQuery("#brid_shortcode").val(t);
								jQuery("#copy_shortcode")
									.off("click")
									.on("click", function () {
										// If status is not true
										// and
										// If enabled, disable copy_shortcode button
										// than we will disable copy_shortcode button on click
										if (setStatus(brid_video_data) == false && disable_shortcode != "0") {
											return;
										}

										jQuery("#brid_shortcode").show();
										var copyText = jQuery("#brid_shortcode").select();
										document.execCommand("copy");
										jQuery("#brid_shortcode").hide();
										jQuery.colorbox.close();
									});
							});
					} else {
						jQuery("#brid_shortcode").val(t);
						jQuery("#copy_shortcode")
							.off("click")
							.on("click", function () {
								// If status is not true
								// and
								// If enabled, disable copy_shortcode button
								// than we will disable copy_shortcode button on click
								if (setStatus(brid_video_data) == false && disable_shortcode != "0") {
									return;
								}

								jQuery("#brid_shortcode").show();
								var copyText = jQuery("#brid_shortcode").select();
								document.execCommand("copy");
								jQuery("#brid_shortcode").hide();
								jQuery.colorbox.close();
							});
					}
				}
			} catch (e) {
				debug.error("onVideoSave callback error", e);
			}
		},
		refreshAddYoutube: function (e) {
			debug.log("Callback object", "refreshAddYoutube", e),
				jQuery("#ytSearchInfo").hide(),
				$Brid.Api.call({
					data: {
						action: "addYoutube",
					},
					callback: {
						after: {
							name: "insertContent",
							obj: jQuery("#Videos-content"),
						},
					},
				});
		},
		insertContentPaginationPlaylist: function (e) {
			debug.log("insertContentPaginationPlaylist", e), e.obj.html(e.response), bindBridPlaylistItemClick(), bindBridPlaylistPagination(), bindPlaylistTitle(), initSelected();
		},
		insertContentPagination: function (e) {
			debug.log("insertContentPagination", e), e.obj.html(e.response), bindBridItemClick(), bindBridPagination();
		},
		insertContent: function (e) {
			if ((debug.log("$Brid.Callbacks.insertContent", e.obj), null == window.currentDivView)) return !1;
			if (null != e.obj) {
				var t = e.obj.attr("id");

				jQuery("#postTabs")
					.children()
					.each(function (e, i) {
						var a = jQuery(i).attr("id");
						null != a && a + "-content" != t + "_content" && jQuery("#" + a + "-content").hide();
					}),
					debug.log("$Brid.Callbacks.insertContent ID:", t),
					t != currentDivView && -1 != jQuery.inArray(t, ["Videos-content", "Playlists-content", "AdTags-content"]) && (jQuery("#" + currentDivView).length > 0 && jQuery("#" + currentDivView).html(""), (currentDivView = t)),
					e.obj.html(e.response).fadeIn(0, function () {
						debug.log("Call initBridMain from insertContent");
						//alert(currentDivView);
						jQuery("#" + currentDivView).css("opacity", "1");
						initBridMain();
					});
			}
		},
		insertContentVideos: function (e) {
			debug.log("$Brid.Callbacks.insertContentVideos"), $Brid.Callbacks.insertContent(e);
		},
		insertContentPlaylists: function (e) {
			debug.log("$Brid.Callbacks.insertContentPlaylists"), $Brid.Callbacks.insertContent(e), jQuery.colorbox.close();
		},
		bridUnitList: function (e) {
			for (var t in (debug.log("$Brid.Callbacks.bridUnitList", e), e.response)) {
				var i = e.response[t].Unit;
				i.ad = e.response[t].Ad;
				var a = "";
				unitSelected == i.id && (a = "SELECTED");
				var s = jQuery('<option value="' + i.id + '" ' + a + ">" + i.name + " - [" + i.width + " X " + i.height + "]</option>");
				"SELECTED" == a && s.prop("selected", !0), s.data(i), jQuery("#unitSelected").append(s);
			}
			//jQuery("#unitSelected").trigger("chosen:updated")
		},
		bridPlayerList: function (e) {
			for (var t in (debug.log("$Brid.Callbacks.bridPlayerList", e), e.response, jQuery("#playerListSelect").html(""), e.response.Players)) {
				var i = e.response.Players[t].Player,
					a = (e.response.Players[t].Skin, "");
				null != playerSelected && playerSelected == i.id && (a = "SELECTED");
				var s = jQuery('<option value="' + i.id + '" ' + a + ">" + i.name + " - [" + i.width + " X " + i.height + "]</option>");
				"SELECTED" == a && s.prop("selected", !0), s.data(e.response.Players[t]), jQuery("#playerListSelect").append(s);
			}
			//jQuery("#playerListSelect").trigger("chosen:updated"), playerChanged();
			try {
				1 == siteNum &&
					null != window.authCodeFirstTime &&
					setTimeout(function () {
						jQuery("#bridSettingsForm").submit();
					}, 300);
			} catch (e) {}
		},
		initPlayer: function (e) {
			debug.log("Callback object", "initPlayer");
			var t = jQuery(e).attr("data-id"),
				i = jQuery(e).attr("data-open"),
				a = jQuery(e).attr("data-callback-args"),
				s = jQuery.parseJSON(a),
				r = jQuery("#tableRowContent" + t),
				o = jQuery(r).find("." + i);
			if ((debug.log("Saljem playeru:", s), jQuery(o).hasClass("playerDiv") && 1 == jQuery(o).find(".loadingPreviewPlayer").length)) {
				jQuery(o)
					.find(".loadingPreviewPlayer")
					.fadeOut(300, function () {
						jQuery(this).remove();
					});
				var n = r.find(".brid").attr("id");
				debug.log("PLAYER INIT FROM CMS CODE", s, n), $bp(n, s);
			} else debug.log("Do not reload player again. It should be already loaded (.loadingPreviewPlayer div should not exist for this player)");
		},
		changeOverText: function (e) {
			debug.log("Callback object", "changeOverText");
			var t = jQuery(e).attr("data-id"),
				i = jQuery(e).attr("data-open");
			try {
				var a = jQuery("#tableRowContent" + t)
					.find(".brid")
					.attr("id");
				debug.log("Try brid player stop: ID:", a), $bp(a).stop();
			} catch (e) {}
			var s,
				r,
				o = function (e) {
					var t = jQuery("#tableRowContent" + e),
						i = t.find(".videoPlay");
					t.find(".videoPreviewBg").hide(), i.hide().removeClass("disableHover");
				};
			"playerDiv" == i
				? ((s = jQuery(e).attr("data-id")),
				  (r = jQuery("#tableRowContent" + s).find(".videoPlay")),
				  jQuery(".hiddenContnet").each(function (e, t) {
						jQuery(this).attr("data-id") != s && o(jQuery(this).attr("data-id"));
				  }),
				  r.hasClass("disableHover") ? r.removeClass("disableHover") : r.addClass("disableHover"))
				: o(t);
		},
		addVideoChannelChanged: function (e) {
			return !!$Brid.Html.BridUploader.finished && ($Brid.Video.checkFieldsEncodedFile() ? (jQuery("#videoSaveAdd,#videoSaveEdit").removeClass("disabled"), !0) : void $Brid.Video.checkAutosaveMessage());
		},
		setPremium: function (e) {
			debug.log("setPremium callback"),
				jQuery("#bridNoticePremiumPlan").length > 0 && jQuery("#bridNoticePremiumPlan").hide(),
				jQuery("#premiumPlanConfirm").hasClass("disabled")
					? ($Brid.Api.call({
							data: {
								action: "addVideo",
							},
							callback: {
								after: {
									name: "insertContent",
									obj: jQuery("#Videos-content"),
								},
							},
					  }),
					  jQuery("#uploadRules").addClass("premiumSuccessMessage").html('Your request has been successfully sent.<br /> Please allow 2-3 days so we can process your request. <br />An account manager will contact you as soon as possible.<br /><div class="premiumSuccess"></div>'),
					  jQuery.colorbox.resize({
							innerHeight: "180px",
					  }))
					: $Brid.Api.call({
							data: {
								action: "addVideo",
							},
							callback: {
								after: {
									name: "insertContent",
									obj: jQuery("#Videos-content"),
								},
							},
					  });
		},
		reloadPage: function (e) {
			location.reload();
		},
	});
var Api = {
	call: function (e) {
		debug.log("$Brid.Api.call() me");
		debug.log("aaaarg", e);
		var t = jQuery.extend(!0, {}, e);
		null == t.url && (t.url = ajaxurl),
			null == t.requestType && (t.type = "POST"),
			debug.log("Config", t, "Arg:", e, "Data:", e.data),
			(t.beforeSend = function (e) {
				jQuery("#bridSpiner").show();
			}),
			null != t.callback.before && ("function" == typeof t.callback.before ? (debug.log("After callback is function"), t.callback.before.call(this, t)) : $Brid.Callbacks[t.callback.before.name].call($Brid.Callbacks, t)),
			jQuery.ajax(t).done(function (e) {
				if ((jQuery("#bridSpiner").hide(), null == e.error)) {
					if ((debug.log("$Brid.Api.call()", "Success", t.callback), null != t.callback && null != t.callback.after && null != t.callback.after.name))
						if ("function" == typeof t.callback.after) {
							debug.log("After callback is function", t.callback.after);
							//t.callback.after.name.call(this, e);
							//alert(t.callback.after.name)
							if ($Brid.Callbacks[t.callback.after.name] != undefined) {
								$Brid.Callbacks[t.callback.after.name].call($Brid.Callbacks, e);
							} else {
								t.callback.after.call($Brid.Callbacks, e);
							}
						} else {
							var i = {
								response: e,
							};
							null != t.callback.after.obj &&
								(i.obj = jQuery.extend(!0, t.callback.after.obj, {
									response: e,
								})),
								$Brid.Callbacks[t.callback.after.name].call($Brid.Callbacks, i);
						}
				} else alert("Error: " + e.error);
			});
	},
};
($Brid.Api = jQuery.extend(!0, {}, Api)), ($Brid.Html = {});
var Effect = {
	encodingStatus: function (e, t) {
		switch (e) {
			case 4:
				t.html("Uploading");
				break;
			case 6:
				t.html("Downloading");
		}
	},
	encoding: function () {
		debug.log("$Brid.Html.Effect.encoding()"),
			jQuery(".encodingProgressBarMove").each(function (e, t) {
				var i = jQuery(this).attr("data-progress"),
					a = parseInt(jQuery(this).width()),
					s = (666 * i) / 100,
					r = 0 != a && "NaN" != a ? s - a : s;
				jQuery(this).animate(
					{
						width: "+=" + r,
					},
					300,
					function () {}
				);
			});
	},
	initImageHover: function () {
		debug.log("$Brid.Html.Effect.initImageHover()"), $Brid.stopTimeout("Effect.hover"), jQuery(".centerImgWrapper").off("mouseenter", e).off("mouseleave", t);
		var e = function () {
				$Brid.stopTimeout("Effect.hover"),
					($this = jQuery(this)),
					($Brid.timeout["Effect.hover"] = setTimeout(function () {
						debug.log("SHOW HOVER, timeout", $Brid.timeout["Effect.hover"]), $this.find(".videoPreviewBg").fadeIn(250), $this.find(".videoPlay").fadeIn(150), $this.find(".videoStatusText").hide(), $Brid.stopTimeout("Effect.hover");
					}, 100));
			},
			t = function () {
				$Brid.stopTimeout("Effect.hover"), jQuery(this).find(".videoPlay").hasClass("disableHover") || (jQuery(this).find(".videoPreviewBg").fadeOut(150), jQuery(this).find(".videoPlay").fadeOut(150), jQuery(this).find(".videoStatusText").show());
			};
		jQuery(".centerImgWrapper").on("mouseenter", e).on("mouseleave", t);
	},
	initAnimation: function () {
		debug.log("$Brid.Html.Effect.initAnimation()");
		var e = jQuery(this);
		debug.log("$this", e);
		var t = e.attr("data-open"),
			i = e.attr("data-id"),
			a = e.attr("data-callback"),
			s = e.attr("data-callback-before"),
			r = jQuery("#tableRowContent" + i),
			o = r.find(".hiddenContnet"),
			n = jQuery(r).find("." + t),
			l = n.attr("class");
		r.parent().parent().addClass("disableHover"),
			jQuery(".hiddenContnet").each(function (e, t) {
				if (jQuery(this).attr("data-id") != i) {
					var a = jQuery(this).find(".playerDiv");
					debug.log("playerDiv", jQuery(this).attr("data-id"), i),
						jQuery(this)
							.children()
							.each(function (e, t) {
								if (jQuery(this).is(":visible")) {
									if (jQuery(this).hasClass("playerDiv")) {
										var i = jQuery(a).find(".brid").attr("id");
										debug.log("Try brid player stop on opened player: ID:", i), null != i && $bp(i).stop();
									}
									jQuery(t).animate(
										{
											height: "toggle",
										},
										300,
										function () {}
									);
								}
							}),
						jQuery("#tableRowContent" + jQuery(this).attr("data-id"))
							.parent()
							.parent()
							.removeClass("disableHover");
				}
			}),
			jQuery(o)
				.children()
				.each(function (e, t) {
					jQuery(this).hasClass(l) || jQuery(this).fadeOut();
				}),
			null != s && $Brid.Util.executeCallback($Brid.Callbacks, s, e),
			jQuery(n).animate(
				{
					opacity: 1,
					height: "toggle",
				},
				400,
				function () {
					null != a && $Brid.Util.executeCallback($Brid.Callbacks, a, e), jQuery(this).is(":visible") || r.parent().parent().removeClass("disableHover");
				}
			);
	},
	lazyload: function () {
		debug.log("$Brid.Html.Effect.lazyload()", "completeRefresh - lazy load");
		var e = {
			effect: "fadeIn",
			failure_limit: 10,
		};
		jQuery("img.lazy").each(function (t, i) {
			-1 !== jQuery(this).attr("src").indexOf("indicator") && jQuery(this).lazyload(e);
		});
	},
	scrollUp: function () {
		return (
			debug.log("$Brid.Html.Effect.scrollUp()"),
			jQuery("body,html").animate(
				{
					scrollTop: 0,
				},
				500
			),
			!1
		);
	},
};
$Brid.Html.Effect = jQuery.extend(!0, {}, Effect);
var Button = {
	init: function () {
		debug.log("$Brid.Html.Button.hover()"),
			jQuery(".button, .textButtonSmall, .delButtonSmall, .videoGetEmbed, .opacityButton").hover(
				function () {
					jQuery(this).stop().animate(
						{
							opacity: 0.8,
						},
						250
					);
				},
				function () {
					jQuery(this).stop().animate({
						opacity: 1,
					});
				}
			),
			jQuery(".partner-quick-menu li:not(.disabled) div").hover(
				function () {
					jQuery(this).stop().animate(
						{
							opacity: 0.6,
						},
						250
					);
				},
				function () {
					jQuery(this).stop().animate({
						opacity: 1,
					});
				}
			);
	},
	initDelete: function (e) {
		if (null == e.buttonId) throw new ArgumentException('Argment "buttonId" must be defined.');
		jQuery("#" + e.buttonId).click(function (t) {
			t.preventDefault();
			var i = e.model.toLowerCase(),
				a = $Brid.Html.CheckboxElement.getSelectedCheckboxes(i + "-id-"),
				s =
					(e.model,
					{
						data: {},
					});
			(s.data.action = "delete" + e.model + "s"),
				(s.data["data[" + e.model + "][ids]"] = a.join(",")),
				(s.callback = {
					after: {
						name: "delete" + e.model + "s",
						obj: {
							model: e.model,
						},
					},
				}),
				$Brid.Api.call(s);
		});
	},
};
$Brid.Html.Button = jQuery.extend(!0, {}, Button);
var Tabs = {
	init: function () {
		debug.log("$Brid.Html.Tabs.init()");
		var e = jQuery(".tabs");
		e.each(function (e, t) {
			var i = jQuery(this),
				a = parseInt(i.width()),
				s = i.children().length,
				r = 2 * (s - 1),
				o = parseInt((a - r) / s),
				n = parseInt(a - r - (s - 1) * o);
			debug.log(a, s, o, n);
		}),
			e.children().off("click", this.click),
			e.children().on("click", this.click);
	},
	click: function (e) {
		debug.log("$Brid.Html.Tabs.click", "Executed method on Tab click");
		var t = jQuery(this),
			i = t.attr("id");
		t.hasClass("disabled")
			? $Brid.Util.openDialog('This tab is disabled, since "Type" of the Skin you have selected is templatized. <br/>Choose "Custom" Type to add/change Style properties.', "Tab disabled")
			: (jQuery(".tabContent").hide(),
			  t
					.parent()
					.children()
					.each(function (e, t) {
						var i = jQuery(this),
							a = i.attr("id");
						jQuery("#" + a + "-content").hide(), i.removeClass("tab").addClass("tab-inactive"), i.find(".arrowDown").addClass("hidden");
					}),
			  t.find(".arrowDown").removeClass("hidden"),
			  jQuery("#" + i + "-content").show(),
			  t.removeClass("tab-inactive").addClass("tab"),
			  t.hasClass("postTabsMenu") &&
					("Dynamics" == i
						? jQuery.colorbox.resize({
								height: "300px",
						  })
						: ("Videos" != i && "Playlists" != i) ||
						  jQuery.colorbox.resize({
								innerHeight: "780px",
						  })));
	},
};
$Brid.Html.Tabs = jQuery.extend(!0, {}, Tabs);
var DefaultInput = {
	init: function () {
		debug.log("$Brid.Html.DefaultInput.init()"),
			jQuery('input[type="text"], input[type="password"], textarea').each(function (e, t) {
				var i = jQuery(this),
					a = i.parent(),
					s = ((t = i.val()), a.find(".defaultInputValue"));
				if (t.length > 0 && s.length > 0) s.hide();
				else if (i.attr("default-value")) {
					var r = i.attr("default-value"),
						o = i.attr("data-info"),
						n = null != o && "" != o ? 'data-info="' + o + '"' : 'data-info="' + r + '"',
						l = "default-value-" + i.attr("id");
					if (!s.length > 0) {
						var d = "" == t ? "display:block;" : "display:none;";
						i.parent().append('<div class="defaultInputValue" ' + n + ' style="' + d + '"id="' + l + '">' + i.attr("default-value") + "</div>"),
							i.keyup(function () {
								var e = jQuery(this).parent().find(".defaultInputValue");
								jQuery(this).val().length > 0 ? e.hide() : e.show();
							});
					}
				}
			}),
			jQuery(".defaultInputValue").off("click", this.click).on("click", this.click),
			this.center();
	},
	center: function () {
		debug.log("$Brid.Html.DefaultInput.center()"),
			jQuery(".defaultInputValue").each(function (e, t) {
				if (null == jQuery(this).attr("data-position")) {
					var i = jQuery(this),
						a = i.parent(),
						s = (a.position(), a.find("label")),
						r = s.length,
						o = a.find("input, textarea"),
						n = (o.position(), o.height()),
						l = o.width(),
						d = (o.offset(), 0);
					"TEXTAREA" == o.prop("tagName") && (n = 12), null != o.attr("data-offset") && (d = parseInt(o.attr("data-offset")));
					var c = 0;
					r && (c = s.is(":visible") ? parseInt(s.outerHeight(!0)) : 23), o.is(":visible") || (l += "%");
					var u = parseInt(o.css("font-size")),
						h = parseInt(o.css("margin-top")),
						p = parseInt(o.css("padding-top")),
						g = parseInt((n - u) / 2) + h + p - d;
					(g += c),
						o.attr("default-value-fontsize") ? ((g += (u - parseInt(o.attr("default-value-fontsize"))) / 2), (u = o.attr("default-value-fontsize"))) : (u = o.css("font-size")),
						i.css({
							top: g + "px",
							width: l + "px",
							paddingLeft: "5px",
							fontSize: u,
						}),
						a.hasClass("required") || i.addClass("defaultValueIndent"),
						i.attr("data-position", !0);
				}
			});
	},
	click: function (e) {
		debug.log("$Brid.Html.DefaultInput.click", "On default Input Div click event");
		var t = jQuery(this);
		t.parent(), t.prev().select(), t.prev().val().length > 0 && t.hide();
	},
};
$Brid.Html.DefaultInput = jQuery.extend(!0, {}, DefaultInput);
var CheckboxElement = {
	init: function () {
		debug.log("$Brid.Html.CheckboxElement.init()", "Init custom checkboxes."), jQuery(".bridCheckbox").off("click", this.click).on("click", this.click);
	},
	click: function (e) {
		if ((debug.log("$Brid.Html.CheckboxElement.click", "Event"), jQuery(e.target).hasClass("checkboxContent") || jQuery(e.target).parent().hasClass("checkboxContent"))) {
			var t = jQuery(this),
				i = t.find(":input"),
				a = t.attr("data-method"),
				s = t.attr("data-name");
			if (t.hasClass("disabledCheckbox")) return debug.warn("Checkbox is disabled"), !1;
			var r = $Brid.Html.CheckboxElement.create({
				name: s,
			});
			$Brid.Util.executeCallback(r, "toggle", i), $Brid.Util.executeCallback(r, a, i);
		} else debug.warn('"checkboxContent" class attr is missing on element you have clicked');
	},
	getSelectedCheckboxes: function (e) {
		var t = [];
		return (
			jQuery('input[id*="' + e + '"]').each(function (e, i) {
				jQuery(this).hasClass("checked") && t.push(jQuery(this).attr("data-value"));
			}),
			t
		);
	},
	Checkbox: {
		init: function (e) {
			if (null == e.name) throw new ArgumentException('"name" property in argumnet object is missing. Try {name: "autoplay"}');
			return (this.className = "$Brid.HTml.CheckboxElement.Checkbox"), (this.name = e.name), null == e.id ? (this.id = e.name + "-id-") : (this.id = e.id), (this.checkAll = e.name + "-check-all"), (this.parentId = "checkbox-" + e.name + "-check-all"), null != e.targetElement && (this.targetElement = e.targetElement), jQuery.extend(!0, {}, this);
		},
		togglePlayerSize: function (e) {
			var t = jQuery("#PlayerWidth"),
				i = jQuery("#PlayerHeight");
			1 != jQuery(e).val() ? (t.removeClass("disabledInput"), i.removeClass("disabledInput")) : (t.addClass("disabledInput"), i.addClass("disabledInput"));
		},
		deselectCheckboxAll: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.deselectCheckboxAll");
			var e = jQuery("#" + this.parentId).find("input");
			this.deselect(e);
		},
		embedCodeAutoplayToggle: function (e) {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.embedCodeAutoplayToggle", e),
				$Brid.Html.Embed.Js.editVal([
					{
						name: "autoplay",
						value: jQuery(e).val(),
					},
				]),
				$Brid.Html.Embed.Iframe.editVal([
					{
						name: "autoplay",
						value: jQuery(e).val(),
					},
				]);
		},
		toggleParterMonetizationOptions: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleParterMonetizationOptions"),
				jQuery("#monetizePartner").animate(
					{
						height: "toggle",
					},
					500
				);
		},
		toggleControlsOptions: function (e) {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleControlsOptions", e), 1 != jQuery(e).val() ? jQuery("#controlsBehavior").next().addClass("disabledCheckbox") : jQuery("#controlsBehavior").next().removeClass("disabledCheckbox");
		},
		toggleUploadOptions: function (e) {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleUploadOptions", e), 1 != jQuery(e).val() ? jQuery("#upload").next().addClass("disabledCheckbox") : jQuery("#upload").next().removeClass("disabledCheckbox");
		},
		toggleGroup: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleGroup");
			var e = jQuery(this.targetElement).attr("data-id");
			debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleGroup", e, this), this.deselectAll();
			var t = (cntNotSelected = 0);
			jQuery("div.siteVideosNum").each(function () {
				if (jQuery(this).attr("data-group-name") == e) {
					var i = jQuery(this).parent().parent().parent().find(".singleCheckbox");
					i.parent().parent().hasClass("disabledCheckbox") ? debug.log("Skeeped from selection: " + this.id) : (t++, i.prop("checked", !0).addClass("checked").prev().show());
				} else cntNotSelected++;
			}),
				t > 0 && 0 == cntNotSelected && this.checkSelectAll(),
				this.toggleTopMenu();
		},
		checkSelectAll: function (e) {
			jQuery("#checkbox-" + this.name + "-check-all img.checked").show(), jQuery("#checkbox-" + this.name + "-check-all input[type=hidden]").addClass("checked");
		},
		toggle: function (e) {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.Toggle()", e), jQuery(e).hasClass("checked") ? this.deselect(e) : this.select(e), jQuery(e).attr("id") != this.checkAll && this.areAllSelected();
		},
		toggleAll: function (e) {
			debug.log("Checkbox.toggleAll"), jQuery(e).hasClass("checked") ? (this.selectAll(), this.togglePostButton(!0)) : (this.deselectAll(), this.togglePostButton(!1));
		},
		select: function (e) {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.select()", e), jQuery(e).attr("value", "1").addClass("checked"), jQuery(e).prev().fadeIn(200);
		},
		selectAll: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.selectAll()", this.id);
			var e = jQuery("#" + this.parentId).find("input");
			if (null == e) throw Error("Checkbox input element not found.");
			this.select(e),
				debug.log("Select input ids:" + this.id),
				jQuery("input[id*=" + this.id + "]").each(function (e) {
					-1 !==
					jQuery("#" + this.id)
						.parent()
						.parent()
						.attr("class")
						.indexOf("disabledCheckbox")
						? debug.log("Skeeped from selection: " + this.id)
						: (debug.log("Select: " + this.id),
						  jQuery("#" + this.id)
								.prop("checked", !0)
								.addClass("checked")
								.prev()
								.show());
				}),
				jQuery(".toolbarItem").css("opacity", 1);
		},
		deselect: function (e) {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.deselect()", e), jQuery(e).prev().hide(), jQuery(e).attr("value", "1").removeClass("checked").prop("value", "0");
		},
		deselectAll: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.deselectAll()", e);
			var e = jQuery("#" + this.parentId).find("input");
			this.deselect(e),
				jQuery(".toolbarItem").css("opacity", 0),
				jQuery("#" + this.checkAll)
					.prop("checked", !1)
					.removeClass("checked"),
				jQuery("#" + this.checkAll)
					.next()
					.css("background-image", "none"),
				jQuery("input[id*=" + this.id + "]")
					.removeClass("checked")
					.prop("checked", !1)
					.prop("value", "0")
					.prev()
					.hide();
		},
		areAllSelected: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.areAllSelected()");
			var e = jQuery("input[id*=" + this.id + "]").length,
				t = jQuery("input.checked[id*=" + this.id + "]").length,
				i = jQuery("#" + this.parentId).find("input");
			debug.log("$Brid.Html.CheckboxElement.Checkbox.areAllSelected()", "Ima ih ukupno:", e, "Chekiranih:", t), t < e && this.deselect(i), t == e && this.select(i);
		},
		isAnySelected: function () {
			return debug.log("$Brid.Html.CheckboxElement.Checkbox.isAnySelected()"), !!jQuery("input[id*=" + this.id + "]").hasClass("checked");
		},
		togglePostButton: function (e) {
			jQuery("#postVideo").length > 0 && (e ? jQuery("#postVideo").removeClass("disabled") : jQuery("#postVideo").addClass("disabled")), jQuery("#postPlaylist").length > 0 && (e ? jQuery("#postPlaylist").removeClass("disabled") : jQuery("#postPlaylist").addClass("disabled"));
		},
		toggleTopMenu: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.showToolbar()");
			var e = jQuery(".toolbarItem");
			debug.log("$Brid.Html.CheckboxElement.Checkbox.showToolbar()", e), this.isAnySelected() ? (e.css("opacity", "1"), e.show()) : (e.css("opacity", "0"), e.hide());
		},
		toggleVideoField: function (e) {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleVideoField()", e);
			var t = jQuery(e).attr("id").replace("_on", "");
			debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleVideoField() fieldId", t),
				jQuery(e).hasClass("checked")
					? (jQuery("#Video" + t)
							.parent()
							.fadeIn(),
					  jQuery(".hd .invisibleDiv").fadeIn())
					: jQuery(".hd .invisibleDiv").fadeOut();
		},
		toggleVideoOverride: function (e) {
			jQuery("#checkbox-monetize_on").toggleClass("disabledCheckbox");
		},
		toggleAdSettings: function (e) {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleAdSettings()", e);
			try {
				debug.log("$Brid.Html.CheckboxElement.Checkbox.toggleAdSettings()", "Try to toggle save object");
			} catch (e) {}
			var t = function () {
				jQuery("#adSettings").animate(
					{
						height: "toggle",
					},
					600,
					function () {}
				);
			};
			jQuery("#adSettings0").length > 0
				? jQuery("#adSettings0").fadeToggle(100, function () {
						t();
				  })
				: t();
		},
		toggleUnitStartMuted: function (e) {
			if (1 != jQuery(e).val()) {
				jQuery("#checkbox-UnitStartMutedRollover").addClass("disabledCheckbox"), jQuery("#checkbox-UnitStartMutedRollover").parent().addClass("disabledCheckbox");
				var t = jQuery("#UnitStartMutedRollover");
				this.deselect(t);
			} else jQuery("#checkbox-UnitStartMutedRollover").removeClass("disabledCheckbox"), jQuery("#checkbox-UnitStartMutedRollover").parent().removeClass("disabledCheckbox");
		},
		toggleUnitAutoplayInviewOptions: function (e) {
			if (1 != jQuery(e).val()) {
				jQuery("#checkbox-UnitPauseOffView").addClass("disabledCheckbox"), jQuery("#checkbox-UnitPauseOffView").parent().addClass("disabledCheckbox");
				var t = jQuery("#UnitPauseOffView");
				this.deselect(t), jQuery("#checkbox-UnitViewability").addClass("disabledCheckbox"), jQuery("#checkbox-UnitViewability").parent().addClass("disabledCheckbox"), (t = jQuery("#UnitViewability")), this.deselect(t);
			} else jQuery("#checkbox-UnitPauseOffView").removeClass("disabledCheckbox"), jQuery("#checkbox-UnitPauseOffView").parent().removeClass("disabledCheckbox"), jQuery("#checkbox-UnitViewability").removeClass("disabledCheckbox"), jQuery("#checkbox-UnitViewability").parent().removeClass("disabledCheckbox");
		},
		toggleAutoplayOptions: function (e) {
			if (1 != jQuery(e).val()) {
				jQuery("#checkbox-PlayerAutoplayInview").addClass("disabledCheckbox"), jQuery("#checkbox-PlayerAutoplayInview").parent().addClass("disabledCheckbox");
				var t = jQuery("#PlayerAutoplayInview");
				this.deselect(t), jQuery("#checkbox-PlayerAutoplayOnAd").addClass("disabledCheckbox"), jQuery("#checkbox-PlayerAutoplayOnAd").parent().addClass("disabledCheckbox"), (t = jQuery("#PlayerAutoplayOnAd")), this.deselect(t), jQuery("#checkbox-inpage_mobile_clicktoplay").removeClass("disabledCheckbox"), jQuery("#checkbox-inpage_mobile_clicktoplay").parent().removeClass("disabledCheckbox");
			} else jQuery("#checkbox-PlayerAutoplayInview").removeClass("disabledCheckbox"), jQuery("#checkbox-PlayerAutoplayInview").parent().removeClass("disabledCheckbox"), jQuery("#checkbox-PlayerAutoplayOnAd").removeClass("disabledCheckbox"), jQuery("#checkbox-PlayerAutoplayOnAd").parent().removeClass("disabledCheckbox"), jQuery("#checkbox-inpage_mobile_clicktoplay").addClass("disabledCheckbox"), jQuery("#checkbox-inpage_mobile_clicktoplay").parent().addClass("disabledCheckbox"), (t = jQuery("#inpage_mobile_clicktoplay")), this.select(t);
		},
		toggleFb: function (e) {
			debug.log("togleFb ", e), 1 != jQuery(e).val() ? (jQuery("#checkbox-PlayerAutoplay").removeClass("disabledCheckbox"), jQuery("#checkbox-PlayerAutoplay").parent().removeClass("disabledCheckbox"), jQuery("#checkbox-PlayerStartMuted").removeClass("disabledCheckbox"), jQuery("#checkbox-PlayerStartMuted").parent().removeClass("disabledCheckbox"), jQuery("#checkbox-inpage_mobile").hasClass("paidBlocked") || (jQuery("#checkbox-inpage_mobile").removeClass("disabledCheckbox"), jQuery("#checkbox-inpage_mobile").parent().removeClass("disabledCheckbox"))) : (jQuery("#checkbox-PlayerAutoplay").addClass("disabledCheckbox"), jQuery("#checkbox-PlayerAutoplay").parent().addClass("disabledCheckbox"), jQuery("#checkbox-PlayerStartMuted").addClass("disabledCheckbox"), jQuery("#checkbox-PlayerStartMuted").parent().addClass("disabledCheckbox"), jQuery("#checkbox-inpage_mobile").hasClass("paidBlocked") || (jQuery("#checkbox-inpage_mobile").addClass("disabledCheckbox"), jQuery("#checkbox-inpage_mobile").parent().addClass("disabledCheckbox")));
		},
		selectProperty: function (e) {
			if ((debug.log("$Brid.Html.CheckboxElement.Checkbox.selectProperty()", e), null == e.property)) throw ArgumentException('"property" property in argument is missing e.g {property : property, status : status}');
			if (null == e.status) throw ArgumentException('"status" property in argument is missing e.g {property : property, status : status}');
			this.deselectAll();
			var t = (cntNotSelected = 0);
			jQuery("input[id*=" + this.id + "]").each(function (i) {
				var a = jQuery(this).attr("data-value"),
					s = jQuery("#partner-options-" + a)
						.parent()
						.find("." + e.property);
				if (null != s[0] && jQuery(s[0]).attr("data-value") == e.status) {
					debug.log("property", s);
					var r = jQuery("#tableRow" + a)
						.find(".checkbox")
						.hasClass("disabledCheckbox");
					debug.log("Checkbox is disabled?", r, this.id),
						0 == r &&
							(jQuery("#" + this.id).css("background-image", "url(" + $BridWordpressConfig.pluginUrl + "/img/checkbox_all.jpg)"),
							jQuery("#" + this.id)
								.prop("checked", !0)
								.addClass("checked")
								.prev()
								.show(),
							t++);
				} else cntNotSelected++;
			}),
				t > 0 && 0 == cntNotSelected ? (this.checkSelectAll(), this.togglePostButton(!0)) : this.togglePostButton(!1),
				jQuery(".toolbarItem").fadeIn();
		},
		Published: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.Published()"),
				this.selectProperty({
					property: "video-status",
					status: 1,
				});
		},
		Pending: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.Pending()"),
				this.selectProperty({
					property: "video-status",
					status: 7,
				});
		},
		None: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.None()"), this.deselectAll();
		},
		Paused: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.Paused()"),
				this.selectProperty({
					property: "video-status",
					status: 0,
				});
		},
		Failed: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.Failed()"),
				this.selectProperty({
					property: "video-status",
					status: 5,
				});
		},
		Monetized: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.Monetized()"),
				this.selectProperty({
					property: "video-monetize",
					status: 1,
				});
		},
		NotMonetized: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.NotMonetized()"),
				this.selectProperty({
					property: "video-monetize",
					status: 0,
				});
		},
		Verified: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.Verified()"),
				this.deselectAll(),
				this.selectProperty({
					property: "video-verified",
					status: 1,
				}),
				this.toggleTopMenu();
		},
		NotVerified: function () {
			debug.log("$Brid.Html.CheckboxElement.Checkbox.Verified()"),
				this.deselectAll(),
				this.selectProperty({
					property: "video-verified",
					status: 0,
				}),
				this.toggleTopMenu();
		},
		submitForm: function (e) {
			var t = jQuery(e).closest("form"),
				i = jQuery(e).attr("id");
			debug.log("iddd", jQuery(e).attr("id")), null != t && t.find("[id=" + i + "Button]").click();
		},
		enableSubmit: function (e) {
			debug.log("$Brid.Html.Form.enableSubmit()");
			var t = jQuery("#UserUsername").val(),
				i = jQuery("#UserPassword").val(),
				a = jQuery("#UserTermsConfirmed").val(),
				s = jQuery("#recaptcha_response_field").val(),
				r = 1;
			"text" == jQuery("#UserPassword").attr("type") && (r = 0.3),
				i.length > 0 ? jQuery("#showHidePass").css("opacity", r) : jQuery("#showHidePass").css("opacity", 0),
				"" != t && $Brid.Util.isEmailValid(t) && "" != i && i.length > 6 && i.length < 50 && 1 == a && s.length > 1
					? jQuery("#registerButton").button({
							disabled: !1,
					  })
					: jQuery("#registerButton").button({
							disabled: !0,
					  });
		},
		changeAspectRatio: function (e) {
			parseInt(jQuery("#keepOriginalRatio").val()) && $Brid.Util.calculateAspectRatio();
		},
	},
	create: function (e) {
		return debug.log("$Brid.Html.CheckboxElement.create", e), this.Checkbox.init(e);
	},
};
$Brid.Html.CheckboxElement = jQuery.extend(!0, {}, CheckboxElement);
var Selectbox = {
	init: function () {
		debug.log("$Brid.Html.Selectbox.init()", "Init custom selectboxes."), jQuery(".selectbox").off("click", this.clickSelectbox).on("click", this.clickSelectbox), jQuery(".selectBoxActive").off("click", this.clickSelectboxName).on("click", this.clickSelectboxName), jQuery(".selectBoxActiveImgDiv").off("click", this.clickSelectboxName).on("click", this.clickSelectboxName), this.initTopChosen();
	},
	initTopChosen: function () {
		debug.log("$Brid.Html.Selectbox.initTopChosen()", "Init chosen Top selectboxes."), jQuery(".chzn-select").chosen();
	},
	clickSelectbox: function (e) {
		debug.log("$Brid.Html.Selectbox.clickSelectbox", "Event");
		var t = jQuery(e.target).hasClass("selectbox") ? jQuery(e.target) : jQuery(e.target).parent();
		if ((debug.log(t), t.hasClass("selectbox"))) {
			debug.log("click item", t);
			var i = jQuery(this).parent().parent().parent(),
				a = jQuery(i).find(".selectBoxActive"),
				s = jQuery(i).find(".ul-selectbox"),
				r = i.find(":input");
			r.val(t.attr("data-value")),
				null != r.attr("onchange") && $Brid.Util.executeCallback(callbacks, r.attr("onchange"), r),
				jQuery(s)
					.find("li")
					.each(function (e, t) {
						jQuery(this).removeClass("selected_selectbox");
					}),
				a.html(t.text()),
				s.fadeOut(150),
				t.addClass("selected_selectbox");
		}
	},
	clickSelectboxName: function (e) {
		debug.log("$Brid.Html.Selectbox.clickSelectboxName", "Event");
		var t = jQuery(this).parent().find(".ul-selectbox");
		jQuery(".selectBoxContent").find(".ul-selectbox").not(t).hide(), jQuery(t).is(":visible") ? (jQuery(t).hide(), jQuery(document).unbind("click", $Brid.Html.Selectbox.closeSelectboxes)) : (jQuery(t).fadeIn(), jQuery(document).bind("click", $Brid.Html.Selectbox.closeSelectboxes));
	},
	closeSelectboxes: function (e) {
		debug.log("$Brid.Html.Selectbox.closeSelectboxes", "Event");
		var t = !1;
		jQuery("selectBoxActive,selectbox,selectBoxActiveImg,selectBoxActiveImgDiv".split(",")).each(function (i, a) {
			if (jQuery(e.target).hasClass(a)) return (t = !0), !1;
		}),
			t || (jQuery(".selectBoxContent").find(".ul-selectbox").hide(), jQuery(document).unbind("click", $Brid.Html.Selectbox.closeSelectboxes));
	},
};
$Brid.Html.Selectbox = jQuery.extend(!0, {}, Selectbox);
var FlashMessage = {
	ajaxMsgHeight: 30,
	delay: 5e3,
	loading: function (e) {
		debug.log("$Brid.Html.FlashMessage.loading()", e);
		var t = jQuery("#ajaxFlashMessage");
		t.parent().css({
			height: this.ajaxMsgHeight + "px",
			width: "100%",
		}),
			t.css({
				height: this.ajaxMsgHeight + "px",
				width: "100%",
			}),
			t.removeClass("success error").addClass("loading").html(e).fadeIn(500);
	},
	show: function (e) {
		if ((debug.log("$Brid.Html.FlashMessage.show()", e), "object" != typeof e)) throw new ArgumentException('Argument must be typeof object. Try this format: show({msg : "text"}');
		if (null == e.msg) throw new ArgumentException('Argument property "msg" is missing.  Try this format: show({msg : "text"}');
		jQuery("#ajaxFlashMessage").text();
		var t = jQuery("#ajaxFlashMessage"),
			i = $Brid.Html.FlashMessage.delay;
		if ((debug.log("msgBox.parent()", t.parent(), "ajaxMsgHeight", this.ajaxMsgHeight), null == e.status)) throw new ArgumentException('Argument property "status" is missing.  Try this format: show({msg : "message" , stauts : true}', e);
		"success" == e.status || 1 == e.status
			? (t.parent().css({
					height: this.ajaxMsgHeight + "px",
					width: "100%",
			  }),
			  t.css("width", "100%"),
			  t
					.removeClass("loading error")
					.addClass("success")
					.html(e.msg)
					.css("height", this.ajaxMsgHeight + "px")
					.fadeIn()
					.delay(i)
					.fadeOut(300, $Brid.Html.FlashMessage.hide))
			: (t.parent().css({
					height: this.ajaxMsgHeight + "px",
					width: "100%",
			  }),
			  t.css("width", "100%"),
			  t
					.removeClass("loading success")
					.addClass("error")
					.html(e.msg)
					.css("height", this.ajaxMsgHeight + "px")
					.fadeIn("fast")
					.delay(i)
					.fadeOut(300, $Brid.Html.FlashMessage.hide));
	},
	hide: function () {
		debug.log("$Brid.Html.FlashMessage.hide()", "Hiding message...");
		var e = jQuery("#ajaxFlashMessage");
		e.fadeOut("fast", function () {
			e.parent().css({
				height: "0px",
				width: "0px",
			}),
				e.css({
					height: "0px",
					width: "0px",
				});
		}),
			$Brid.Html.Sticky.doWeNeedToMoveAnyElement("minus");
	},
	check: function () {
		debug.log("$Brid.Html.FlashMessage.check()", "Check message Hiding message...");
	},
};
$Brid.Html.FlashMessage = jQuery.extend(!0, {}, FlashMessage);
var GoogleCheckbox = {
	init: function () {
		debug.log("$Brid.Html.GoogleCheckbox.init()", "Init google checkbox menu.");
		var e = jQuery(".google_button"),
			t = jQuery("#g_menu");
		e.off("click", this.toggleCheckboxMenu).on("click", this.toggleCheckboxMenu), t.off("click", this.executeChecboxAction).on("click", this.executeChecboxAction);
	},
	toggleGMenu: function (e) {
		debug.log("$Brid.Html.GoogleCheckbox.toggleGMenu()", "Clicked on ID:", jQuery(this).attr("id"), "Event", jQuery(e.target));
		var t = jQuery(this).parent().find(".gdrop_down");
		if (($Brid.Html.GoogleCheckbox.hideAllGMenus(jQuery(this), t), t.is(":visible"))) {
			var i = jQuery(e.target).attr("data-method");
			debug.log("$Brid.Html.GoogleCheckbox.toggleGMenu()", "Method:", i),
				$Brid.Util.executeCallback($Brid.Callbacks, i, jQuery(e.target)),
				t.hide(0, function () {
					jQuery(document).unbind("click", $Brid.Html.GoogleCheckbox.hideAllGMenus);
				});
		} else
			debug.log("$Brid.Html.GoogleCheckbox.toggleGMenu()", "Show G menu"),
				t.fadeIn(300, function () {
					jQuery(document).bind("click", $Brid.Html.GoogleCheckbox.hideAllGMenus),
						$Brid.Util.isMobileDevice("ios") &&
							jQuery(document).bind("touchstart", function (e) {
								"chkbox_action" != jQuery(e.target).attr("class") && $Brid.Html.GoogleCheckbox.hideAllGMenus();
							});
				});
	},
	executeChecboxAction: function (e) {
		var t = jQuery(this).attr("data-checkbox-id"),
			i = jQuery("#" + t).attr("data-name"),
			a = jQuery(e.target).attr("data-method");
		debug.log("Checkbox callback method on click:", a, "Name:", i, "Checkbox id:", t);
		var s = $Brid.Html.CheckboxElement.create({
			name: i,
			targetElement: e.target,
		});
		$Brid.Util.executeCallback(s, a);
	},
	toggleCheckboxMenu: function (e) {
		debug.log("$Brid.Html.GoogleCheckbox.toggleCheckboxMenu()", "Toggle Checkbox Menu", e, jQuery(this));
		var t = jQuery(this).parent().find(".gdrop_down");
		$Brid.Html.GoogleCheckbox.hideAllGMenus(e, t),
			t.is(":visible")
				? t.hide(0, function () {
						jQuery(document).unbind("click", $Brid.Html.GoogleCheckbox.hideAllGMenus);
				  })
				: t.fadeIn(300, function () {
						jQuery(document).bind("click", $Brid.Html.GoogleCheckbox.hideAllGMenus);
				  });
	},
	hideGMenu: function (e) {
		var t = jQuery(e.target).find(".gdrop_down");
		jQuery(t).hide(function () {
			jQuery(document).unbind("click", $Brid.Html.GoogleCheckbox.hideAllGMenus);
		});
	},
	hideAllGMenus: function (e, t) {
		var i = jQuery(e).attr("id");
		debug.log("$Brid.Html.GoogleCheckbox.hideAllGMenus()", " First hide all other opened G menus", "id:" + i),
			null != i
				? jQuery(".gdrop_down").each(function (e, a) {
						null != t ? jQuery(this).parent().attr("id") != i && jQuery(this).attr("id") != t.attr("id") && jQuery(this).hide() : jQuery(this).parent().attr("id") != i && jQuery(this).hide();
				  })
				: null != t
				? i != t.attr("id") &&
				  jQuery(".gdrop_down").each(function (e, i) {
						jQuery(this).attr("id") != t.attr("id") && jQuery(this).hide();
				  })
				: jQuery(".gdrop_down").hide(),
			jQuery(document).unbind("click", $Brid.Html.GoogleCheckbox.hideAllGMenus);
	},
};
$Brid.Html.GoogleCheckbox = jQuery.extend(!0, {}, GoogleCheckbox);
var Search = {
	delay: 900,
	config: {},
	init: function (e) {
		if ((debug.log("$Brid.Html.Search.init()", e), null == e.className)) throw new ArgumentException('Argument "className" must sent as obj.argument. E.g {className : ".inputSearch"}');
		if (null == e.model) throw new ArgumentException('Argument "model" must sent as obj.argument. E.g {model : "Partner"}');
		null == e.controller && (e.controller = e.model.toLowerCase() + "s"), null == e.form && (e.form = e.model + "IndexForm"), null == e.button && (e.button = "button-search-" + e.model), (e.loadingMsg = ""), null == e.into && (e.into = ".bp_list_items");
		var t = jQuery("#" + e.form).attr("data-loadIntoDivClass");
		null != t && (e.into = "." + t),
			null != e.putContentIntoDivClass && (e.into = "." + e.putContentIntoDivClass),
			(e.callback = {
				after: {
					name: "searchLoaded",
					element: {
						arguments: e,
					},
				},
			}),
			(this.config = jQuery.extend(!1, {}, e)),
			debug.log("Search config: ", this.config),
			$Brid.stopTimeout("Search.search"),
			jQuery("#" + e.button)
				.off("click.Search", this.click)
				.on("click.Search", this.click),
			jQuery(".inputSearch").off("keyup.Search", this.keyup).on("keyup.Search", this.keyup),
			jQuery(".inputSearch").off("keydown.Search", this.keydown).on("keydown.Search", this.keydown),
			jQuery(".inputSearch").off("keypress.Search", this.keypress).on("keypress.Search", this.keypress);
	},
	doSearch: function () {
		var e = $Brid.Html.Search.config.model + "s",
			t = $Brid.Html.Search.config.model,
			i = jQuery("#" + e + "-content");
		$Brid.Html.Search.config.objInto && (i = jQuery($Brid.Html.Search.config.objInto)), (e = e.toLowerCase()), null != $Brid.Html.Search.config.action && (e = $Brid.Html.Search.config.action);
		var a = {
			name: "insertContent",
			obj: i,
		};
		null != $Brid.Html.Search.config.after && (a = $Brid.Html.Search.config.after);
		var s = {
			action: e,
			search: jQuery("#" + t + "Search").val(),
		};
		void 0 !== $Brid.Html.Search.config.objInto && (i = jQuery($Brid.Html.Search.config.objInto)),
			null != $Brid.Html.Search.config.view && (s.view = $Brid.Html.Search.config.view),
			void 0 !== $Brid.Html.Search.config.mode && (s.mode = $Brid.Html.Search.config.mode),
			void 0 !== $Brid.Html.Search.config.subaction && (s.subaction = $Brid.Html.Search.config.subaction),
			void 0 !== $Brid.Html.Search.config.playlistType && (s.playlistType = $Brid.Html.Search.config.playlistType),
			void 0 !== $Brid.Html.Search.config.buttons && (s.buttons = $Brid.Html.Search.config.buttons),
			$Brid.Api.call({
				data: s,
				callback: {
					after: a,
				},
			});
	},
	click: function (e) {
		debug.log("Click search button: "), $Brid.stopTimeout("Search.search"), $Brid.Html.Search.doSearch();
	},
	keyup: function (e) {
		debug.log("$Brid.Html.Search.keyup()", "Event", e),
			e.preventDefault(),
			$Brid.stopTimeout("Search.search"),
			13 != e.which &&
				($Brid.timeout["Search.search"] = setTimeout(function () {
					debug.log("AUTO CALL Search on TIMEOUT: ", $Brid.Html.Search.config), $Brid.stopTimeout("Search.search"), $Brid.Html.Search.doSearch();
				}, $Brid.Html.Search.delay));
	},
	keydown: function (e) {
		debug.log("$Brid.Html.Search.keydown()", "Event", e), $Brid.stopTimeout("Search.search");
	},
	keypress: function (e) {
		debug.log("$Brid.Html.Search.keypress()", "Event", e.which), 13 == e.which && ($Brid.stopTimeout("Search.search"), e.preventDefault(), $Brid.Html.Search.doSearch());
	},
};
$Brid.Html.Search = jQuery.extend(!0, {}, Search);
var Radio = {
	init: function () {
		debug.log("$Brid.Html.Radio.init()", "Init custom radio buttons."), jQuery(".options").off("click", this.click).on("click", this.click);
	},
	click: function (e) {
		var t = jQuery(e.target).hasClass("option") ? jQuery(e.target) : jQuery(e.target).parent();
		if (t.hasClass("option") && !t.parent().hasClass("disabledCheckbox")) {
			var i = jQuery(this).find(":input");
			i.val(t.attr("data-value")), jQuery(this).find(".ul-opitons li").find(".option_selected").hide(), jQuery(t).find(".option_selected").fadeIn(200), $Brid.Util.executeCallback($Brid.Callbacks, i.attr("data-method"), i);
		}
	},
};
$Brid.Html.Radio = jQuery.extend(!0, {}, Radio);
var QuickLibrary = {
	init: function () {
		jQuery(".media-brid-action")
			.off("click")
			.on("click", function () {
				var e = jQuery(this).attr("data-action");
				$Brid.Api.call({
					data: {
						action: "quickLibrary",
						file: e,
					},
					callback: {
						after: function (t) {
							jQuery("#bridSpin").css("visibility", "hidden"), jQuery("#bridLibraryContent").html(t), $Brid.Html.QuickLibrary.init(), "video_library" == e ? $Brid.Html.PostVideo.init() : "playlist_library" == e && $Brid.Html.PostPlaylist.init();
						},
						before: function (e) {
							jQuery("#bridSpin").css("visibility", "visible");
						},
					},
				});
			});
	},
};
$Brid.Html.QuickLibrary = jQuery.extend(!0, {}, QuickLibrary);
var PostVideo = {
	init: function () {
		jQuery(".media-router").children().off("click", $Brid.Html.PostVideo.onTabClick).on("click", $Brid.Html.PostVideo.onTabClick);
	},
	onTabClick: function () {
		try {
			jQuery(document).unbind("cbox_cleanup");
		} catch (e) {
			debug.error("Erro on unbind cbox_cleanup");
		}

		// Clear video status interval when tab is changed
		console.log("-- tab - clear interval --");
		clearInterval(checkStatusInterval);

		jQuery("#updateBridItem").css("display", "none");
		var e = jQuery(this).attr("data-id"),
			t = jQuery(this);
		$Brid.Html.PostVideo.callAjax(e, t);
	},
	callAjax: function (e, t) {
		$Brid.Api.call({
			data: {
				action: e,
			},
			callback: {
				after: function (i) {
					jQuery("#bridSpin").css("visibility", "hidden"), jQuery(".media-router").children().removeClass("active"), t.addClass("active"), jQuery("#brid-content").html(i), ("addVideoPost" != e && "videoLibraryPost" != e) || (debug.log("ACTION", e), jQuery("#videoSaveAdd").css("display", "inline-block")), "videoLibraryPost" == e && jQuery("#updateBridItem").css("display", "block");
				},
				before: function (e) {
					jQuery("#bridSpin").css("visibility", "visible");
				},
			},
		});
	},
};
$Brid.Html.PostVideo = jQuery.extend(!0, {}, PostVideo);
var PostPlaylist = {
	init: function () {
		jQuery(".media-router").children().off("click", $Brid.Html.PostPlaylist.onTabClick).on("click", $Brid.Html.PostPlaylist.onTabClick);
	},
	onTabClick: function () {
		try {
			jQuery(document).unbind("cbox_cleanup");
		} catch (e) {
			debug.error("Erro on unbind cbox_cleanup");
		}
		var e = jQuery(this).attr("data-id"),
			t = jQuery(this).attr("data-playlistType"),
			i = jQuery(this);
		selectedVideos = new Array();
		var a = {
			action: e,
		};
		null != t && (a.playlistType = t),
			jQuery("#updateBridItem").css("display", "none"),
			$Brid.Api.call({
				data: a,
				callback: {
					after: function (t) {
						jQuery("#bridSpin").css("visibility", "hidden"), jQuery(".media-router").children().removeClass("active"), i.addClass("active"), jQuery("#brid-content").html(t), ("addPlaylistPost" != e && "playlistLibraryPost" != e) || (debug.log("ACTION", e), jQuery("#videoSaveAdd").css("display", "inline-block"), "playlistLibraryPost" == e ? (jQuery("#bridSelected").addClass("empty"), jQuery("#updateBridItem").css("display", "block")) : (jQuery("#bridSelected").removeClass("empty"), jQuery("#updateBridItem").css("display", "none")));
					},
					before: function (e) {
						jQuery("#bridSpin").css("visibility", "visible");
					},
				},
			});
	},
};
$Brid.Html.PostPlaylist = jQuery.extend(!0, {}, PostPlaylist);

var Adtags = {
	init: function () {},
	destroy: function () {
		debug.log("$Brid.Html.Adtags.destroy()");

		jQuery(".chzn-select-adtag").chosen("destroy");

		jQuery(".chzn-select-adtag").each(function (k, v) {
			var n = jQuery(v).next();

			if (n.hasClass("chosen-container")) {
				console.log("remove", n);

				n.remove();
			}
		});
	},
	build: function (waterfall) {
		//var opt = {search_contains : true, disable_search_threshold : 0, no_results_text: "Ad tag not found.", ad_box : true}, waterfall = <?php echo $this->Bridhtml->hasAccess('waterfall'); ?>;

		debug.log("$Brid.Html.Adtags.build()", "addEditToChozen", waterfall);

		var opt = { ad_box: true, search_contains: true };

		jQuery(".chzn-select-adtag")
			.off("chosen:preadd")
			.on("chosen:preadd", function (e, p) {
				debug.log("chosen:preadd", p, p.chosen);
				var selectbox_id = jQuery(p.chosen.form_field_jq).attr("id");
				p.chosen.addItem = true;
				//Limit banner
				if (selectbox_id.indexOf("banner") != -1 && p.chosen.choices_count() == 1) {
					p.chosen.addItem = false;
					$Brid.Util.openDialog("Maximum Ad tags in waterfall for banner is 1.", "Slot limit reached");
				}
				//Limit free account
				if (!waterfall && p.chosen.choices_count() >= 1) {
					p.chosen.addItem = false;
					$Brid.Util.openDialog('This account is already at its plan limit and will need to be upgraded before adding more Ad Tags in waterfall. <a href="https://cms.brid.tv/users/login/?redirect=order" target="_blank">Upgrade now</a>', "Plan limit reached");
				}
			})
			.off("chosen:click")
			.on("chosen:click", function (e, p) {
				var selectbox_id = jQuery(p.chosen.form_field_jq).attr("id");
				var chosen = jQuery("#" + selectbox_id).next();
				var loader = chosen.find(".chosen-loader");
				var ad_tag_type = "player";
				var selected_items = p.chosen.choices_count();

				debug.log("selected_items", selected_items);

				var append_to_stack = 1;

				if (selectbox_id.indexOf("banner") != -1) {
					ad_tag_type = "banner";

					if (selected_items == 1) {
						append_to_stack = 0;
					}
				} else if (selectbox_id.indexOf("unit") != -1) {
					ad_tag_type = "outstream";
				} else {
					ad_tag_type = "player";
				}

				if (!waterfall && selected_items == 1) {
					append_to_stack = 0;
				}
				//alert('Ad new ad tag!');

				jQuery.colorbox({
					onOpen: function () {
						loader.css("display", "inline-flex");
					},
					onCleanup: function () {
						loader.hide();
					},
					href: "admin-ajax.php?action=addAdTags&select_box_id=" + selectbox_id + "&ad_tag_type=" + ad_tag_type + "&append_to_stack=" + append_to_stack,
					/*width:"75%",
                        height:"75%",*/
					className: "bridAddTag",
					innerWidth: 920,
					innerHeight: 650,
				});
			})
			.off("change")
			.on("change", function (evt, p) {
				debug.log("CHANGE", p, p._ref);
				$Brid.Html.Adtags.addEditToChozen();
			})
			.chosen(opt)
			.chosenSortable();

		$Brid.Html.Adtags.addEditToChozen();
	},
	//$Brid.Html.Adtags.addEditToChozen()
	addEditToChozen: function () {
		debug.log("$Brid.Html.Adtags.addEditToChozen()", "addEditToChozen");
		//Quick edit tags
		jQuery("li.search-choice").each(function (k, v) {
			var index = jQuery(v).find(".search-choice-close").attr("data-option-array-index");

			var selectbox = jQuery(v).parent().parent().prev();

			var id = jQuery(jQuery(selectbox)[0][index]).val();

			var already_exist = jQuery(v).find("i");

			if (already_exist.length == 0) {
				var $icon = '<i class="fa fa-pencil" aria-hidden="true"></i>';
				jQuery(v).prepend($icon);
				$icon = jQuery(v).find("i");

				var loader = jQuery(v).parent().parent().find(".chosen-loader");

				$icon.on("click", function (e) {
					debug.log("On click icon, open modal");

					jQuery.colorbox({
						onOpen: function () {
							loader.css("display", "inline-flex");
						},
						onCleanup: function () {
							loader.hide();
						},
						onComplete: function () {
							jQuery(".chzn-select-adtag").trigger("chosen:close");
						},
						href: "admin-ajax.php?action=editAdTags&id=" + id,
						/*width:"75%",
                            height:"75%",*/
						className: "bridAddTag",
						innerWidth: 920,
						innerHeight: 650,
					});
					/*
                        jQuery('#myModal').foundation('reveal', 'open', {
                            url: '/adtags/edit/'+id+'/modal/',
                            beforeSend : function(ajx, p){
                                loader.css('display', 'inline-flex');
                            },
                            success: function(data) {
                                 jQuery('#myModal').html(data);
                                 jQuery(".chzn-select-adtag").trigger("chosen:close");
                                 loader.hide();
                            },
                            error: function() {
                                alert('failed loading modal');
                            }
                        });
                        */
				});

				jQuery(v).prepend($icon);
			}
		});
	},
};
$Brid.Html.Adtags = jQuery.extend(true, {}, Adtags);

var Util = {
	allowedStreamingExtensions: ["f4m", "smil", "m3u8"],
	allowedIntroUrlExtensions: ["mp4", "webm"],
	decodeHtml: function (e) {
		var t = document.createElement("textarea");
		return (t.innerHTML = e), t.value;
	},
	Macro: {
		macros: [],
		activeElement: null,
		setActive: function (elem) {
			this.activeElement = elem;
			debug.log("active element", this.activeElement);
		},
		init: function () {
			$_self = this;
			$_self.macros = [];
			//Populate macros
			jQuery(".macro").each(function (k, v) {
				$_self.macros.push(jQuery(this).attr("data-id"));
			});

			this.start();
		},
		start: function () {
			jQuery(this.activeElement)
				.off("input.Macro")
				.on("input.Macro", function () {
					var a = jQuery(this).val();
					$Brid.Util.Macro.checkOtherMacros(a); //bracelets {}, __ __
					$Brid.Util.Macro.checkMacros(a); //bracelets []
				});

			jQuery(".macro")
				.off("click.Macro")
				.on("click.Macro", function (e) {
					debug.log("Macro");

					var str = jQuery(this).attr("data-id");

					debug.log("Macro data-id:", str);

					//jQuery('#Ad0AdTagUrl').select(function(event) {
					var elem = jQuery($Brid.Util.Macro.activeElement);
					var start = elem.prop("selectionStart");
					var end = elem.prop("selectionEnd");

					var prefixStr = elem.val().substring(0, start);
					var sufixStr = elem.val().substring(end, elem.val().length);
					var selectedStr = elem.val().substring(start, end);

					debug.log("Nu,", start, end);

					debug.log("selectedStr,", selectedStr);
					debug.log("prefixStr,", prefixStr);
					debug.log("sufixStr,", sufixStr);
					elem.val(prefixStr + str + sufixStr);
				});
		},
		checkMacros: function (m) {
			var matches = []; //Brid macro list

			matches = $Brid.Util.Macro.testAdTagUrlMacros(m);

			if (matches.length > 0) {
				//Populate Brid macros array

				//Compare with matches found in ad tag
				jQuery(matches).each(function (k, v) {
					var index = jQuery.inArray(v, $Brid.Util.Macro.macros);

					if (index == -1) {
						jQuery(".error-macro")
							.html("We have noticed unrecognized macros in your ad tag URL (e.g. " + v + "). Please use the macros available below and populate your ad tag accordingly or ignore this message if our system made a mistake.")
							.show();
						//debug.error('Unknown macro:', v);
					} else {
						jQuery(".error-macro").hide();
					}
				});
			} else {
				//jQuery('.error-macro').hide();
			}
		},
		checkOtherMacros: function (m) {
			var matches = []; //Brid macro list

			matches = $Brid.Util.Macro.testAdTagUrlMacrosSpecific(m);

			if (matches.length > 0) {
				//Populate Brid macros array
				jQuery(".error-macro")
					.html("We have noticed unrecognized macros in your ad tag URL (e.g. " + matches.join(",") + "). Please use the macros available below and populate your ad tag accordingly or ignore this message if our system made a mistake.")
					.show();
			} else {
				jQuery(".error-macro").hide();
			}
		},
		testAdTagUrlMacros: function (m) {
			//Search macros between []
			var matches = [];
			var regex = /\[([a-zA-Z0-9\-\_]+)\]/g;
			var match = regex.exec(m);
			while (match != null) {
				matches.push("[" + match[1] + "]");
				match = regex.exec(m);
			}

			return matches;
		},
		testAdTagUrlMacrosSpecific: function (m) {
			//Search macros between {}
			var matches = [];
			var regex = /\{([a-zA-Z0-9\-\_]+)\}/g;
			var match = regex.exec(m);
			while (match != null) {
				matches.push("{" + match[1] + "}");
				match = regex.exec(m);
			}

			//Search macros between __ __
			var regex = /\_\_([a-zA-Z0-9\-\_]+)\_\_/g;
			var match = regex.exec(m);
			while (match != null) {
				matches.push("__" + match[1] + "__");
				match = regex.exec(m);
			}

			return matches;
		},
	},
	shortCode: function (e, t, i, playlistType, s) {
		debug.log("$Brid.Util.shortCode", e, t, i, playlistType, s), (v = jQuery(".wp-editor-area").val()), i || (i = "No title"), null == playlistType && (playlistType = "video");
		var r = "";

		// Video shortcode
		if (playlistType == "video" && brid_video_item != null) {
			var contentUrl = brid_video_item.Video?.source?.sd !== undefined ? brid_video_item.Video.source.sd : null;
			if (contentUrl == null) {
				contentUrl = CDN_Path + brid_video_item.Video.partner_id + "/sd/" + brid_video_item.Video.id + ".mp4";
			}

			var thumbnailurl = brid_video_item.Video.thumbnail;
			var image = bestSnapshot(brid_video_item.Video.snapshots, brid_video_item.Video.image);
			// Make link with right protocol
			contentUrl = contentUrl.replace(/((http|https):)/, "");
			contentUrl = window.location.protocol + contentUrl;
			// Clean description
			var description = htmlEntities(brid_video_item.Video.description);
			description = description.replace(/\n/g, " ");

			// Fix CDN path
			image = image?.replace(BridUGC.UGC + "partners/", CDN_Path) ?? "";
			thumbnailurl = thumbnailurl?.replace(BridUGC.UGC + "partners/", CDN_Path) ?? "";
			contentUrl = contentUrl.replace(BridUGC.UGC + "partners/", CDN_Path);

			if (brid_video_item.Video.geo_on == true) {
				contentUrl = contentUrl.replace("brid.tv/", "brid.tv/geo/");
			}

			var seoData = '" duration="' + brid_video_item.Video.duration + '" description="' + description + '" uploaddate="' + brid_video_item.Video.publish + '" thumbnailurl="' + thumbnailurl + '" image="' + image + '" contenturl="' + contentUrl;
		}
		// Playlist shortcode
		else if (playlistType == "playlist" && brid_playlist_item != null) {
			brid_playlist_item.Video = brid_playlist_item.Video ? brid_playlist_item.Video : [];
			var contentUrl = brid_playlist_item.Video[0]?.source?.sd !== undefined ? brid_playlist_item.Video[0]?.source?.sd : null;
			if (contentUrl == null) {
				contentUrl = CDN_Path + brid_playlist_item.Video[0]?.partner_id + "/sd/" + brid_playlist_item.Video[0]?.id + ".mp4";
			}

			var thumbnailurl = brid_playlist_item.Video[0]?.thumbnail;
			var image = bestSnapshot(brid_playlist_item.Video[0]?.snapshots, brid_playlist_item.Video[0]?.image);
			// Make link with right protocol
			contentUrl = contentUrl.replace(/((http|https):)/, "");
			contentUrl = window.location.protocol + contentUrl;
			// Clean description
			var description = htmlEntities(brid_playlist_item.Video[0]?.description);
			description = description.replace(/\n/g, " ");

			// Fix CDN path
			image = image?.replace(BridUGC.UGC + "partners/", CDN_Path) ?? "";
			thumbnailurl = thumbnailurl?.replace(BridUGC.UGC + "partners/", CDN_Path) ?? "";
			contentUrl = contentUrl.replace(BridUGC.UGC + "partners/", CDN_Path);

			if (brid_playlist_item.Video[0]?.geo_on == true) {
				contentUrl = contentUrl.replace("brid.tv/", "brid.tv/geo/");
			}

			var seoData = '" duration="' + brid_playlist_item.Video[0]?.duration + '" description="' + description + '" uploaddate="' + brid_playlist_item.Video[0]?.created + '" thumbnailurl="' + thumbnailurl + '" image="' + image + '" contenturl="' + contentUrl;
		} else {
			seoData = "";
		}
		var title = htmlEntities(i);
		var width = jQuery("#playerSelected option:selected").data("width") || $BridWordpressConfig.Player.width;
		var height = jQuery("#playerSelected option:selected").data("height") || $BridWordpressConfig.Player.height;

		return s && (r = 'autoplay="true"'), "" + "[brid " + r + " " + playlistType + '="' + e + '" player="' + t + '" title="' + title + seoData + '" width="' + width + '" height="' + height + '"' + "]";
	},
	shortCodeUnit: function (e) {
		var append = "";

		if (e.placeholder) {
			append += ' placeholder="true"';

			switch (e.placeholder_type) {
				case "custom":
					append += ' placeholder_img="' + e.placeholder_img + '"';

					break;
				case "og_image":
					append += ' placeholder_type="og_image"';
					break;
			}
		}

		return '[brid outstreamUnitType="' + e.type + '" outstreamUnit="' + e.id + '" height="' + e.height + '" width="' + e.width + '" ' + append + "]";
	},
	shortCodeCarousel: function (e) {
		console.log(e);
		return '[brid  carousel="' + e.id + '" player="' + e.player_id + '" width="' + $BridWordpressConfig.Player.width + '" height="' + $BridWordpressConfig.Player.height + '"]';
	},
	addToPost: function (e) {
		if ((debug.log("$Brid.Util.addToPost()", e), jQuery(".wp-editor-area").is(":visible"))) {
			debug.log("$Brid.Util.addToPost()", "isvisible", e);
			var t = jQuery(".wp-editor-area").prop("selectionStart"),
				i = jQuery(".wp-editor-area").val(),
				a = i.substring(0, t),
				s = i.substring(t, i.length);
			jQuery("#content").val(a + e + s);
		} else {
			debug.log("$Brid.Util.addToPost()", "mceInsertContent", e), tinyMCE.activeEditor.getContent(), tinyMCE.activeEditor.execCommand("mceInsertContent", !1, e);
			try {
				initBridEmbedConvert();
			} catch (e) {
				debug.error("initBridEmbedConvert", e.message);
			}
		}
	},
	getRedirectUrl: function (e) {
		debug.log("$Brid.Util.getRedirectUrl()");
		var t = {
			action: "videos",
		};
		switch ((new RegExp("/videos/edit/[0-9]", "i").test(e) && ((t.action = "editVideo"), (t.id = e.replace("/videos/edit/", ""))), e)) {
			case "/playlists/index/":
				t.action = "playlists";
		}
		return debug.log("$Brid.Util.getRedirectUrl()", "return:", t), t;
	},
	executeCallback: function (e, t, i) {
		try {
			null != t ? (debug.log("$Brid.Util.executeCallback()", "Object: " + e.className + " on click call: " + e.className + "." + t + "(); Args:", i, "Object:", e), null != i ? e[t].apply(e, [i]) : e[t].apply(e)) : debug.log("Callback method (" + e.className + "." + t + '()) is undefined. Add function "method" attribute of the HTML element and define your method "' + t + '" in "' + e.name + '" Object. Method will receive input element as argument.', e);
		} catch (i) {
			i instanceof TypeError
				? debug.log('Check is there callback method "' + t + '" defined in object "' + e.className + '". Called undefined Function: ' + e.className + "." + t + "();", i.message, i.stack)
				: debug.error("$Brid.Util.executeCallback()", "Object call: " + e.className + "." + t + "();", i.message, {
						stack: i.stack,
				  });
		}
	},
	ucfirst: function (e) {
		return debug.log("$Brid.Util.ucfirst()"), e.charAt(0).toUpperCase() + e.slice(1);
	},
	getMimeByExt: function (e) {
		debug.log("$Brid.Util.getMimeByExt()", e);
		var t = {
				".vtt": "vtt",
				".3dm": "x-world/x-3dmf",
				".3dmf": "x-world/x-3dmf",
				".a": "application/octet-stream",
				".aab": "application/x-authorware-bin",
				".aam": "application/x-authorware-map",
				".aas": "application/x-authorware-seg",
				".abc": "text/vnd.abc",
				".acgi": "text/html",
				".afl": "video/animaflex",
				".ai": "application/postscript",
				".aif": "audio/aiff",
				".aif": "audio/x-aiff",
				".aifc": "audio/aiff",
				".aifc": "audio/x-aiff",
				".aiff": "audio/aiff",
				".aiff": "audio/x-aiff",
				".aim": "application/x-aim",
				".aip": "text/x-audiosoft-intra",
				".ani": "application/x-navi-animation",
				".aos": "application/x-nokia-9000-communicator-add-on-software",
				".aps": "application/mime",
				".arc": "application/octet-stream",
				".arj": "application/arj",
				".arj": "application/octet-stream",
				".art": "image/x-jg",
				".asf": "video/x-ms-asf",
				".asm": "text/x-asm",
				".asp": "text/asp",
				".asx": "application/x-mplayer2",
				".asx": "video/x-ms-asf",
				".asx": "video/x-ms-asf-plugin",
				".au": "audio/basic",
				".au": "audio/x-au",
				".avi": "application/x-troff-msvideo",
				".avi": "video/avi",
				".avi": "video/msvideo",
				".avi": "video/x-msvideo",
				".avs": "video/avs-video",
				".bcpio": "application/x-bcpio",
				".bin": "application/mac-binary",
				".bin": "application/macbinary",
				".bin": "application/octet-stream",
				".bin": "application/x-binary",
				".bin": "application/x-macbinary",
				".bm": "image/bmp",
				".bmp": "image/bmp",
				".bmp": "image/x-windows-bmp",
				".boo": "application/book",
				".book": "application/book",
				".boz": "application/x-bzip2",
				".bsh": "application/x-bsh",
				".bz": "application/x-bzip",
				".bz2": "application/x-bzip2",
				".c": "text/plain",
				".c++": "text/plain",
				".cat": "application/vnd.ms-pki.seccat",
				".cc": "text/plain",
				".cc": "text/x-c",
				".ccad": "application/clariscad",
				".cco": "application/x-cocoa",
				".cdf": "application/cdf",
				".cdf": "application/x-cdf",
				".cdf": "application/x-netcdf",
				".cer": "application/pkix-cert",
				".cer": "application/x-x509-ca-cert",
				".cha": "application/x-chat",
				".chat": "application/x-chat",
				".class": "application/java",
				".class": "application/java-byte-code",
				".class": "application/x-java-class",
				".com": "application/octet-stream",
				".com": "text/plain",
				".conf": "text/plain",
				".cpio": "application/x-cpio",
				".cpp": "text/x-c",
				".cpt": "application/mac-compactpro",
				".cpt": "application/x-compactpro",
				".cpt": "application/x-cpt",
				".crl": "application/pkcs-crl",
				".crl": "application/pkix-crl",
				".crt": "application/pkix-cert",
				".crt": "application/x-x509-ca-cert",
				".crt": "application/x-x509-user-cert",
				".csh": "application/x-csh",
				".csh": "text/x-script.csh",
				".css": "application/x-pointplus",
				".css": "text/css",
				".cxx": "text/plain",
				".dcr": "application/x-director",
				".deepv": "application/x-deepv",
				".def": "text/plain",
				".der": "application/x-x509-ca-cert",
				".dif": "video/x-dv",
				".dir": "application/x-director",
				".dl": "video/dl",
				".dl": "video/x-dl",
				".doc": "application/msword",
				".dot": "application/msword",
				".dp": "application/commonground",
				".drw": "application/drafting",
				".dump": "application/octet-stream",
				".dv": "video/x-dv",
				".dvi": "application/x-dvi",
				".dwf": "drawing/x-dwf(old)",
				".dwf": "model/vnd.dwf",
				".dwg": "application/acad",
				".dwg": "image/vnd.dwg",
				".dwg": "image/x-dwg",
				".dxf": "application/dxf",
				".dxf": "image/vnd.dwg",
				".dxf": "image/x-dwg",
				".dxr": "application/x-director",
				".el": "text/x-script.elisp",
				".elc": "application/x-bytecode.elisp(compiledelisp)",
				".elc": "application/x-elc",
				".env": "application/x-envoy",
				".eps": "application/postscript",
				".es": "application/x-esrehber",
				".etx": "text/x-setext",
				".evy": "application/envoy",
				".evy": "application/x-envoy",
				".exe": "application/octet-stream",
				".f": "text/plain",
				".f": "text/x-fortran",
				".f77": "text/x-fortran",
				".f90": "text/plain",
				".f90": "text/x-fortran",
				".fdf": "application/vnd.fdf",
				".fif": "application/fractals",
				".fif": "image/fif",
				".fli": "video/fli",
				".fli": "video/x-fli",
				".flo": "image/florian",
				".flx": "text/vnd.fmi.flexstor",
				".fmf": "video/x-atomic3d-feature",
				".for": "text/plain",
				".for": "text/x-fortran",
				".fpx": "image/vnd.fpx",
				".fpx": "image/vnd.net-fpx",
				".frl": "application/freeloader",
				".funk": "audio/make",
				".g": "text/plain",
				".g3": "image/g3fax",
				".gif": "image/gif",
				".gl": "video/gl",
				".gl": "video/x-gl",
				".gsd": "audio/x-gsm",
				".gsm": "audio/x-gsm",
				".gsp": "application/x-gsp",
				".gss": "application/x-gss",
				".gtar": "application/x-gtar",
				".gz": "application/x-compressed",
				".gz": "application/x-gzip",
				".gzip": "application/x-gzip",
				".gzip": "multipart/x-gzip",
				".h": "text/plain",
				".h": "text/x-h",
				".hdf": "application/x-hdf",
				".help": "application/x-helpfile",
				".hgl": "application/vnd.hp-hpgl",
				".hh": "text/plain",
				".hh": "text/x-h",
				".hlb": "text/x-script",
				".hlp": "application/hlp",
				".hlp": "application/x-helpfile",
				".hlp": "application/x-winhelp",
				".hpg": "application/vnd.hp-hpgl",
				".hpgl": "application/vnd.hp-hpgl",
				".hqx": "application/binhex",
				".hqx": "application/binhex4",
				".hqx": "application/mac-binhex",
				".hqx": "application/mac-binhex40",
				".hqx": "application/x-binhex40",
				".hqx": "application/x-mac-binhex40",
				".hta": "application/hta",
				".htc": "text/x-component",
				".htm": "text/html",
				".html": "text/html",
				".htmls": "text/html",
				".htt": "text/webviewhtml",
				".htx": "text/html",
				".ice": "x-conference/x-cooltalk",
				".ico": "image/x-icon",
				".idc": "text/plain",
				".ief": "image/ief",
				".iefs": "image/ief",
				".iges": "application/iges",
				".iges": "model/iges",
				".igs": "application/iges",
				".igs": "model/iges",
				".ima": "application/x-ima",
				".imap": "application/x-httpd-imap",
				".inf": "application/inf",
				".ins": "application/x-internett-signup",
				".ip": "application/x-ip2",
				".isu": "video/x-isvideo",
				".it": "audio/it",
				".iv": "application/x-inventor",
				".ivr": "i-world/i-vrml",
				".ivy": "application/x-livescreen",
				".jam": "audio/x-jam",
				".jav": "text/plain",
				".jav": "text/x-java-source",
				".java": "text/plain",
				".java": "text/x-java-source",
				".jcm": "application/x-java-commerce",
				".jfif": "image/jpeg",
				".jfif": "image/pjpeg",
				".jfif-tbnl": "image/jpeg",
				".jpe": "image/jpeg",
				".jpe": "image/pjpeg",
				".jpeg": "image/jpeg",
				".jpg": "image/jpeg",
				".jps": "image/x-jps",
				".js": "application/x-javascript",
				".jut": "image/jutvision",
				".kar": "audio/midi",
				".kar": "music/x-karaoke",
				".ksh": "application/x-ksh",
				".ksh": "text/x-script.ksh",
				".la": "audio/nspaudio",
				".la": "audio/x-nspaudio",
				".lam": "audio/x-liveaudio",
				".latex": "application/x-latex",
				".lha": "application/lha",
				".lha": "application/octet-stream",
				".lha": "application/x-lha",
				".lhx": "application/octet-stream",
				".list": "text/plain",
				".lma": "audio/nspaudio",
				".lma": "audio/x-nspaudio",
				".log": "text/plain",
				".lsp": "application/x-lisp",
				".lsp": "text/x-script.lisp",
				".lst": "text/plain",
				".lsx": "text/x-la-asf",
				".ltx": "application/x-latex",
				".lzh": "application/octet-stream",
				".lzh": "application/x-lzh",
				".lzx": "application/lzx",
				".lzx": "application/octet-stream",
				".lzx": "application/x-lzx",
				".m": "text/plain",
				".m": "text/x-m",
				".m1v": "video/mpeg",
				".m2a": "audio/mpeg",
				".m2v": "video/mpeg",
				".m3u": "audio/x-mpequrl",
				".man": "application/x-troff-man",
				".map": "application/x-navimap",
				".mar": "text/plain",
				".mbd": "application/mbedlet",
				".mc": "application/x-magic-cap-package-1.0",
				".mcd": "application/mcad",
				".mcd": "application/x-mathcad",
				".mcf": "image/vasa",
				".mcf": "text/mcf",
				".mcp": "application/netmc",
				".me": "application/x-troff-me",
				".mht": "message/rfc822",
				".mhtml": "message/rfc822",
				".mid": "application/x-midi",
				".mid": "audio/midi",
				".mid": "audio/x-mid",
				".mid": "audio/x-midi",
				".mid": "music/crescendo",
				".mid": "x-music/x-midi",
				".midi": "application/x-midi",
				".midi": "audio/midi",
				".midi": "audio/x-mid",
				".midi": "audio/x-midi",
				".midi": "music/crescendo",
				".midi": "x-music/x-midi",
				".mif": "application/x-frame",
				".mif": "application/x-mif",
				".mime": "message/rfc822",
				".mime": "www/mime",
				".mjf": "audio/x-vnd.audioexplosion.mjuicemediafile",
				".mjpg": "video/x-motion-jpeg",
				".mm": "application/base64",
				".mm": "application/x-meme",
				".mme": "application/base64",
				".mod": "audio/mod",
				".mod": "audio/x-mod",
				".moov": "video/quicktime",
				".mov": "video/quicktime",
				".movie": "video/x-sgi-movie",
				".mp2": "audio/mpeg",
				".mp2": "audio/x-mpeg",
				".mp2": "video/mpeg",
				".mp2": "video/x-mpeg",
				".mp2": "video/x-mpeq2a",
				".mp3": "audio/mpeg3",
				".mp3": "audio/x-mpeg-3",
				".mp3": "video/mpeg",
				".mp3": "video/x-mpeg",
				".mpa": "audio/mpeg",
				".mpa": "video/mpeg",
				".mpc": "application/x-project",
				".mpe": "video/mpeg",
				".mpeg": "video/mpeg",
				".mpg": "audio/mpeg",
				".mpg": "video/mpeg",
				".mpga": "audio/mpeg",
				".mpp": "application/vnd.ms-project",
				".mpt": "application/x-project",
				".mpv": "application/x-project",
				".mpx": "application/x-project",
				".mrc": "application/marc",
				".ms": "application/x-troff-ms",
				".mv": "video/x-sgi-movie",
				".my": "audio/make",
				".mzz": "application/x-vnd.audioexplosion.mzz",
				".nap": "image/naplps",
				".naplps": "image/naplps",
				".nc": "application/x-netcdf",
				".ncm": "application/vnd.nokia.configuration-message",
				".nif": "image/x-niff",
				".niff": "image/x-niff",
				".nix": "application/x-mix-transfer",
				".nsc": "application/x-conference",
				".nvd": "application/x-navidoc",
				".o": "application/octet-stream",
				".oda": "application/oda",
				".omc": "application/x-omc",
				".omcd": "application/x-omcdatamaker",
				".omcr": "application/x-omcregerator",
				".p": "text/x-pascal",
				".p10": "application/pkcs10",
				".p10": "application/x-pkcs10",
				".p12": "application/pkcs-12",
				".p12": "application/x-pkcs12",
				".p7a": "application/x-pkcs7-signature",
				".p7c": "application/pkcs7-mime",
				".p7c": "application/x-pkcs7-mime",
				".p7m": "application/pkcs7-mime",
				".p7m": "application/x-pkcs7-mime",
				".p7r": "application/x-pkcs7-certreqresp",
				".p7s": "application/pkcs7-signature",
				".part": "application/pro_eng",
				".pas": "text/pascal",
				".pbm": "image/x-portable-bitmap",
				".pcl": "application/vnd.hp-pcl",
				".pcl": "application/x-pcl",
				".pct": "image/x-pict",
				".pcx": "image/x-pcx",
				".pdb": "chemical/x-pdb",
				".pdf": "application/pdf",
				".pfunk": "audio/make",
				".pgm": "image/x-portable-greymap",
				".pic": "image/pict",
				".pict": "image/pict",
				".pkg": "application/x-newton-compatible-pkg",
				".pko": "application/vnd.ms-pki.pko",
				".pl": "text/plain",
				".pl": "text/x-script.perl",
				".plx": "application/x-pixclscript",
				".pm": "image/x-xpixmap",
				".pm": "text/x-script.perl-module",
				".pm4": "application/x-pagemaker",
				".pm5": "application/x-pagemaker",
				".png": "image/png",
				".pnm": "application/x-portable-anymap",
				".pnm": "image/x-portable-anymap",
				".pot": "application/mspowerpoint",
				".pot": "application/vnd.ms-powerpoint",
				".pov": "model/x-pov",
				".ppa": "application/vnd.ms-powerpoint",
				".ppm": "image/x-portable-pixmap",
				".pps": "application/mspowerpoint",
				".pps": "application/vnd.ms-powerpoint",
				".ppt": "application/mspowerpoint",
				".ppt": "application/powerpoint",
				".ppt": "application/vnd.ms-powerpoint",
				".ppt": "application/x-mspowerpoint",
				".ppz": "application/mspowerpoint",
				".pre": "application/x-freelance",
				".prt": "application/pro_eng",
				".ps": "application/postscript",
				".psd": "application/octet-stream",
				".pvu": "paleovu/x-pv",
				".pwz": "application/vnd.ms-powerpoint",
				".py": "text/x-script.phyton",
				".pyc": "applicaiton/x-bytecode.python",
				".qcp": "audio/vnd.qcelp",
				".qd3": "x-world/x-3dmf",
				".qd3d": "x-world/x-3dmf",
				".qif": "image/x-quicktime",
				".qt": "video/quicktime",
				".qtc": "video/x-qtc",
				".qti": "image/x-quicktime",
				".qtif": "image/x-quicktime",
				".ra": "audio/x-pn-realaudio",
				".ra": "audio/x-pn-realaudio-plugin",
				".ra": "audio/x-realaudio",
				".ram": "audio/x-pn-realaudio",
				".ras": "application/x-cmu-raster",
				".ras": "image/cmu-raster",
				".ras": "image/x-cmu-raster",
				".rast": "image/cmu-raster",
				".rexx": "text/x-script.rexx",
				".rf": "image/vnd.rn-realflash",
				".rgb": "image/x-rgb",
				".rm": "application/vnd.rn-realmedia",
				".rm": "audio/x-pn-realaudio",
				".rmi": "audio/mid",
				".rmm": "audio/x-pn-realaudio",
				".rmp": "audio/x-pn-realaudio",
				".rmp": "audio/x-pn-realaudio-plugin",
				".rng": "application/ringing-tones",
				".rng": "application/vnd.nokia.ringing-tone",
				".rnx": "application/vnd.rn-realplayer",
				".roff": "application/x-troff",
				".rp": "image/vnd.rn-realpix",
				".rpm": "audio/x-pn-realaudio-plugin",
				".rt": "text/richtext",
				".rt": "text/vnd.rn-realtext",
				".rtf": "application/rtf",
				".rtf": "application/x-rtf",
				".rtf": "text/richtext",
				".rtx": "application/rtf",
				".rtx": "text/richtext",
				".rv": "video/vnd.rn-realvideo",
				".s": "text/x-asm",
				".s3m": "audio/s3m",
				".saveme": "aapplication/octet-stream",
				".sbk": "application/x-tbook",
				".scm": "application/x-lotusscreencam",
				".scm": "text/x-script.guile",
				".scm": "text/x-script.scheme",
				".scm": "video/x-scm",
				".sdml": "text/plain",
				".sdp": "application/sdp",
				".sdp": "application/x-sdp",
				".sdr": "application/sounder",
				".sea": "application/sea",
				".sea": "application/x-sea",
				".set": "application/set",
				".sgm": "text/sgml",
				".sgm": "text/x-sgml",
				".sgml": "text/sgml",
				".sgml": "text/x-sgml",
				".sh": "application/x-bsh",
				".sh": "application/x-sh",
				".sh": "application/x-shar",
				".sh": "text/x-script.sh",
				".shar": "application/x-bsh",
				".shar": "application/x-shar",
				".shtml": "text/html",
				".shtml": "text/x-server-parsed-html",
				".sid": "audio/x-psid",
				".sit": "application/x-sit",
				".sit": "application/x-stuffit",
				".skd": "application/x-koan",
				".skm": "application/x-koan",
				".skp": "application/x-koan",
				".skt": "application/x-koan",
				".sl": "application/x-seelogo",
				".smi": "application/smil",
				".smil": "application/smil",
				".snd": "audio/basic",
				".snd": "audio/x-adpcm",
				".sol": "application/solids",
				".spc": "application/x-pkcs7-certificates",
				".spc": "text/x-speech",
				".spl": "application/futuresplash",
				".spr": "application/x-sprite",
				".sprite": "application/x-sprite",
				".src": "application/x-wais-source",
				".ssi": "text/x-server-parsed-html",
				".ssm": "application/streamingmedia",
				".sst": "application/vnd.ms-pki.certstore",
				".step": "application/step",
				".stl": "application/sla",
				".stl": "application/vnd.ms-pki.stl",
				".stl": "application/x-navistyle",
				".stp": "application/step",
				".sv4cpio": "application/x-sv4cpio",
				".sv4crc": "application/x-sv4crc",
				".svf": "image/vnd.dwg",
				".svf": "image/x-dwg",
				".svr": "application/x-world",
				".svr": "x-world/x-svr",
				".swf": "application/x-shockwave-flash",
				".t": "application/x-troff",
				".talk": "text/x-speech",
				".tar": "application/x-tar",
				".tbk": "application/toolbook",
				".tbk": "application/x-tbook",
				".tcl": "application/x-tcl",
				".tcl": "text/x-script.tcl",
				".tcsh": "text/x-script.tcsh",
				".tex": "application/x-tex",
				".texi": "application/x-texinfo",
				".texinfo": "lication/x-texinfo",
				".text": "application/plain",
				".text": "text/plain",
				".tgz": "application/gnutar",
				".tgz": "application/x-compressed",
				".tif": "image/tiff",
				".tif": "image/x-tiff",
				".tiff": "image/tiff",
				".tiff": "image/x-tiff",
				".tr": "application/x-troff",
				".tsi": "audio/tsp-audio",
				".tsp": "application/dsptype",
				".tsp": "audio/tsplayer",
				".tsv": "text/tab-separated-values",
				".turbot": "image/florian",
				".txt": "text/plain",
				".uil": "text/x-uil",
				".uni": "text/uri-list",
				".unis": "text/uri-list",
				".unv": "application/i-deas",
				".uri": "text/uri-list",
				".uris": "text/uri-list",
				".ustar": "application/x-ustar",
				".ustar": "multipart/x-ustar",
				".uu": "application/octet-stream",
				".uu": "text/x-uuencode",
				".uue": "text/x-uuencode",
				".vcd": "application/x-cdlink",
				".vcs": "text/x-vcalendar",
				".vda": "application/vda",
				".vdo": "video/vdo",
				".vew": "application/groupwise",
				".viv": "video/vivo",
				".viv": "video/vnd.vivo",
				".vivo": "video/vivo",
				".vivo": "video/vnd.vivo",
				".vmd": "application/vocaltec-media-desc",
				".vmf": "application/vocaltec-media-file",
				".voc": "audio/voc",
				".voc": "audio/x-voc",
				".vos": "video/vosaic",
				".vox": "audio/voxware",
				".vqe": "audio/x-twinvq-plugin",
				".vqf": "audio/x-twinvq",
				".vql": "audio/x-twinvq-plugin",
				".vrml": "application/x-vrml",
				".vrml": "model/vrml",
				".vrml": "x-world/x-vrml",
				".vrt": "x-world/x-vrt",
				".vsd": "application/x-visio",
				".vst": "application/x-visio",
				".vsw": "application/x-visio",
				".w60": "application/wordperfect6.0",
				".w61": "application/wordperfect6.1",
				".w6w": "application/msword",
				".wav": "audio/wav",
				".wav": "audio/x-wav",
				".wb1": "application/x-qpro",
				".wbmp": "image/vnd.wap.wbmp",
				".web": "application/vnd.xara",
				".wiz": "application/msword",
				".wk1": "application/x-123",
				".wmf": "windows/metafile",
				".wml": "text/vnd.wap.wml",
				".wmlc": "application/vnd.wap.wmlc",
				".wmls": "text/vnd.wap.wmlscript",
				".wmlsc": "application/vnd.wap.wmlscriptc",
				".word": "application/msword",
				".wp": "application/wordperfect",
				".wp5": "application/wordperfect",
				".wp5": "application/wordperfect6.0",
				".wp6": "application/wordperfect",
				".wpd": "application/wordperfect",
				".wpd": "application/x-wpwin",
				".wq1": "application/x-lotus",
				".wri": "application/mswrite",
				".wri": "application/x-wri",
				".wrl": "application/x-world",
				".wrl": "model/vrml",
				".wrl": "x-world/x-vrml",
				".wrz": "model/vrml",
				".wrz": "x-world/x-vrml",
				".wsc": "text/scriplet",
				".wsrc": "application/x-wais-source",
				".wtk": "application/x-wintalk",
				".xbm": "image/x-xbitmap",
				".xbm": "image/x-xbm",
				".xbm": "image/xbm",
				".xdr": "video/x-amt-demorun",
				".xgz": "xgl/drawing",
				".xif": "image/vnd.xiff",
				".xl": "application/excel",
				".xla": "application/excel",
				".xla": "application/x-excel",
				".xla": "application/x-msexcel",
				".xlb": "application/excel",
				".xlb": "application/vnd.ms-excel",
				".xlb": "application/x-excel",
				".xlc": "application/excel",
				".xlc": "application/vnd.ms-excel",
				".xlc": "application/x-excel",
				".xld": "application/excel",
				".xld": "application/x-excel",
				".xlk": "application/excel",
				".xlk": "application/x-excel",
				".xll": "application/excel",
				".xll": "application/vnd.ms-excel",
				".xll": "application/x-excel",
				".xlm": "application/excel",
				".xlm": "application/vnd.ms-excel",
				".xlm": "application/x-excel",
				".xls": "application/excel",
				".xls": "application/vnd.ms-excel",
				".xls": "application/x-excel",
				".xls": "application/x-msexcel",
				".xlt": "application/excel",
				".xlt": "application/x-excel",
				".xlv": "application/excel",
				".xlv": "application/x-excel",
				".xlw": "application/excel",
				".xlw": "application/vnd.ms-excel",
				".xlw": "application/x-excel",
				".xlw": "application/x-msexcel",
				".xm": "audio/xm",
				".xml": "application/xml",
				".xml": "text/xml",
				".xmz": "xgl/movie",
				".xpix": "application/x-vnd.ls-xpix",
				".xpm": "image/x-xpixmap",
				".xpm": "image/xpm",
				".x-png": "image/png",
				".xsr": "video/x-amt-showrun",
				".xwd": "image/x-xwd",
				".xwd": "image/x-xwindowdump",
				".xyz": "chemical/x-pdb",
				".z": "application/x-compress",
				".z": "application/x-compressed",
				".zip": "application/x-compressed",
				".zip": "application/x-zip-compressed",
				".zip": "application/zip",
				".zip": "multipart/x-zip",
				".zoo": "application/octet-stream",
			},
			i = "." + $Brid.Util.getExtension(e);
		return t.hasOwnProperty(i) ? t[i] : "";
	},
	getExtension: function (e) {
		return debug.log("$Brid.Util.getExtension()", e), e.split(".").pop();
	},
	makeid: function (e) {
		return debug.log("$Brid.Util.makeid()"), null == e && (e = 5), Math.random().toString(36).substr(2, e);
	},
	center: function (e, t) {
		debug.log("$Brid.Util.center()"),
			jQuery(e).css({
				position: "absolute",
				left: (jQuery(t).width() - jQuery(e).outerWidth()) / 2,
				top: (jQuery(t).height() - jQuery(e).outerHeight()) / 2,
			});
	},
	isMobileDevice: function (e) {
		return debug.log("$Brid.Util.isMobileDevice()", e), void 0 === e ? jQuery.browser.mobile : "ios" == e ? navigator.userAgent.match(/iPhone|iPad|iPod/i) : jQuery.browser.mobile;
	},
	isEmailValid: function (e) {
		return debug.log("$Brid.Util.isEmailValid()", e), new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e);
	},
	isFileUrl: function (e) {
		return debug.error("$Brid.Util.isFileUrl() Possible redudant method @see $Brid.Util.isUrl VS $Brid.Util.isFileUrl", e), new RegExp("(http|ftp|https)://[a-z0-9-_]+(.[a-z0-9-_]+)+(.[a-z]{2,4})+/[a-z0-9-_/]+(.[a-z]{2,4})", "i").test(e);
	},
	isUrl: function (url) {
		debug.log("$Brid.Util.isUrl()", url);
		//var regex = new RegExp("((http|https|ftp|rtmp):)?\/\/(www\.)?([a-z0-9\-_\.])+\.([a-z]{2,6})\/(.)*", "i");
		//In search of the perfect URL validation regex: https://mathiasbynens.be/demo/url-regex
		//alert('a');
		var regex = new RegExp(
			"^" +
				// protocol identifier
				//"(?:(?:https?|ftp)://)" + //fixed by losmi to allow url without protocol
				"(?:(((?:https?|ftp):)?)//)" +
				// user:pass authentication
				"(?:\\S+(?::\\S*)?@)?" +
				"(?:" +
				// IP address exclusion
				// private & local networks
				"(?!(?:10|127)(?:\\.\\d{1,3}){3})" +
				"(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})" +
				"(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})" +
				// IP address dotted notation octets
				// excludes loopback network 0.0.0.0
				// excludes reserved space >= 224.0.0.0
				// excludes network & broacast addresses
				// (first & last IP address of each class)
				"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])" +
				"(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}" +
				"(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))" +
				"|" +
				// host name
				"(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)" +
				// domain name
				"(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*" +
				// TLD identifier
				"(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))" +
				// TLD may end with dot
				"\\.?" +
				")" +
				// port number
				"(?::\\d{2,5})?" +
				// resource path
				"(?:[/?#]\\S*)?" +
				"$",
			"i"
		);
		debug.log("$Brid.Util.isUrl()", regex.test(url));
		return regex.test(url);
	},
	checkExtension: function (e, t) {
		if ((debug.log("$Brid.Util.checkExtension()", e, t), null == t)) throw new ArgumentException('"allowedExtensions" second argument is missing.');
		var i = e.substr(e.lastIndexOf(".") + 1, 4);
		return (i = i.replace("?", "").replace("#", "")), jQuery.inArray(i.toLowerCase(), t) > -1 || (debug.log("$Brid.Util.isFileUrl()", "Bad extension: ", i), !1);
	},
	onlyNumbers: function (e) {
		if ((e.which < 48 || e.which > 57) && 37 != e.which && 8 != e.which && 0 != e.which) return debug.log(e.which), !1;
	},
	clickUrl: function (e) {
		null != jQuery(this).attr("data-target") ? window.open(jQuery(this).attr("data-href")) : (window.location = jQuery(this).attr("data-href"));
	},
	openDialog: function (e, t) {
		debug.log("$Brid.Util.openDialog", e);
		var i = "";
		null != t && (i += "<h2>" + t + "</h2>"),
			(i += "<p>" + e + "</p>"),
			modal.open({
				content: i,
			});
	},
	closeModalBox: function () {
		if (typeof modal == "object" && typeof modal.close == "function") {
			modal.close();
		}
	},
	isUrlString: function (e) {
		return debug.log("$Brid.Util.isUrlString()", e), e.match(/^((https?|ftp|rtmp):\/\/|(www|ftp)\.)[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+([\/?].*)?$/);
	},
	isYoutubeUrl: function (e) {
		return debug.log("$Brid.Util.isYoutubeUrl()", e), e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/);
	},
	isStreamingUrl: function (e) {
		return debug.log("$Brid.Util.isStreamingUrl()", e, this.allowedStreamingExtensions), $Brid.Util.checkExtension(e, this.allowedStreamingExtensions) || ($Brid.Util.isUrl(e) && null != e.match(/^rtmp:\/\//));
	},
	confirm: function (conf) {
		var config = {
			text: "Are you sure?",
			title: "Alert warrning",
			yesFunction: null,
			yesClass: "confirmYes",
			yesNamespace: "LeaveConfirm",
			cancelFunction: $Brid.Callbacks.cancel,
			cancelClass: "confirmNo",
			cancelNamespace: "LeaveCancel",
		};

		config = jQuery.extend(true, config, conf);

		//'Leaving this page will interrupt all your current uploads.<br/>Are you sure you want to leave the page?
		$Brid.Util.openDialog(config.text + '<p style="text-align:center"><button class="radius secondary ' + config.yesClass + '" style="margin-right:1rem">Yes</button><button class="radius ' + config.cancelClass + '">No</button></p>', config.title);

		if (config.yesFunction) {
			jQuery("." + config.yesClass)
				.off("click." + config.yesNamespace)
				.on("click." + config.yesNamespace, config.yesFunction);
		}

		jQuery("." + config.cancelClass)
			.off("click." + config.cancelNamespace)
			.on("click." + config.cancelNamespace, config.cancelFunction);
	},
};
$Brid.Util = jQuery.extend(!0, {}, Util);
var Uploader = {
	script_path: "/videos/",
	filename: null,
	oldfile: null,
	filesize: 0,
	start_counter: 0,
	maxStartNumber: 15,
	sid: "",
	s3uploads: !1,
	uploadForm: null,
	action: "",
	uploadButton: null,
	uploadMsg: "",
	upload: null,
	uploadLimit: "100MB",
	uploadFriendlyLimit: "100MB",
	s3uploads: !1,
	canceled: !1,
	errorRetrieve: 0,
	emptyResponseRetrieve: 0,
	uploadInputTemplate: '<input name="userfile" id="userfile" type="file"/>',
	extension: "",
	allowedExtensions: "mp4,mov,qt,flv,f4v,wmv,asf,mpg,vob,m2v,mp2,m4v,avi,webm,ogv,ogg,mxf,mts,mkv,r3d,rm,flac,mj2,mpeg,mp3,wav",
	Progress: {
		element: null,
		start: '<div id="prog_c1" style="display:none;"><div id="uploadStatus">Starting upload...</div></div>',
	},
	wpMode: "",
	Exception: function (e) {
		(this.name = "UploadException"), (this.message = e), (this.stack = new Error().stack), ($_this = this);
	},
	convertSize: function (e) {
		return 1e3 * parseInt(e.replace("MB", "")) * 1e3;
	},
	convertSizeFriendly: function (e) {
		var t = parseInt(e.replace("MB", ""));
		return t >= 1e3 ? parseInt(t / 1e3) + "GB" : t < 1e3 ? t + "MB" : e;
	},
	init: function (e) {
		if (jQuery("#upload").length > 0) {
			null != uploadUrl && -1 == this.script_path.indexOf(uploadUrl) && (this.script_path = uploadUrl + this.script_path), (Uploader.Exception.prototype = new Error());
			var t = null != e && null != e.uploadLimit ? e.uploadLimit : this.uploadLimit;
			null != e.mode && null != e.mode && (this.wpMode = e.mode),
				debug.log("$Brid.Uploader.init()", "Initialize Uploader Object."),
				(this.uploadLimit = this.convertSize(t)),
				(this.uploadFriendlyLimit = this.convertSizeFriendly(t)),
				(this.uploadForm = jQuery("#upload")),
				this.uploadForm.attr("action", "https://upload.encoding.com/upload"),
				(this.action = this.uploadForm.attr("action")),
				(this.Progress.element = jQuery("#progress")),
				(this.uploadButton = jQuery("#userfileButton")),
				(this.uploadMsg = jQuery("#uploadMsg")),
				jQuery("#uploadInputHide").html(this.uploadInputTemplate).css({
					height: "280px",
				}),
				(this.upload = jQuery("#userfile")),
				(this.uploadCloseBtn = jQuery("#uploadCloseBtn"));
			var i = this;
			i.resetFields(),
				i.uploadCloseBtn.off("click.Upload"),
				i.uploadCloseBtn.on("click.Upload", function () {
					debug.log("$Brid.Uploader.init()", "uploadCloseBtn CLick"), i.cancel();
				}),
				i.upload.off("change.Upload"),
				i.upload.on("change.Upload", i.filechange),
				jQuery("#uploadInputHide").hover(
					function () {
						jQuery("#userfileButton").addClass("userfileButtonHover");
					},
					function () {
						jQuery("#userfileButton").removeClass("userfileButtonHover");
					}
				);
		} else debug.log("Calling Brid.Uploader.init() and there is no upload form available on this page.");
	},
	getInstance: function () {
		return this;
	},
	resetFields: function () {
		jQuery("#uid").val(""), jQuery("#sid").val(""), jQuery("#bridTimestamp").val(""), jQuery("#signature").val(""), jQuery("#progress").html("");
	},
	getFileName: function () {
		var e = this.upload.val();
		return 1 == e.indexOf(":\\") && (e = e.split(":").pop().split("\\").pop()), e;
	},
	errorCallback: function (e) {
		canLeave = true;
		try {
			throw (debug.error("$Brid.Uploader.errorCallback()", e), new Uploader.Exception(e));
		} catch (e) {
			debug.error(e), $Brid.Util.openDialog(e.message, "Upload error, please reupload."), jQuery("#progress").html(), jQuery("#userfileButton").show(), $Brid.init(["Html.Uploader"]);
		}
	},
	filechange: function (e) {
		try {
			debug.group("UPLOADER"), debug.log("$Brid.Uploader.filechange()", e, this.files);
			var t = $Brid.Html.Uploader.getInstance();
			if (((t.oldfile = this.filename), (t.filename = t.getFileName()), (t.extension = t.filename.split(".").pop().toLowerCase()), (t.fileSize = this.files[0].size), -1 == jQuery.inArray(t.extension, t.allowedExtensions.split(",")))) throw new Uploader.Exception("File selected is not has not valid extension.<br/>Supported extensions are:<br/>" + t.allowedExtensions);
			if (null != this.files[0] && this.files[0].size > t.uploadLimit) throw new Uploader.Exception("Maximum upload filesize limit is " + t.uploadLimitFriendly + ".");
			if ("" == t.filename) throw new Uploader.Exception("Please select a file first.");
			if (t.upload.val() == t.oldfile || "" == t.upload.val()) throw new Uploader.Exception("File selected is same as old file. Please select a different file to upload.");
			jQuery("#VideoUploadInProgress").val(1),
				jQuery
					.ajax({
						url: t.script_path + "signer/.json",
						type: "GET",
					})
					.done(function (e) {
						"object" == typeof e && null != e.sid
							? (debug.log("$Brid.Uploader.filechange()", "response", e),
							  jQuery("#sid").val(e.sid),
							  jQuery("#uid").val(e.uid),
							  jQuery("#bridTimestamp").val(e.timestamp),
							  jQuery("#signature").val(e.signature),
							  (t.sid = e.sid),
							  t.uploadForm.attr("action", t.action + "?X-Progress-ID=" + e.sid),
							  (window.onbeforeunload = function (e) {
									return "YOUR UPLOAD WILL BE CANCELED IF YOU LEAVE THIS PAGE NOW.";
							  }),
							  debug.log("$Brid.Uploader.filechange()", "Call start"))
							: t.errorCallback.call(t, "Response is not an object type");
					})
					.fail(function (e, i, a) {
						debug.error("$Brid.Html.Uploader.filechange()", "Response failed:", e.responseText, i, "errorThrown:", a), t.failCallback.call(t, e, i, a);
					});
		} catch (e) {
			debug.error(e), $Brid.Util.openDialog(e.message, "input error");
		}
	},
	cancel: function () {
		debug.log("$Brid.Html.Uploader.cancel()"), (this.canceled = !0), this.uploadMsg.length > 0 && this.uploadMsg.html("Canceling upload...");
		var e = jQuery("#VideoId").val();
		if ("" != e) {
			debug.log("Delete video :" + e + " on upload canceled.");
			var t = {
				controller: "videos",
				action: "delete",
				data: "data[Video][ids]=" + e,
			};
			$Brid.Ajax.update(t);
		}
	},
	reset: function () {
		debug.log("$Brid.Html.Uploader.reset()"),
			jQuery("#VideoUploadInProgress").length > 0 && 1 == jQuery("#VideoUploadInProgress").val() && ($Brid.stopTimeout("Uploader.progress"), jQuery("#VideoUploadInProgress").val(0)),
			(window.onbeforeunload = null),
			jQuery("#uid").val(""),
			jQuery("#sid").val(""),
			jQuery("#bridTimestamp").val(""),
			jQuery("#signature").val(""),
			this.Progress.element.html(""),
			this.uploadMsg.html(""),
			(this.filename = null),
			(this.filesize = 0),
			(this.oldfile = null),
			(this.start_counter = 15),
			(this.s3uploads = !1),
			(this.canceled = !1),
			(this.extension = ""),
			"quick" == this.wpMode
				? $Brid.Html.PostVideo.callAjax("uploadVideoPost", jQuery('<a href="#" data-id="uploadVideoPost" class="media-menu-item">Upload Video</a>'))
				: $Brid.Api.call({
						data: {
							action: "uploadVideo",
						},
						callback: {
							after: {
								name: "insertContentVideos",
								obj: jQuery("#Videos-content"),
							},
						},
				  });
	},
	start: function () {
		debug.log("$Brid.Uploader.start()");
		var self = this;
		jQuery("#uploadButtonDiv").fadeOut(300, function () {
			jQuery(".fetchWarring").hide(),
				jQuery("#fetchDiv").hide(),
				self.Progress.element.html(self.Progress.start),
				jQuery("#prog_c1").fadeIn(),
				jQuery("#uploadCloseBtn").fadeIn(),
				jQuery("#uploadInputHide").css({
					height: "0px",
				}),
				self.uploadMsg.html("PLEASE DO NOT LEAVE THIS PAGE BEFORE UPLOAD IS COMPLETE.").fadeIn(),
				jQuery(".form-table").fadeIn(),
				jQuery("#postUploadQuick").fadeIn();
		}),
			self.uploadForm.submit(),
			jQuery
				.ajax({
					url: self.script_path + "progress/" + self.sid,
					type: "GET",
				})
				.done(function (data) {
					var resp = eval("(" + data + ")");
					"object" == typeof resp && "error" != resp.state ? (jQuery("#VideoProgressSignature").val(self.sid), debug.log("$Brid.Uploader.start()", "response", resp), debug.log("$Brid.Uploader.start()", "Run call"), self.run()) : (debug.error("$Brid.Uploader.start()", resp, data), self.errorCallback.call(self, "Response is not an object type. Error:(1)"));
				})
				.fail(function (e, t, i) {
					debug.error("$Brid.Html.Uploader.start()", "Response failed:", e.responseText, t, "errorThrown:", i), self.failCallback.call(self, e, t, i);
				});
	},
	updateStatus: function () {
		var e = this,
			t = 0,
			i = 0,
			a = 0,
			s = jQuery("#userfile").width();
		if ("uploading" == e.response.state) {
			(t = e.response.received), (i = e.response.size);
			var r = (s * (a = Math.round(Number(e.response.received) / (Number(e.response.size) / 100)))) / 100;
			if ((debug.log("------------FileUploader.callback", t, i, a), jQuery("#prog_c2").length > 0)) {
				var o = parseInt(jQuery("#prog_c2").width());
				jQuery("#prog_c2").animate(
					{
						width: "+=" + (r - o),
					},
					300,
					function () {
						jQuery("#uploadStatus").html(a + "%");
					}
				);
			} else
				jQuery("#uploadStatus").remove(),
					jQuery("#prog_c1").html('<div id="prog_c2" style="width:0px;display:block;"></div><div id="uploadStatus">0%</div>'),
					jQuery("#prog_c2").animate(
						{
							width: "+=" + r,
						},
						400,
						function () {
							jQuery("#uploadStatus").html(a + "%");
						}
					);
		}
		"done" == e.response.state &&
			("" == e.error_message || void 0 === e.error_message
				? "100%" != jQuery("#uploadStatus").html() &&
				  jQuery("#prog_c2").animate(
						{
							width: s,
						},
						300,
						function () {
							jQuery("#uploadStatus").html("100%");
						}
				  )
				: e.Progress.element.html("An error occurred: " + e.error_message));
	},
	run: function () {
		debug.log("$Brid.Uploader.run()");
		var self = this,
			act = self.s3uploads ? "progress/" + self.sid + "/s3uploading/" : "progress/" + self.sid,
			url = self.script_path + act;
		if (self.canceled) return self.reset(), !1;
		jQuery
			.ajax({
				url: url,
				type: "GET",
			})
			.done(function (resp) {
				if (self.canceled) return self.reset(), !1;
				if ("" != resp || "" != resp.responseText) {
					var response = eval("(" + resp + ")");
					switch (((self.response = response), null != response.size && 0 == self.filesize && (self.filesize = response.size), "object" != typeof response && self.errorCallback.call(self, "Error:(run):Response is not an object."), void 0 === response.state && self.errorCallback.call(self, 'Error:(run): Response "state" is undefined.'), debug.log("Upload.run", response, response.state), response.state)) {
						case "error":
							if (self.canceled) return self.reset(), !1;
							self.errorCallback.call(self, "Error:(run), Response returned error status:" + response.status);
							break;
						case "starting":
							self.start_counter++,
								$Brid.stopTimeout("Uploader.progress"),
								($Brid.timeout["Uploader.progress"] = setTimeout(function () {
									self.run.call(self);
								}, 2e3)),
								self.start_counter == self.maxStartNumber && ($Brid.stopTimeout("Uploader.progress"), (self.start_counter = 0), self.errorCallback.call(self, "Error:(run), Start counter reached max 15 start counts." + resp.responseText));
							break;
						case "done":
							self.s3uploads
								? self.finish()
								: (debug.log("Upload.run enter s3Upload"),
								  (self.s3uploads = !0),
								  $Brid.stopTimeout("Uploader.progress"),
								  ($Brid.timeout["Uploader.progress"] = setTimeout(function () {
										self.run.call(self);
								  }, 2e3)));
							break;
						default:
							$Brid.stopTimeout("Uploader.progress"),
								($Brid.timeout["Uploader.progress"] = setTimeout(function () {
									self.run.call(self);
								}, 2e3));
					}
					self.updateStatus.call(self);
				} else
					self.emptyResponseRetrieve >= 10 &&
						(self.emptyResponseRetrieve++,
						debug.log("Response was empty, retry:", self.emptyResponseRetrieve),
						$Brid.stopTimeout("Uploader.progress"),
						($Brid.timeout["Uploader.progress"] = setTimeout(function () {
							self.run.call(self);
						}, 2e3)));
			})
			.fail(function (e, t, i) {
				debug.error("$Brid.Html.Uploader.run()", "Response failed:", e.responseText, t, "errorThrown:", i),
					self.errorRetrieve <= 15
						? (self.errorRetrieve++,
						  debug.log("Response failed, retry:", self.errorRetrieve),
						  $Brid.stopTimeout("Uploader.progress"),
						  ($Brid.timeout["Uploader.progress"] = setTimeout(function () {
								self.run.call(self);
						  }, 2e3)))
						: self.failCallback.call(self, e, t, i);
			});
	},
	failCallback: function (e, t, i) {
		if ((debug.error("$Brid.Html.Uploader.failCallback()", "Response failed:", e.responseText, t, "errorThrown:", i), "object" == typeof e.responseText)) {
			var a = jQuery.parseJSON(e.responseText);
			null != a.message &&
				$Brid.Html.FlashMessage.show({
					msg: a.message,
					status: !1,
				});
		}
	},
	finish: function () {
		debug.log("$Brid.Uploader.finish()");
		var self = this;
		if (self.canceled) return self.reset(), !1;
		jQuery
			.ajax({
				url: self.script_path + "progress/" + self.sid + "/filename/",
				type: "GET",
			})
			.done(function (resp) {
				var response = eval("(" + resp + ")");
				(self.patch_to_file = response.filename), (self.patch_to_minfo = response.mediainfo), (self.error_message = response.error), (self.s3uploads = !1), ("" != response.error && void 0 !== response.error) || (jQuery("#VideoUploadInProgress").val(0), self.uploadCloseBtn.hide(), jQuery("#VideoOriginalFilename").val(self.patch_to_file), jQuery("#VideoXmlUrl").val(self.patch_to_minfo), jQuery("#VideoUploadSourceUrl").val(self.patch_to_file), jQuery("#VideoOriginalFileSize").val(self.filesize), jQuery("#VideoMp4").val(self.patch_to_file), "" == jQuery("#VideoName").val() && (jQuery("#VideoName").val(self.filename.slice(0, -4)), jQuery("#default-value-VideoName").hide()), jQuery(self.uploadMsg).html("File uploaded successfully."), /*jQuery("#UploaderForm").delay(3e3).fadeOut(),*/ self.startEncoding(), (window.onbeforeunload = null), this.canceled || enableSave());
			})
			.fail(function (e, t, i) {
				debug.error("$Brid.Html.Uploader.finish()", "Response failed:", e.responseText, t, "errorThrown:", i), self.failCallback.call(self, e, t, i);
			});
	},
	startEncoding: function () {
		debug.log("$Brid.Uploader.startEncoding()");
		var e = jQuery("#VideoId").val(),
			t = this;
		if (t.canceled) return t.reset(), !1;
		if ("" == e || jQuery("#videoSaveAdd").hasClass("inprogress")) enableSave(), debug.groupEnd();
		else {
			debug.log("$Brid.Uploader.startEncoding()", "Start", "video id:" + e, t);
			var i = "";
			(i += "&data[Video][upload_source_url]=" + t.patch_to_file + "?nocopy"),
				(i += "&data[Video][original_file_name]=" + t.filename),
				(i += "&data[Video][upload_form]=1"),
				(i += "&data[Video][xml_url]=" + t.patch_to_minfo),
				jQuery
					.ajax({
						url: t.script_path + "encode/" + e + ".json",
						type: "POST",
						data: i,
					})
					.done(function (e) {
						debug.log("---------------Uploader.startEncoding", "response", e), enableSave(), debug.groupEnd();
					})
					.fail(function (e, i, a) {
						debug.error("$Brid.Html.Uploader.startEncoding()", "Response failed:", e.responseText, i, "errorThrown:", a), t.failCallback.call(t, e, i, a);
					});
		}
	},
};
$Brid.Html.Uploader = jQuery.extend(!0, {}, Uploader);
var BridUploader = {
	options: {
		maxFileSize: 5e5,
		maxFileSizeFriendly: "",
		allowedExtensions: ["mp4", "mov", "qt", "flv", "f4v", "wmv", "asf", "mpg", "vob", "m2v", "mp2", "m4v", "avi", "webm", "ogv", "ogg", "mxf", "mts", "mkv", "r3d", "rm", "flac", "mj2", "mpeg", "mp3", "wav"],
		bucket: "brid-video-upload",
		region: "us-west-2",
		reUpload: false,
	},
	getInstance: function () {
		return this;
	},
	canceled: !1,
	finished: !1,
	upload: null,
	params: null,
	success: null,
	error: null,
	button: null,
	file: null,
	progressCounter: 0,
	credentials: {},
	init: function (e) {
		debug.log("$Brid.Html.BridUpload.init()", "Init AWS Uploader."),
			(this.Exception.prototype = new Error()),
			(this.options = jQuery.extend(!0, this.options, e)),
			(this.options.maxFileSizeFriendly = this.options.uploadLimit),
			(this.options.maxFileSize = this.convertSize(this.options.uploadLimit)),
			debug.log("BridUploader options", this.options),
			(this.upload = jQuery("#userfile")),
			(this.credentials.region = this.options.region),
			(this.credentials.accessKeyId = this.options.accessKeyId),
			(this.credentials.secretAccessKey = this.options.secretAccessKey),
			(this.credentials.sessionToken = this.options.sessionToken),
			debug.log("BridUploader credentials", this.credentials),
			AWS.config.update(this.credentials),
			(this.Progress.element = jQuery("#progress")),
			(this.uploadMsg = jQuery("#uploadMsg")),
			this.upload.off("change.Upload"),
			this.upload.on("change.Upload", BridUploader.s3),
			(this.uploadCloseBtn = jQuery("#uploadCloseBtn")),
			this.uploadCloseBtn.off("click.Upload"),
			this.uploadCloseBtn.on("click.Upload", function () {
				debug.log("$Brid.Html.BridUploader.init()", "uploadCloseBtn click"), $Brid.Html.BridUploader.cancel();
				enableTabs();
			}),
			jQuery("#uploadInputHide").hover(
				function () {
					jQuery("#userfileButton").addClass("userfileButtonHover");
				},
				function () {
					jQuery("#userfileButton").removeClass("userfileButtonHover");
				}
			);
	},
	cancel: function () {
		debug.log("$Brid.Html.BridUploader.cancel()"), (this.canceled = !0), this.uploadMsg.length > 0 && this.uploadMsg.html("Canceling upload..."), console.log("this.bitbucketRequest", this.bitbucketRequest), this.bitbucketRequest && this.bitbucketRequest.abort();
	},
	Progress: {
		element: null,
		start: '<div id="prog_c1" style="display:none;"><div id="uploadStatus">Starting upload...</div></div>',
	},
	Exception: function (e) {
		(this.name = "UploadException"), (this.message = e), (this.stack = new Error().stack), ($_this = this);
	},
	getFileName: function () {
		var e = this.upload.val();
		return 1 == e.indexOf(":\\") && (e = e.split(":").pop().split("\\").pop()), e;
	},
	convertSize: function (e) {
		return 1e3 * parseInt(e.replace("MB", "")) * 1e3;
	},
	finish: function () {
		debug.log("Brid upload finish"), (this.finished = !0), jQuery("#videoSaveAdd").removeClass("disabled"), jQuery("#uploadCloseBtn").hide(), jQuery("#VideoUploadInProgress").val(0), jQuery("#VideoOriginalFileName").val(this.file.name), jQuery("#VideoUploadSourceUrl").val(this.file.uniqueName), jQuery("#VideoXmlUrl").val(this.file.uniqueName), jQuery("#VideoOriginalFileSize").val(this.file.size), "" == jQuery("#VideoName").val() && jQuery("#VideoName").val(this.file.name.slice(0, -4)), jQuery(self.uploadMsg).html("File uploaded successfully."), /*jQuery("#UploaderForm").delay(1e3).fadeOut(),*/ jQuery("#uploadTrack").delay(1e3).fadeOut(), this.canceled || enableSave(), (window.onbeforeunload = null);

		if (this.options.reUpload) {
			jQuery("#brid-id-upload_source_url").val(this.file.uniqueName);
			jQuery("#brid-id-re_upload").val(true);
			jQuery
				.ajax({
					url: ajaxurl,
					data: {
						action: "replaceVideo",
						id: jQuery("#brid-id-id").val(),
						mp4: this.file.uniqueName,
						original_filename: "",
						original_file_size: this.file.size,
						upload_source_url: this.file.uniqueName,
						xml_url: this.file.uniqueName,
					},
					type: "POST",
				})
				.done(function (t) {
					jQuery("#brid-subsection-replacevideo > div:first").html(t.message);
				})
				.fail(function (jqXHR, textStatus, errorThrown) {
					var data = jQuery.parseJSON(jqXHR.responseText);
					debug.log("Save FAIL response:", data, textStatus, errorThrown);
					$Brid.Html.FlashMessage.show({
						msg: data.name,
						status: false,
					});
				});
		}
	},
	s3: function () {
		debug.log("BridUploader s3");
		try {
			disableTabs();
			canLeave = false;

			var e = $Brid.Html.BridUploader.getInstance();
			if (
				((e.finished = !1),
				debug.log("self self self self", e),
				($Brid.Html.BridUploader.params = {
					Key: e.options.path,
					ACL: "public-read",
					StorageClass: "REDUCED_REDUNDANCY",
				}),
				(e.file = jQuery(this)[0].files[0]),
				(e.filename = e.getFileName()),
				(e.extension = e.filename.split(".").pop().toLowerCase()),
				(e.fileSize = e.file.size),
				debug.log("FILE FOR UPLOAD", e.file),
				debug.log("FILENAME", e.filename),
				debug.log("EXTENSION", e.extension),
				debug.log("FILE SIZE", e.fileSize),
				-1 == jQuery.inArray(e.extension, e.options.allowedExtensions))
			)
				throw new Uploader.Exception("The selected file does not have a valid video extension. <br/>Supported extensions include:<br/>" + e.options.allowedExtensions);
			if (null != jQuery(this)[0].files[0] && e.fileSize > e.options.maxFileSize) throw new Uploader.Exception("Maximum upload filesize limit is " + e.options.maxFileSizeFriendly + ".");
			if ("" == e.filename) throw new Uploader.Exception("Please select a file first.");
			jQuery("#VideoUploadInProgress").val(1), jQuery("#videoSaveAdd").addClass("disabled");
			var t = $Brid.Util.makeid(8) + "." + e.extension;
			(e.file.uniqueName = t), (e.params.Key += t);
			var i = $Brid.Util.getMimeByExt(t);
			"" != i && (e.params.ContentType = i),
				(e.options.filename = t),
				debug.log("s3", "file", e.file, "params", e.params, "options", e.options),
				(e.params.Body = e.file),
				jQuery("#uploadButtonDiv").fadeOut(300, function () {
					jQuery(".fetchWarring").hide(),
						jQuery("#fetchDiv").hide(),
						e.Progress.element.html(e.Progress.start),
						jQuery("#prog_c1").fadeIn(),
						jQuery("#uploadCloseBtn").fadeIn(),
						jQuery("#uploadInputHide").css({
							height: "0px",
						}),
						e.uploadMsg.html("PLEASE DO NOT LEAVE THIS PAGE BEFORE UPLOAD IS COMPLETE.").fadeIn(),
						jQuery(".form-table").fadeIn(),
						jQuery("#postUploadQuick").fadeIn();
				});
			var a = new AWS.S3({
				params: {
					Bucket: e.options.bucket,
				},
				useAccelerateEndpoint: !0,
				httpOptions: {
					timeout: 6e5,
				},
			});
			debug.log("bucket", a),
				(e.bitbucketRequest = a
					.upload(
						$Brid.Html.BridUploader.params,
						{
							queueSize: 1,
							partSize: 5242880,
						},
						function (e, t) {
							e ? ($Brid.Util.openDialog(e, "Upload error, please reload page and reupload."), (canLeave = true)) : $Brid.Html.BridUploader.finish();
						}
					)
					.on("httpUploadProgress", function (e) {
						$Brid.Html.BridUploader.progressCounter++, debug.log("this.progressCounter: ", $Brid.Html.BridUploader.progressCounter);
						var t = parseInt(jQuery("#uploadStatus").width());
						debug.log("------------FileUploader div width", t);
						var i = Math.round(Number(e.loaded) / (Number(e.total) / 100));
						if ($Brid.Html.BridUploader.progressCounter % 2 == 1 && 100 != i) return !1;
						var a = (t * i) / 100;
						if ((debug.log("------------FileUploader.callback", e.loaded, e.total, i, a), jQuery("#prog_c2").length > 0)) {
							var s = parseInt(jQuery("#prog_c2").width());
							debug.log("------------FileUploader.currentWidth", s, a),
								jQuery("#prog_c2").animate(
									{
										width: a,
									},
									100,
									function () {
										i > 55 && jQuery("#uploadStatus").css("color", "#fff"), jQuery("#uploadStatus").html(i + "%");
									}
								);
						} else
							jQuery("#uploadStatus").remove(),
								jQuery("#prog_c1").html('<div id="prog_c2" style="width:0px;display:block;"></div><div id="uploadStatus">0%</div>'),
								jQuery("#prog_c2").animate(
									{
										width: "+=" + a,
									},
									100,
									function () {
										i > 55 && jQuery("#uploadStatus").css("color", "#fff"), jQuery("#uploadStatus").html(i + "%");
									}
								);
					}));
		} catch (e) {
			enableTabs();
			debug.error(e), $Brid.Util.openDialog(e.message, "input error");
		}
	},
};
$Brid.Html.BridUploader = jQuery.extend(!0, {}, BridUploader);
var Fetch = {
	checkFetchUrl: function (e) {
		debug.log("$Brid.Fetch.checkFetchUrl()", e);
		var t = !1,
			i = $Brid.Html.Uploader.allowedExtensions.split(",");
		null != e && "object" != typeof e && (t = e), debug.log("$Brid.Fetch.checkFetchUrl()", typeof e, t);
		var a = jQuery("#goFetchUrl"),
			s = jQuery("#fetchUrl").val().trim();
		null === s.match(/^((http|https):\/\/)/) && null === s.match(/^(rtmp:\/\/)/) && (s = "http://" + s);
		try {
			if (a.hasClass("inprogress")) throw new ArgumentException("Fething video is in progress!");
			if (!$Brid.Util.isUrlString(s)) throw new ArgumentException("Video url is not valid!");
			if (!$Brid.Util.isYoutubeUrl(s) && !$Brid.Util.checkExtension(s, i) && !$Brid.Util.isStreamingUrl(s)) throw new ArgumentException("File selected is not has not valid extension.<br/>Supported extensions are:<br/>" + i);
			a.hasClass("disabled") && a.removeClass("disabled");
		} catch (e) {
			debug.error("$Brid.Html.Form.checkFetchUrl()", e), a.hasClass("disabled") || a.hasClass("inprogress") || a.addClass("disabled"), e instanceof ArgumentException && t && $Brid.Util.openDialog(e.message, "Input error");
		}
	},
	fetchUrl: function () {
		debug.log("$Brid.Fetch.fetchUrl()"), this.checkFetchUrl(!0);
		console.log("%c $Brid.Fetch.fetchUrl() ", "background: #000; color: #0f0; font-weight: bold;font-size: 12px");
		var e = jQuery("#goFetchUrl");
		if ((debug.log(e.hasClass("disabled")), !e.hasClass("disabled") && !e.hasClass("inprogress"))) {
			e.addClass("inprogress");
			var t = jQuery("#fetchUrl").val().trim();
			null === t.match(/^((http|https):\/\/)/) && null === t.match(/^(rtmp:\/\/)/) && (t = "http://" + t),
				$Brid.Util.isYoutubeUrl(t)
					? jQuery
							.ajax({
								url: ajaxurl,
								data: {
									videoUrl: t,
									action: "fetchVideo",
								},
								type: "POST",
								beforeSend: function () {
									$Brid.Html.FlashMessage.loading("In progress...");
								},
							})
							.done(function (t) {
								$Brid.Html.FlashMessage.show({
									msg: t.message,
									status: t.status,
								}),
									null != t.redirect &&
										$Brid.Api.call({
											data: $Brid.Util.getRedirectUrl(t.redirect),
											callback: {
												after: {
													name: "insertContentVideos",
													obj: jQuery("#Videos-content"),
												},
											},
										}),
									e.removeClass("inprogress");
							})
							.fail(function (e, t, i) {
								var a = jQuery.parseJSON(e.responseText);
								debug.error("$Brid.Util.fetchUrl()", "Response failed:", a, t, "errorThrown:", i);
								var s = null != a.message ? a.message : a.name;
								(null == s && "" == s) ||
									$Brid.Html.FlashMessage.show({
										msg: s,
										status: !1,
									});
							})
					: (jQuery("#UploaderForm").fadeOut(300, function () {
							jQuery(".fetchWarring").hide(),
								jQuery(".form-table").fadeIn(300, function () {
									($Brid.Html.BridUploader.finished = !0), $Brid.Util.isStreamingUrl(t) && jQuery("#streamingSnapshot").show();
								});
					  }),
					  jQuery("#VideoUploadSourceUrl").val(t),
					  jQuery("#VideoName").val("My video title"),
					  (amIEncoded = 0),
					  enableSave());
		}
	},
};
$Brid.Fetch = jQuery.extend(!0, {}, Fetch);
var Video = {
	allowedExtensions: ["webm", "ogg", "vp8", "mp4"],
	allowedVideoExtensions: ["webm", "ogg", "vp8", "mp4", "flv", "mpeg", "avi", "mk4", "mpg", "3gp", "m4v", "mkv", "mpe", "wmv"],
	autosave: function () {
		debug.log("$Brid.Video.autosave()"), jQuery("#videoSaveAdd").hasClass("inprogress") ? $Brid.Util.openDialog("Save error", "Save already in progress") : (jQuery("#autoSaving").show(), jQuery("#videoSaveAdd").addClass("inprogress"), save.save("VideoAddForm"), jQuery("#VideoAutosave").val(0));
	},
	getFfmpegInfo: function () {
		debug.log("$Brid.Video.getFfmpegInfo()");
		var e = jQuery("#VideoMp4").val(),
			t = this;
		if ((jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled"), "" != e && $Brid.Util.isUrl(e))) {
			if ($Brid.Util.isStreamingUrl(e)) return void this.enableSave();
			jQuery.ajax({
				url: ajaxurl,
				data: "url=" + e + "&action=ffmpegInfo",
				type: "POST",
				beforeSend: function () {
					debug.log("aaa source", "url=" + e + "&action=ffmpegInfo", "ajaxurl", ajaxurl), jQuery("#videoSaveAdd,#videoSaveEdit").hasClass("disabled") || jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled");
				},
				success: function (e) {
					if ((debug.log("aaa Received: ", e), "object" == typeof e && e.status && "object" == typeof e.data)) {
						var a = e.data;

						// Set codec value to AudioCodec, and this will be used if VideoCodec is missing
						var codec = a["AudioCodec"] || "";

						for (var s in a) {
							// If VideoCodec is present in response, this will override codec value
							if ("VideoCodec" == s) {
								codec = a[s];
								jQuery("#Video" + s).val(a[s]);
							}
						}
						debug.log(codec);
						jQuery.inArray(codec, ["h264", "webm", "vp8", "mp3"]) > -1 ? (debug.log(this), t.enableSave()) : ($Brid.Util.openDialog("Invalid codec type:" + codec, "Input error"), jQuery("#videoSaveAdd,#videoSaveEdit").hasClass("disabled") || jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled"));
					}
				},
			});
		}
	},
	enableSave: function (e) {
		debug.log("$Brid.Video.enableSave()");
		var t = parseInt(jQuery("#VideoAutosave").val());
		// Set Status message
		jQuery("#VideoStatus").text("Waiting...");

		return amIEncoded ? (debug.log("video.js", "enableSave ENCODING"), this.checkFieldsEncodedFile(e) ? (jQuery("#videoSaveAdd,#videoSaveEdit").removeClass("disabled"), t && this.autosave(), !0) : (jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled"), !1)) : (debug.log("video.js", "enableSave VIDEO URL"), this.checkFields(e) ? (jQuery("#videoSaveAdd,#videoSaveEdit").removeClass("disabled"), !0) : (jQuery("#videoSaveAdd,#videoSaveEdit").addClass("disabled"), !1));
	},
	checkFieldsEncodedFile: function (e) {
		debug.log("$Brid.Video.checkFieldsEncodedFile()"), (VideoName = jQuery("#VideoName").val());
		var t = jQuery("#VideoImage").val();
		if ("" == VideoName) return null != e && $Brid.Util.openDialog("Video title is required.", "Invalid input"), !1;
		if (!this.isCategorySelected()) return null != e && $Brid.Util.openDialog("Category is not selected.", "Input form error"), !1;
		if (null != t && "" != t) {
			if (!$Brid.Util.isUrl(t)) return null != e && $Brid.Util.openDialog("Snapshot Url must be valid URL format.", "Invalid input"), !1;
			if (!$Brid.Util.checkExtension(t, allowedImageExtensions)) return null != e && $Brid.Util.openDialog("Snapshot Url must have valid extension (e.g. " + allowedImageExtensions.join(",") + ").", "Invalid input"), !1;
		}
		var uploadInProgress = jQuery("#VideoUploadInProgress").val();
		if (uploadInProgress === "1") return false;
		return !0;
	},
	checkFields: function (displayDialog) {
		debug.log("$Brid.Video.checkFields()");
		var VideoMp4 = jQuery("#VideoMp4").val(),
			VideoName = jQuery("#VideoName").val(),
			VideoImage = jQuery("#VideoImage").val(),
			VideoHd = jQuery("#VideoMp4Hd").val();
		var VideoStreaming = jQuery("#VideoStreaming").val(),
			VideoStreamingOn = jQuery("#streaming_on").val();

		var VideoIphoneOgg = jQuery("#VideoOgg").val(),
			VideoIphoneAudio = jQuery("#VideoIphoneAudio").val();
		//Test Video Title
		if (VideoName == "") {
			if (displayDialog != undefined) $Brid.Util.openDialog("Video title is required.", "Invalid input");
			return false;
		}
		//check Iphone ogg
		if (VideoIphoneOgg != undefined && VideoIphoneOgg != "") {
			if (!$Brid.Util.isUrl(VideoIphoneOgg)) {
				if (displayDialog != undefined) $Brid.Util.openDialog("Ogg url must be valid URL format.", "Invalid input");
				return false;
			}
			if (!$Brid.Util.checkExtension(VideoIphoneOgg, ["ogg"])) {
				if (displayDialog != undefined) $Brid.Util.openDialog("Ogg url must have valid extension.", "Invalid input");
				return false;
			}
		}
		//Check iphone audio
		if (VideoIphoneAudio != undefined && VideoIphoneAudio != "") {
			if (!$Brid.Util.isUrl(VideoIphoneAudio)) {
				if (displayDialog != undefined) $Brid.Util.openDialog("Mp3 url for iphone inpage playback must be valid URL format.", "Invalid input");
				return false;
			}
			if (!$Brid.Util.checkExtension(VideoIphoneAudio, ["mp3"])) {
				if (displayDialog != undefined) $Brid.Util.openDialog("Mp3 url for iphone inpage playback must have valid extension.", "Invalid input");
				return false;
			}
		}
		//Test Vide Mp4 url
		if (VideoMp4 != undefined && VideoMp4 != "") {
			debug.log("$Brid.Video.checkFields() 1", $Brid.Video.allowedVideoExtensions);
			if (!$Brid.Util.isUrl(VideoMp4)) {
				if (displayDialog != undefined) $Brid.Util.openDialog("Mp4 or WebM url must be valid URL format.", "Invalid input");
				jQuery("#VideoMp4Hd").val("");
				//jQuery('#default-value-VideoMp4Hd').show();
				//Disable HD checkbox
				jQuery("#checkbox-mp4_hd_on").parent().addClass("disabledCheckbox");
				return false;
			} else if (!$Brid.Util.checkExtension(VideoMp4, $Brid.Video.allowedVideoExtensions) && !$Brid.Util.isStreamingUrl(VideoMp4) && !$Brid.Util.isTwitchUrl(VideoMp4)) {
				/**
				 * If video doesn't match allowed video format
				 * or isnt't streaming file
				 */
				//debug.log('djoka', $Brid.Util.allowedStreamingExtensions);
				if (displayDialog != undefined) {
					$Brid.Util.openDialog("We didn't recogineze a valid video file extension. <br/>(e.g. " + $Brid.Video.allowedVideoExtensions.join(",") + "," + $Brid.Util.allowedStreamingExtensions.join(",") + ').<br/><br/><b>Are you sure you want to continue?</b><p style="text-align:center"><button class="radius secondary continueSaveVideo" style="margin-right: 10px;">Yes</button><button class="radius cancelSaveVideo">No</button></p>', "Video source warrning");

					//cancelSaveVideo
					jQuery(".continueSaveVideo").on("click.continueSaveVideo", function () {
						jQuery(".saveButton").removeClass("disabled");
						$Brid.Util.closeModalBox();
						var formId = jQuery(document).find("form").attr("id");
						//alert(formId);
						save.save(formId);
					});
					jQuery(".cancelSaveVideo, #modalClose").on("click.LeaveUpload", function (e) {
						$Brid.Util.closeModalBox();
					});
				}
				//$Brid.Util.openDialog('Mp4 or WebM Url must have valid extension <br/>(e.g. '+$Brid.Video.allowedVideoExtensions.join(',')+','+$Brid.Util.allowedStreamingExtensions.join(',')+').', 'Invalid input');
				jQuery("#VideoMp4Hd").val("");

				jQuery("#default-value-VideoMp4Hd").show();
				//Disable HD checkbox
				jQuery("#checkbox-mp4_hd_on").parent().addClass("disabledCheckbox");
				return false;
			}

			//Enable HD checkbox
			if (!$Brid.Util.isStreamingUrl(VideoMp4)) {
				jQuery("#checkbox-mp4_hd_on").parent().removeClass("disabledCheckbox");
			} else {
				//Disable HD checkbox
				jQuery("#checkbox-mp4_hd_on").parent().addClass("disabledCheckbox");
			}
		}
		/*else{
                if(!jQuery('#VideoYtUpload').length || !jQuery('#VideoYtUpload').val().length){
                    if(displayDialog!=undefined)
                        $Brid.Util.openDialog('Mp4 or WebM Url is required.', 'Invalid input');
                        return false;
                }
            }*/

		//Snapshot if present
		if (VideoImage != undefined && VideoImage != "") {
			if (!$Brid.Util.isUrl(VideoImage)) {
				if (displayDialog != undefined) $Brid.Util.openDialog("Snapshot Url must be valid URL format.", "Invalid input");

				return false;
			} else if (!$Brid.Util.checkExtension(VideoImage, allowedImageExtensions)) {
				if (displayDialog != undefined) $Brid.Util.openDialog("Snapshot Url must have valid extension (e.g. " + allowedImageExtensions.join(",") + ").", "Invalid input");
				return false;
			}
		}
		//Hd link if present
		if (VideoHd != undefined && VideoHd != "") {
			if (!$Brid.Util.isUrl(VideoHd)) {
				if (displayDialog != undefined) $Brid.Util.openDialog("Mp4/WebM HD url must be valid URL format.", "Invlid input");
				return false;
			} else if (!$Brid.Util.checkExtension(VideoHd, $Brid.Video.allowedExtensions) && !$Brid.Util.isStreamingUrl(VideoHd)) {
				if (displayDialog != undefined) $Brid.Util.openDialog("Mp4/WebM HD url Url must have valid extension (e.g. " + $Brid.Video.allowedExtensions.join(",") + ").", "Invalid input");
				return false;
			}
		}
		//Check is category selected
		if (!this.isCategorySelected()) {
			if (displayDialog != undefined) $Brid.Util.openDialog("Category is not selected.", "Input form error");
			return false;
		}

		return true;
	},

	isCategorySelected: function () {
		//debug.log("$Brid.Video.isCategorySelected()"), debug.log("Ind: " + jQuery(".textButtonSmallJs").text().search("Select category")), debug.log('VAL: "' + jQuery(".textButtonSmallJs").text() + '"');
		//var e = "";
		//return e = "youtube" == defaultTab ? jQuery("#add-youtube-channel").find(".textButtonSmallJs").text() : "vimeo" == defaultTab ? jQuery("#add-vimeo-channel").find(".textButtonSmallJs").text() : jQuery(".textButtonSmallJs").text(), debug.log("Ind: " + e.search("Select category")), debug.log('VAL: "' + e + '"'), e.toLowerCase().search("select category") >= 0 ? (debug.log("Category is not selected."), !1) : (debug.log('Category selected: "' + jQuery(".textButtonSmallJs").text() + '"'), !0)

		return true;
	},
	checkAutosaveMessage: function () {
		debug.log("$Brid.Video.checkAutosaveMessage()");
		var e = jQuery("#autoSaving");
		e.length && "Saved" == e.html() && e.html("Some changes may have not been saved.");
	},
};

function handleImportantError(e, t) {
	if (null != e) {
		debug.error("error", e);
		var i = '<br/>Please report this "bug" to <a href="mailto:brid.dev@brid.tv&subject=Bug+Report&body=' + escape(t + e.message + e.stack) + '">Brid.tv Dev Team</a> and try to reload page.',
			a = [];
		a.push("<b>Message: </b>" + t), a.push("<b>Error Object Message:</b> " + e.message), a.push("<b>Error Object Stack: </b><p>" + e.stack.replace("\n", "<br/>").replace(/at /g, "<br/>") + "</p>"), a.push("<b>What to do?: </b>" + i), debug.error("handleImportantError", e, t), jQuery("#content").html(a.join("<br/>"));
	}
}
($Brid.Video = jQuery.extend(!0, {}, Video)),
	(function (e) {
		var t = {
			init: function (e, t) {
				return (
					debug.log("DROPDOWN INIT"),
					this.each(function () {
						var t = jQuery(this),
							i = t.data("dropdown");
						if (void 0 === i) {
							var a = {
								textColor: "#000",
								arrowImg: '<img alt="Click to open submenu" src="' + $BridWordpressConfig.pluginUrl + '/img/arrow_down.png" width="8" height="4" class="arrowDownJs">',
							};
							(i = jQuery.extend({}, a, e)), t.data("dropdown", i);
						} else i = jQuery.extend({}, i, e);
						var s = t.attr("data-css"),
							r = t.attr("data-options"),
							o = [],
							n = t.attr("data-method"),
							l = t.attr("data-callback-after");
						t.addClass("dropdown");
						var d = jQuery.parseJSON(s),
							c = jQuery('<div class="textButtonSmallJs" style="opacity: 1;"></div>').css("width", d.width).click($Brid.Html.GoogleCheckbox.toggleGMenu);
						if (null != r)
							for (var u in (r = jQuery.parseJSON(r))) {
								var h = jQuery('<div class="chkbox_action">' + r[u].name + "</div>");
								h.attr(r[u].attr), o.push(h);
							}
						t.find("option").each(function (e, a) {
							jQuery(a).is(":selected") && c.html(jQuery(a).text() + i.arrowImg),
								o.push(
									jQuery('<div class="chkbox_action">' + jQuery(a).text() + "</div>").click(function () {
										if ((jQuery(a).prop("selected", !0), t.val(jQuery(a).val()), null != n))
											try {
												$Brid.Util.executeCallback($Brid.Callbacks, n, t);
											} catch (e) {
												debug.error("Method (" + n + ") not defiend inside your $Brid.Callbacks object." + e.message, $Brid.Callbacks);
											}
										if ((c.html(jQuery(a).text() + i.arrowImg), $Brid.Html.GoogleCheckbox.hideGMenu(t), null != l))
											try {
												$Brid.Util.executeCallback($Brid.Callbacks, l, t);
											} catch (e) {
												debug.error("Method (" + l + ") not defiend inside your $Brid.Callbacks object." + e.message, $Brid.Callbacks);
											}
									})
								);
						});
						var p = jQuery('<div class="gdrop_down"></div>');
						null != s && ((s = jQuery.parseJSON(s)), p.css(s)),
							jQuery(o).each(function (e, t) {
								p.append(t);
							});
						var g = jQuery(c).add(p),
							f = jQuery('<div class="dropdown"></div>');
						t.parent().append(jQuery(f).append(g)), t.hide();
					})
				);
			},
			destroy: function (e) {
				return jQuery(this).each(function () {
					debug.log("Destroy dropdowns");
					var e = jQuery(this);
					e.removeData("dropdown");
					var t = e.next();
					t.hasClass("dropdown") && t.remove();
				});
			},
			val: function (e) {
				return this.eq(0).html();
			},
		};
		e.fn.dropdown = function () {
			var i = arguments[0];
			if (t[i]) (i = t[i]), (arguments = Array.prototype.slice.call(arguments, 1));
			else {
				if ("object" != typeof i && i) return e.error("Method " + i + " does not exist on jQuery.dropdown"), this;
				i = t.init;
			}
			return i.apply(this, arguments);
		};
	})(jQuery);
var modal = (function () {
		var e,
			t,
			i,
			a,
			s = {
				center: function () {
					var e, i;
					(e = Math.max(jQuery(window).height() - t.outerHeight(), 0) / 2),
						(i = Math.max(jQuery(window).width() - t.outerWidth(), 0) / 2),
						t.css({
							top: e + jQuery(window).scrollTop(),
							left: i + jQuery(window).scrollLeft(),
						});
				},
				open: function (a) {
					i.empty().append(a.content),
						t.css({
							width: a.width || "auto",
							height: a.height || "auto",
						}),
						s.center(),
						jQuery(window).bind("resize.modal", s.center),
						t.show(),
						e.show();
				},
				close: function () {
					t.hide(), e.hide(), i.empty(), jQuery(window).unbind("resize.modal");
				},
			};
		return (
			(e = jQuery('<div id="modalOverlay"></div>')),
			(t = jQuery('<div id="modalBox"></div>')),
			(i = jQuery('<div id="modalContent"></div>')),
			(a = jQuery('<a id="modalClose" href="#">close</a>')),
			t.hide(),
			e.hide(),
			t.append(i, a),
			jQuery(document).ready(function () {
				jQuery("body").append(e, t);
			}),
			e.click(function (e) {
				e.preventDefault(), s.close();
			}),
			a.click(function (e) {
				e.preventDefault(), s.close();
			}),
			s
		);
	})(),
	getFfmpegInfo = function () {
		return debug.log("Deprecated call: getFfmpegInfo"), $Brid.Video.getFfmpegInfo();
	};

function enableSave(e) {
	return debug.log("Deprecated call: enableSave"), $Brid.Video.enableSave(e);
}

function checkFieldsEncodedFile(e) {
	return debug.log("Deprecated call: checkFieldsEncodedFile"), $Brid.Video.checkFieldsEncodedFile(e);
}

function checkFields(e) {
	return debug.log("Deprecated call: checkFields"), $Brid.Video.checkFields(e);
}

function isCategorySelected() {
	return debug.log("Deprecated call: isCategorySelected"), $Brid.Video.isCategorySelected();
}
!(function (e, t, i, a) {
	var s = e(t);
	(e.fn.lazyload = function (i) {
		var r,
			o = this,
			n = {
				threshold: 0,
				failure_limit: 0,
				event: "scroll",
				effect: "show",
				container: t,
				data_attribute: "original",
				skip_invisible: !0,
				appear: null,
				load: null,
			};

		function l() {
			var t = 0;
			o.each(function () {
				var i = e(this);
				if (!n.skip_invisible || i.is(":visible"))
					if (e.abovethetop(this, n) || e.leftofbegin(this, n));
					else if (e.belowthefold(this, n) || e.rightoffold(this, n)) {
						if (++t > n.failure_limit) return !1;
					} else i.trigger("appear"), (t = 0);
			});
		}
		return (
			i && (a !== i.failurelimit && ((i.failure_limit = i.failurelimit), delete i.failurelimit), a !== i.effectspeed && ((i.effect_speed = i.effectspeed), delete i.effectspeed), e.extend(n, i)),
			(r = n.container === a || n.container === t ? s : e(n.container)),
			0 === n.event.indexOf("scroll") &&
				r.bind(n.event, function (e) {
					return l();
				}),
			this.each(function () {
				var t = this,
					i = e(t);
				(t.loaded = !1),
					i.one("appear", function () {
						if (!this.loaded) {
							if (n.appear) {
								var a = o.length;
								n.appear.call(t, a, n);
							}
							!(function (i) {
								i.hide().attr("src", i.data(n.data_attribute))[n.effect](n.effect_speed), (t.loaded = !0);
								var a = e.grep(o, function (e) {
									return !e.loaded;
								});
								if (((o = e(a)), n.load)) {
									var s = o.length;
									n.load.call(t, s, n);
								}
							})(i),
								i.data(n.data_attribute),
								e(t).error(function () {});
						}
					}),
					0 !== n.event.indexOf("scroll") &&
						i.bind(n.event, function (e) {
							t.loaded || i.trigger("appear");
						});
			}),
			s.bind("resize", function (e) {
				l();
			}),
			/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion) &&
				s.bind("pageshow", function (t) {
					t.originalEvent.persisted &&
						o.each(function () {
							e(this).trigger("appear");
						});
				}),
			l(),
			this
		);
	}),
		(e.belowthefold = function (i, r) {
			return (r.container === a || r.container === t ? s.height() + s.scrollTop() : e(r.container).offset().top + e(r.container).height()) <= e(i).offset().top - r.threshold;
		}),
		(e.rightoffold = function (i, r) {
			return (r.container === a || r.container === t ? s.width() + s.scrollLeft() : e(r.container).offset().left + e(r.container).width()) <= e(i).offset().left - r.threshold;
		}),
		(e.abovethetop = function (i, r) {
			return (r.container === a || r.container === t ? s.scrollTop() : e(r.container).offset().top) >= e(i).offset().top + r.threshold + e(i).height();
		}),
		(e.leftofbegin = function (i, r) {
			return (r.container === a || r.container === t ? s.scrollLeft() : e(r.container).offset().left) >= e(i).offset().left + r.threshold + e(i).width();
		}),
		(e.inviewport = function (t, i) {
			return !(e.rightoffold(t, i) || e.leftofbegin(t, i) || e.belowthefold(t, i) || e.abovethetop(t, i));
		}),
		e.extend(e.expr[":"], {
			"below-the-fold": function (t) {
				return e.belowthefold(t, {
					threshold: 0,
				});
			},
			"above-the-top": function (t) {
				return !e.belowthefold(t, {
					threshold: 0,
				});
			},
			"right-of-screen": function (t) {
				return e.rightoffold(t, {
					threshold: 0,
				});
			},
			"left-of-screen": function (t) {
				return !e.rightoffold(t, {
					threshold: 0,
				});
			},
			"in-viewport": function (t) {
				return e.inviewport(t, {
					threshold: 0,
				});
			},
			"above-the-fold": function (t) {
				return !e.belowthefold(t, {
					threshold: 0,
				});
			},
			"right-of-fold": function (t) {
				return e.rightoffold(t, {
					threshold: 0,
				});
			},
			"left-of-fold": function (t) {
				return !e.rightoffold(t, {
					threshold: 0,
				});
			},
		});
})(jQuery, window, document);
var getYoutube = function () {
	clearTimeout(typingTimer);
	var e = jQuery("#VideoYoutubeSearch").val(),
		t = jQuery("#youtubeContent"),
		i = "AIzaSyAE19zotZ3rQ4cFhMIrXa2mMDsmD9fd7Nw";
	if ((jQuery("#externalServiceLoading").hide(), e.length > 20)) {
		var a, s;
		if ((-1 !== e.indexOf("https://youtu.be") ? null != (s = (a = e.replace("https://youtu.be/", "")).split("?")) && s.length > 0 && (a = s[0]) : -1 !== e.indexOf("https://www.youtube.com") && null != (s = (a = e.split("v=")[1]).split("&")) && s.length > 0 && (a = s[0]), debug.log("video_id", a), null != a)) {
			var r = a.indexOf("&");
			e = -1 != r ? a.substring(0, r) : a;
			// var o = "https://www.googleapis.com/youtube/v3/videos?id=" + escape(e) + "&type=video&key=" + i + "&part=snippet&videoEmbeddable=true&maxResults=1&order=relevance"
			var o = "/wp-admin/admin-ajax.php?action=getInfoFromYoutubeDirect&id=" + escape(e);
		} // search disabled else o = "https://www.googleapis.com/youtube/v3/search?q=" + escape(e) + "&type=video&key=" + i + "&part=snippet&videoEmbeddable=true&maxResults=10&order=relevance";
		jQuery
			.ajax({
				url: o,
				type: "GET",
				dataType: "json",
			})
			.done(function (e) {
				debug.log("Youtube data:", e), t.html("");

				// If youtube video URL is invalid - no video found
				if (e.items.snippet.title == "") {
					jQuery(document).on("click.empty", ".youtube_add .buttonLargeContent", function () {
						// remove add button
						jQuery("td#td" + e.items.id).remove();
						// Display message to user
						$Brid.Util.openDialog("Please try another valid video URL", "No video found");
						// Reload tab
						jQuery("a[data-id='addYoutubePost']").click();
						// Remove this custom click event from "add" button
						jQuery(document).off("click.empty");
					});
				}

				var i = [],
					a = e.items;
				jQuery(a).each(function (e, t) {
					var a;
					(a = "object" == typeof t.id ? t.id.videoId : t.id),
						i.push({
							title: t.snippet.title,
							id: a,
							image: t.snippet.thumbnails.default.url,
							author: t.snippet.channelTitle,
							service: "Youtube",
							published: new Date(t.snippet.publishedAt).toPrettyFormat(),
							providerUrl: "http://www.youtube.com/watch?v=",
							vevo: t.snippet.channelTitle.indexOf("VEVO") > -1 || t.snippet.channelTitle.indexOf("Vevo") > -1,
						});
				}),
					i.length > 0 ? showContent(i) : (jQuery("#youtubeContent").html("No videos found."), debug.log("No videos found"));
			})
			.fail(function (e, t, i) {
				$Brid.Util.openDialog("Please reload the page", "Something went wrong");
			});
	} else t.html("");
};

function initButtonOpacity() {
	$Brid.init(["Html.Button"]);
}

function initBridMain() {
	debug.log("initBridMain"), $Brid.init(["Html.DefaultInput", "Html.GoogleCheckbox", "Html.CheckboxElement", "Html.Selectbox", "Html.Button", "Html.Radio", "dropdown", "datepicker"]), $Brid.Html.Effect.lazyload();
}

function bindAdTabClick() {
	jQuery(".ad-tab").on("click", function () {
		if (jQuery(this).hasClass("ad-tab-active")) return !1;
		var e = jQuery(this).attr("id").split("-")[0],
			t = jQuery(this).attr("id").split("-")[1];
		jQuery("#tab-container-" + t)
			.find(".ad-tab-active")
			.removeClass("ad-tab-active")
			.addClass("ad-tab-inactive"),
			jQuery(this).removeClass("ad-tab-inactive").addClass("ad-tab-active"),
			jQuery("." + e + "-tags-" + t).show(),
			"desktop" == e ? jQuery(".mobile-tags-" + t).hide() : jQuery(".desktop-tags-" + t).hide();
	});
}

function bindWaterfallClick() {
	jQuery(".ad-waterfall").on("click", function () {
		var e = jQuery(this).attr("id").split("-")[1],
			t = jQuery(this).attr("id").split("-")[2],
			i = jQuery(this).data("open");
		jQuery(this).hide(), jQuery("#RemoveAdTagSecondary-" + e + "-" + t + "-" + (i - 1)).hide(), jQuery(".ad-" + e + "-" + t + "-" + i).slideDown();
	}),
		jQuery(".ad-waterfall-remove").on("click", function () {
			var e = jQuery(this).attr("id").split("-")[1],
				t = jQuery(this).attr("id").split("-")[2],
				i = jQuery(this).data("close");
			jQuery(".ad-" + e + "-" + t + "-" + i).slideUp(function () {
				jQuery("#AdTagSecondary-" + e + "-" + t + "-" + i).show(), jQuery("#RemoveAdTagSecondary-" + e + "-" + t + "-" + (i - 1)).show();
			}),
				"mobile" == e ? jQuery("#AdAdTagUrl-" + i).val("") : jQuery("#AdFlashAdTagUrl-" + i).val("");
		});
}
if (
	(function () {
		var e;
		((e = (function () {
			function e() {
				(this.options_index = 0), (this.parsed = []);
			}
			return (
				(e.prototype.add_node = function (e) {
					return "OPTGROUP" === e.nodeName ? this.add_group(e) : this.add_option(e);
				}),
				(e.prototype.add_group = function (e) {
					var t, i, a, s, r, o;
					for (
						t = this.parsed.length,
							this.parsed.push({
								array_index: t,
								group: !0,
								label: e.label,
								children: 0,
								disabled: e.disabled,
							}),
							o = [],
							a = 0,
							s = (r = e.childNodes).length;
						a < s;
						a++
					)
						(i = r[a]), o.push(this.add_option(i, t, e.disabled));
					return o;
				}),
				(e.prototype.add_option = function (e, t, i) {
					if ("OPTION" === e.nodeName)
						return (
							"" !== e.text
								? (null != t && (this.parsed[t].children += 1),
								  this.parsed.push({
										array_index: this.parsed.length,
										options_index: this.options_index,
										value: e.value,
										text: e.text,
										html: e.innerHTML,
										selected: e.selected,
										disabled: !0 === i ? i : e.disabled,
										group_array_index: t,
										classes: e.className,
										style: e.style.cssText,
								  }))
								: this.parsed.push({
										array_index: this.parsed.length,
										options_index: this.options_index,
										empty: !0,
								  }),
							(this.options_index += 1)
						);
				}),
				e
			);
		})()).select_to_array = function (t) {
			var i, a, s, r, o;
			for (a = new e(), s = 0, r = (o = t.childNodes).length; s < r; s++) (i = o[s]), a.add_node(i);
			return a.parsed;
		}),
			(this.SelectParser = e);
	}.call(this),
	function () {
		var e;
		(e = (function () {
			function e(e, t) {
				(this.form_field = e), (this.options = null != t ? t : {}), this.set_default_values(), (this.is_multiple = this.form_field.multiple), this.set_default_text(), this.setup(), this.set_up_html(), this.register_observers(), this.finish_setup();
			}
			return (
				(e.prototype.set_default_values = function () {
					var e = this;
					return (
						(this.click_test_action = function (t) {
							return e.test_active_click(t);
						}),
						(this.activate_action = function (t) {
							return e.activate_field(t);
						}),
						(this.active_field = !1),
						(this.mouse_on_container = !1),
						(this.results_showing = !1),
						(this.result_highlighted = null),
						(this.result_single_selected = null),
						(this.allow_single_deselect = null != this.options.allow_single_deselect && null != this.form_field.options[0] && "" === this.form_field.options[0].text && this.options.allow_single_deselect),
						(this.disable_search_threshold = this.options.disable_search_threshold || 0),
						(this.search_contains = this.options.search_contains || !1),
						(this.choices = 0),
						(this.max_selected_options = this.options.max_selected_options || 1 / 0)
					);
				}),
				(e.prototype.set_default_text = function () {
					return this.form_field.getAttribute("data-placeholder") ? (this.default_text = this.form_field.getAttribute("data-placeholder")) : this.is_multiple ? (this.default_text = this.options.placeholder_text_multiple || this.options.placeholder_text || "Select Some Options") : (this.default_text = this.options.placeholder_text_single || this.options.placeholder_text || "Select an Option"), (this.results_none_found = this.form_field.getAttribute("data-no_results_text") || this.options.no_results_text || "No results match");
				}),
				(e.prototype.mouse_enter = function () {
					return (this.mouse_on_container = !0);
				}),
				(e.prototype.mouse_leave = function () {
					return (this.mouse_on_container = !1);
				}),
				(e.prototype.input_focus = function (e) {
					var t = this;
					if (!this.active_field)
						return setTimeout(function () {
							return t.container_mousedown();
						}, 50);
				}),
				(e.prototype.input_blur = function (e) {
					var t = this;
					if (!this.mouse_on_container)
						return (
							(this.active_field = !1),
							setTimeout(function () {
								return t.blur_test();
							}, 100)
						);
				}),
				(e.prototype.result_add_option = function (e) {
					var t, i;
					return e.disabled ? "" : ((e.dom_id = this.container_id + "_o_" + e.array_index), (t = e.selected && this.is_multiple ? [] : ["active-result"]), e.selected && t.push("result-selected"), null != e.group_array_index && t.push("group-option"), "" !== e.classes && t.push(e.classes), (i = "" !== e.style.cssText ? ' style="' + e.style + '"' : ""), '<li id="' + e.dom_id + '" class="' + t.join(" ") + '"' + i + ">" + e.html + "</li>");
				}),
				(e.prototype.results_update_field = function () {
					return this.results_reset(), this.result_clear_highlight(), (this.result_single_selected = null), this.results_build();
				}),
				(e.prototype.results_toggle = function () {
					return this.results_showing ? this.results_hide() : this.results_show();
				}),
				(e.prototype.results_search = function (e) {
					return this.results_showing ? this.winnow_results() : this.results_show();
				}),
				(e.prototype.keyup_checker = function (e) {
					var t, i;
					switch (((t = null != (i = e.which) ? i : e.keyCode), this.search_field_scale(), t)) {
						case 8:
							if (this.is_multiple && this.backstroke_length < 1 && this.choices > 0) return this.keydown_backstroke();
							if (!this.pending_backstroke) return this.result_clear_highlight(), this.results_search();
							break;
						case 13:
							if ((e.preventDefault(), this.results_showing)) return this.result_select(e);
							break;
						case 27:
							return this.results_showing && this.results_hide(), !0;
						case 9:
						case 38:
						case 40:
						case 16:
						case 91:
						case 17:
							break;
						default:
							return this.results_search();
					}
				}),
				(e.prototype.generate_field_id = function () {
					var e;
					return (e = this.generate_random_id()), (this.form_field.id = e), e;
				}),
				(e.prototype.generate_random_char = function () {
					var e, t;
					return (e = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"), (t = Math.floor(Math.random() * e.length)), e.substring(t, t + 1);
				}),
				e
			);
		})()),
			(this.AbstractChosen = e);
	}.call(this),
	function () {
		var e,
			t,
			i,
			a,
			s = Object.prototype.hasOwnProperty;
		(a = this),
			(e = jQuery).fn.extend({
				chosen: function (i) {
					return this.each(function (a) {
						var s;
						if (!(s = e(this)).hasClass("chzn-done")) return s.data("chosen", new t(this, i));
					});
				},
			}),
			(t = (function (t) {
				function r() {
					r.__super__.constructor.apply(this, arguments);
				}
				return (
					(function (e, t) {
						for (var i in t) s.call(t, i) && (e[i] = t[i]);

						function a() {
							this.constructor = e;
						}
						(a.prototype = t.prototype), (e.prototype = new a()), (e.__super__ = t.prototype);
					})(r, AbstractChosen),
					(r.prototype.setup = function () {
						return (this.form_field_jq = e(this.form_field)), (this.is_rtl = this.form_field_jq.hasClass("chzn-rtl"));
					}),
					(r.prototype.finish_setup = function () {
						return this.form_field_jq.addClass("chzn-done");
					}),
					(r.prototype.set_up_html = function () {
						var t, a, s, r;
						(this.container_id = this.form_field.id.length ? this.form_field.id.replace(/[^\w]/g, "_") : this.generate_field_id()), (this.container_id += "_chzn"), (this.f_width = this.form_field_jq.outerWidth());
						var o = 100 == this.f_width ? "100%" : this.f_width + "px";
						return (
							(t = e("<div />", {
								id: this.container_id,
								class: "chzn-container" + (this.is_rtl ? " chzn-rtl" : ""),
								style: "width: " + o + ";",
							})),
							this.is_multiple ? t.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="' + this.default_text + '" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>') : t.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>' + this.default_text + '</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),
							this.form_field_jq.hide().after(t),
							(this.container = e("#" + this.container_id)),
							this.container.addClass("chzn-container-" + (this.is_multiple ? "multi" : "single")),
							(this.dropdown = this.container.find("div.chzn-drop").first()),
							(a = this.container.height()),
							(s = 100 == this.f_width ? "100%" : this.f_width - i(this.dropdown) + "px"),
							this.dropdown.css({
								width: s,
								top: a + "px",
							}),
							(this.search_field = this.container.find("input").first()),
							(this.search_results = this.container.find("ul.chzn-results").first()),
							this.search_field_scale(),
							(this.search_no_results = this.container.find("li.no-results").first()),
							this.is_multiple
								? ((this.search_choices = this.container.find("ul.chzn-choices").first()), (this.search_container = this.container.find("li.search-field").first()))
								: ((this.search_container = this.container.find("div.chzn-search").first()),
								  (this.selected_item = this.container.find(".chzn-single").first()),
								  (r = this.dropdown.width() - i(this.search_container) - i(this.search_field)),
								  this.search_field.css({
										width: r + "px",
								  })),
							this.results_build(),
							this.set_tab_index(),
							this.form_field_jq.trigger("liszt:ready", {
								chosen: this,
							})
						);
					}),
					(r.prototype.register_observers = function () {
						var e = this;
						return (
							this.container.mousedown(function (t) {
								return e.container_mousedown(t);
							}),
							this.container.mouseup(function (t) {
								return e.container_mouseup(t);
							}),
							this.container.mouseenter(function (t) {
								return e.mouse_enter(t);
							}),
							this.container.mouseleave(function (t) {
								return e.mouse_leave(t);
							}),
							this.search_results.mouseup(function (t) {
								return e.search_results_mouseup(t);
							}),
							this.search_results.mouseover(function (t) {
								return e.search_results_mouseover(t);
							}),
							this.search_results.mouseout(function (t) {
								return e.search_results_mouseout(t);
							}),
							this.form_field_jq.bind("liszt:updated", function (t) {
								return e.results_update_field(t);
							}),
							this.search_field.blur(function (t) {
								return e.input_blur(t);
							}),
							this.search_field.keyup(function (t) {
								return e.keyup_checker(t);
							}),
							this.search_field.keydown(function (t) {
								return e.keydown_checker(t);
							}),
							this.is_multiple
								? (this.search_choices.click(function (t) {
										return e.choices_click(t);
								  }),
								  this.search_field.focus(function (t) {
										return e.input_focus(t);
								  }))
								: this.container.click(function (e) {
										return e.preventDefault();
								  })
						);
					}),
					(r.prototype.search_field_disabled = function () {
						return (this.is_disabled = this.form_field_jq[0].disabled), this.is_disabled ? (this.container.addClass("chzn-disabled"), (this.search_field[0].disabled = !0), this.is_multiple || this.selected_item.unbind("focus", this.activate_action), this.close_field()) : (this.container.removeClass("chzn-disabled"), (this.search_field[0].disabled = !1), this.is_multiple ? void 0 : this.selected_item.bind("focus", this.activate_action));
					}),
					(r.prototype.container_mousedown = function (t) {
						var i;
						if (!this.is_disabled) return (i = null != t && e(t.target).hasClass("search-choice-close")), t && "mousedown" === t.type && !this.results_showing && t.stopPropagation(), this.pending_destroy_click || i ? (this.pending_destroy_click = !1) : (this.active_field ? this.is_multiple || !t || (e(t.target)[0] !== this.selected_item[0] && !e(t.target).parents("a.chzn-single").length) || (t.preventDefault(), this.results_toggle()) : (this.is_multiple && this.search_field.val(""), e(document).click(this.click_test_action), this.results_show()), this.activate_field());
					}),
					(r.prototype.container_mouseup = function (e) {
						if ("ABBR" === e.target.nodeName) return this.results_reset(e);
					}),
					(r.prototype.blur_test = function (e) {
						if (!this.active_field && this.container.hasClass("chzn-container-active")) return this.close_field();
					}),
					(r.prototype.close_field = function () {
						return e(document).unbind("click", this.click_test_action), this.is_multiple || (this.selected_item.attr("tabindex", this.search_field.attr("tabindex")), this.search_field.attr("tabindex", -1)), (this.active_field = !1), this.results_hide(), this.container.removeClass("chzn-container-active"), this.winnow_results_clear(), this.clear_backstroke(), this.show_search_field_default(), this.search_field_scale();
					}),
					(r.prototype.activate_field = function () {
						return this.is_multiple || this.active_field || (this.search_field.attr("tabindex", this.selected_item.attr("tabindex")), this.selected_item.attr("tabindex", -1)), this.container.addClass("chzn-container-active"), (this.active_field = !0), this.search_field.val(this.search_field.val()), this.search_field.focus();
					}),
					(r.prototype.test_active_click = function (t) {
						return e(t.target).parents("#" + this.container_id).length ? (this.active_field = !0) : this.close_field();
					}),
					(r.prototype.results_build = function () {
						var e, t, i, s, r;
						for (this.parsing = !0, this.results_data = a.SelectParser.select_to_array(this.form_field), this.is_multiple && this.choices > 0 ? (this.search_choices.find("li.search-choice").remove(), (this.choices = 0)) : this.is_multiple || (this.selected_item.find("span").text(this.default_text), this.form_field.options.length <= this.disable_search_threshold ? this.container.addClass("chzn-container-single-nosearch") : this.container.removeClass("chzn-container-single-nosearch")), e = "", i = 0, s = (r = this.results_data).length; i < s; i++) (t = r[i]).group ? (e += this.result_add_group(t)) : t.empty || ((e += this.result_add_option(t)), t.selected && this.is_multiple ? this.choice_build(t) : t.selected && !this.is_multiple && (this.selected_item.removeClass("chzn-default").find("span").text(t.text), this.allow_single_deselect && this.single_deselect_control_build()));
						return this.search_field_disabled(), this.show_search_field_default(), this.search_field_scale(), this.search_results.html(e), (this.parsing = !1);
					}),
					(r.prototype.result_add_group = function (t) {
						return t.disabled ? "" : ((t.dom_id = this.container_id + "_g_" + t.array_index), '<li id="' + t.dom_id + '" class="group-result">' + e("<div />").text(t.label).html() + "</li>");
					}),
					(r.prototype.result_do_highlight = function (e) {
						var t, i, a, s, r;
						if (e.length) {
							if ((this.result_clear_highlight(), (this.result_highlight = e), this.result_highlight.addClass("highlighted"), (s = (a = parseInt(this.search_results.css("maxHeight"), 10)) + (r = this.search_results.scrollTop())), (t = (i = this.result_highlight.position().top + this.search_results.scrollTop()) + this.result_highlight.outerHeight()) >= s)) return this.search_results.scrollTop(t - a > 0 ? t - a : 0);
							if (i < r) return this.search_results.scrollTop(i);
						}
					}),
					(r.prototype.result_clear_highlight = function () {
						return this.result_highlight && this.result_highlight.removeClass("highlighted"), (this.result_highlight = null);
					}),
					(r.prototype.results_show = function () {
						var e;
						if (this.is_multiple) {
							if (this.max_selected_options <= this.choices)
								return (
									this.form_field_jq.trigger("liszt:maxselected", {
										chosen: this,
									}),
									!1
								);
						} else this.selected_item.addClass("chzn-single-with-drop"), this.result_single_selected && this.result_do_highlight(this.result_single_selected);
						return (
							(e = this.is_multiple ? this.container.height() : this.container.height() - 1),
							this.form_field_jq.trigger("liszt:showing_dropdown", {
								chosen: this,
							}),
							this.dropdown.css({
								top: e + "px",
								left: 0,
							}),
							(this.results_showing = !0),
							this.search_field.focus(),
							this.search_field.val(this.search_field.val()),
							this.winnow_results()
						);
					}),
					(r.prototype.results_hide = function () {
						return (
							this.is_multiple || this.selected_item.removeClass("chzn-single-with-drop"),
							this.result_clear_highlight(),
							this.form_field_jq.trigger("liszt:hiding_dropdown", {
								chosen: this,
							}),
							this.dropdown.css({
								left: "-9000px",
							}),
							(this.results_showing = !1)
						);
					}),
					(r.prototype.set_tab_index = function (e) {
						var t;
						if (this.form_field_jq.attr("tabindex")) return (t = this.form_field_jq.attr("tabindex")), this.form_field_jq.attr("tabindex", -1), this.is_multiple ? this.search_field.attr("tabindex", t) : (this.selected_item.attr("tabindex", t), this.search_field.attr("tabindex", -1));
					}),
					(r.prototype.show_search_field_default = function () {
						return this.is_multiple && this.choices < 1 && !this.active_field ? (this.search_field.val(this.default_text), this.search_field.addClass("default")) : (this.search_field.val(""), this.search_field.removeClass("default"));
					}),
					(r.prototype.search_results_mouseup = function (t) {
						var i;
						if ((i = e(t.target).hasClass("active-result") ? e(t.target) : e(t.target).parents(".active-result").first()).length) return (this.result_highlight = i), this.result_select(t);
					}),
					(r.prototype.search_results_mouseover = function (t) {
						var i;
						if ((i = e(t.target).hasClass("active-result") ? e(t.target) : e(t.target).parents(".active-result").first())) return this.result_do_highlight(i);
					}),
					(r.prototype.search_results_mouseout = function (t) {
						if (e(t.target).hasClass("active-result")) return this.result_clear_highlight();
					}),
					(r.prototype.choices_click = function (t) {
						if ((t.preventDefault(), this.active_field && !e(t.target).hasClass("search-choice") && !this.results_showing)) return this.results_show();
					}),
					(r.prototype.choice_build = function (t) {
						var i,
							a = this;
						return this.is_multiple && this.max_selected_options <= this.choices
							? (this.form_field_jq.trigger("liszt:maxselected", {
									chosen: this,
							  }),
							  !1)
							: ((i = this.container_id + "_c_" + t.array_index),
							  (this.choices += 1),
							  this.search_container.before('<li class="search-choice" id="' + i + '"><span>' + t.html + '</span><a href="javascript:void(0)" data-option-array-index="' + parseInt(t.array_index + 1) + '" class="search-choice-close" rel="' + t.array_index + '"></a></li>'),
							  e("#" + i)
									.find("a")
									.first()
									.click(function (e) {
										return a.choice_destroy_link_click(e);
									}));
					}),
					(r.prototype.choice_destroy_link_click = function (t) {
						return t.preventDefault(), this.is_disabled ? t.stopPropagation : ((this.pending_destroy_click = !0), this.choice_destroy(e(t.target)));
					}),
					(r.prototype.choice_destroy = function (e) {
						return (this.choices -= 1), this.show_search_field_default(), this.is_multiple && this.choices > 0 && this.search_field.val().length < 1 && this.results_hide(), this.result_deselect(e.attr("rel")), e.parents("li").first().remove();
					}),
					(r.prototype.results_reset = function () {
						if (((this.form_field.options[this.form_field.selectedIndex].selected = !0), this.selected_item.find("span").text(this.default_text), this.is_multiple || this.selected_item.addClass("chzn-default"), this.show_search_field_default(), this.selected_item.find("abbr").remove(), this.form_field_jq.trigger("change"), this.active_field)) return this.results_hide();
					}),
					(r.prototype.result_select = function (e) {
						var t, i, a, s;
						if (this.result_highlight)
							return (
								(i = (t = this.result_highlight).attr("id")),
								this.result_clear_highlight(),
								this.is_multiple ? this.result_deactivate(t) : (this.search_results.find(".result-selected").removeClass("result-selected"), (this.result_single_selected = t), this.selected_item.removeClass("chzn-default")),
								t.addClass("result-selected"),
								(s = i.substr(i.lastIndexOf("_") + 1)),
								((a = this.results_data[s]).selected = !0),
								(this.form_field.options[a.options_index].selected = !0),
								this.is_multiple ? this.choice_build(a) : (this.selected_item.find("span").first().text(a.text), this.allow_single_deselect && this.single_deselect_control_build()),
								(e.metaKey && this.is_multiple) || this.results_hide(),
								this.search_field.val(""),
								this.form_field_jq.trigger("change", {
									selected: this.form_field.options[a.options_index].value,
								}),
								this.search_field_scale()
							);
					}),
					(r.prototype.result_activate = function (e) {
						return e.addClass("active-result");
					}),
					(r.prototype.result_deactivate = function (e) {
						return e.removeClass("active-result");
					}),
					(r.prototype.result_deselect = function (t) {
						var i;
						return (
							((i = this.results_data[t]).selected = !1),
							(this.form_field.options[i.options_index].selected = !1),
							e("#" + this.container_id + "_o_" + t)
								.removeClass("result-selected")
								.addClass("active-result")
								.show(),
							this.result_clear_highlight(),
							this.winnow_results(),
							this.form_field_jq.trigger("change", {
								deselected: this.form_field.options[i.options_index].value,
							}),
							this.search_field_scale()
						);
					}),
					(r.prototype.single_deselect_control_build = function () {
						if (this.allow_single_deselect && this.selected_item.find("abbr").length < 1) return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>');
					}),
					(r.prototype.winnow_results = function () {
						var t, i, a, s, r, o, n, l, d, c, u, h, p, g, f, m, y, b;
						for (this.no_results_clear(), d = 0, c = this.search_field.val() === this.default_text ? "" : e("<div/>").text(e.trim(this.search_field.val())).html(), o = this.search_contains ? "" : "^", r = new RegExp(o + c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), "i"), p = new RegExp(c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), "i"), g = 0, m = (b = this.results_data).length; g < m; g++)
							if (!(i = b[g]).disabled && !i.empty)
								if (i.group) e("#" + i.dom_id).css("display", "none");
								else if (!this.is_multiple || !i.selected) {
									if (((t = !1), (l = i.dom_id), (n = e("#" + l)), r.test(i.html))) (t = !0), (d += 1);
									else if ((i.html.indexOf(" ") >= 0 || 0 === i.html.indexOf("[")) && (s = i.html.replace(/\[|\]/g, "").split(" ")).length) for (f = 0, y = s.length; f < y; f++) (a = s[f]), r.test(a) && ((t = !0), (d += 1));
									t ? (c.length ? ((u = i.html.search(p)), (h = (h = i.html.substr(0, u + c.length) + "</em>" + i.html.substr(u + c.length)).substr(0, u) + "<em>" + h.substr(u))) : (h = i.html), n.html(h), this.result_activate(n), null != i.group_array_index && e("#" + this.results_data[i.group_array_index].dom_id).css("display", "list-item")) : (this.result_highlight && l === this.result_highlight.attr("id") && this.result_clear_highlight(), this.result_deactivate(n));
								}
						return d < 1 && c.length ? this.no_results(c) : this.winnow_results_set_highlight();
					}),
					(r.prototype.winnow_results_clear = function () {
						var t, i, a, s, r;
						for (this.search_field.val(""), r = [], a = 0, s = (i = this.search_results.find("li")).length; a < s; a++) (t = i[a]), (t = e(t)).hasClass("group-result") ? r.push(t.css("display", "auto")) : this.is_multiple && t.hasClass("result-selected") ? r.push(void 0) : r.push(this.result_activate(t));
						return r;
					}),
					(r.prototype.winnow_results_set_highlight = function () {
						var e, t;
						if (!this.result_highlight && null != (e = (t = this.is_multiple ? [] : this.search_results.find(".result-selected.active-result")).length ? t.first() : this.search_results.find(".active-result").first())) return this.result_do_highlight(e);
					}),
					(r.prototype.no_results = function (t) {
						var i;
						return (i = e('<li class="no-results">' + this.results_none_found + ' "<span></span>"</li>')).find("span").first().html(t), this.search_results.append(i);
					}),
					(r.prototype.no_results_clear = function () {
						return this.search_results.find(".no-results").remove();
					}),
					(r.prototype.keydown_arrow = function () {
						var t, i;
						if ((this.result_highlight ? this.results_showing && (i = this.result_highlight.nextAll("li.active-result").first()) && this.result_do_highlight(i) : (t = this.search_results.find("li.active-result").first()) && this.result_do_highlight(e(t)), !this.results_showing)) return this.results_show();
					}),
					(r.prototype.keyup_arrow = function () {
						var e;
						return this.results_showing || this.is_multiple ? (this.result_highlight ? ((e = this.result_highlight.prevAll("li.active-result")).length ? this.result_do_highlight(e.first()) : (this.choices > 0 && this.results_hide(), this.result_clear_highlight())) : void 0) : this.results_show();
					}),
					(r.prototype.keydown_backstroke = function () {
						return this.pending_backstroke ? (this.choice_destroy(this.pending_backstroke.find("a").first()), this.clear_backstroke()) : ((this.pending_backstroke = this.search_container.siblings("li.search-choice").last()), this.pending_backstroke.addClass("search-choice-focus"));
					}),
					(r.prototype.clear_backstroke = function () {
						return this.pending_backstroke && this.pending_backstroke.removeClass("search-choice-focus"), (this.pending_backstroke = null);
					}),
					(r.prototype.keydown_checker = function (e) {
						var t, i;
						switch (((t = null != (i = e.which) ? i : e.keyCode), this.search_field_scale(), 8 !== t && this.pending_backstroke && this.clear_backstroke(), t)) {
							case 8:
								this.backstroke_length = this.search_field.val().length;
								break;
							case 9:
								this.results_showing && !this.is_multiple && this.result_select(e), (this.mouse_on_container = !1);
								break;
							case 13:
								e.preventDefault();
								break;
							case 38:
								e.preventDefault(), this.keyup_arrow();
								break;
							case 40:
								this.keydown_arrow();
						}
					}),
					(r.prototype.search_field_scale = function () {
						var t, i, a, s, r, o, n, l;
						if (this.is_multiple) {
							for (o = 0, s = "position:absolute; left: -1000px; top: -1000px; display:none;", n = 0, l = (r = ["font-size", "font-style", "font-weight", "font-family", "line-height", "text-transform", "letter-spacing"]).length; n < l; n++) s += (a = r[n]) + ":" + this.search_field.css(a) + ";";
							return (
								(i = e("<div />", {
									style: s,
								})).text(this.search_field.val()),
								e("body").append(i),
								(o = i.width() + 25),
								i.remove(),
								o > this.f_width - 10 && (o = this.f_width - 10),
								this.search_field.css({
									width: o + "px",
								}),
								(t = this.container.height()),
								this.dropdown.css({
									top: t + "px",
								})
							);
						}
					}),
					(r.prototype.generate_random_id = function () {
						var t;
						for (t = "sel" + this.generate_random_char() + this.generate_random_char() + this.generate_random_char(); e("#" + t).length > 0; ) t += this.generate_random_char();
						return t;
					}),
					r
				);
			})()),
			(i = function (e) {
				return e.outerWidth() - e.width();
			}),
			(a.get_side_border_padding = i);
	}.call(this),
	null == window.$BridWidget)
)
	var $BridWidget = function (e, t) {
		if (
			((this.loadHost = $BridWidgets.getPath()),
			console.log("jQuery('#bridWidgetCss-css').length", jQuery("#bridWidgetCss-css").length),
			jQuery("#bridWidgetCss-css").length <= 0 && jQuery("head").append("<link rel='stylesheet' class='bridWidgetCss-css' href='//cdn.brid.tv/live/widget/css/brid.widget.v1.min.css' type='text/css' media='all' />"),
			(this.config = {
				autoplay: 0,
				color: 0,
				height: 360,
				items: 10,
				thumbNumber: 3,
				playlistType: 1,
				ratio: 1,
				categoryId: 0,
				offset: 10,
				maxInnerContent: 97,
			}),
			(this.isMobile = $BridWidgets.isMob),
			(this.uniqueId = t.id),
			(this.player = null),
			(this.playerId = "Brid_" + this.uniqueId),
			(this.template = '<div class="bridWidgetWrapper" id="bridWidgetWrapper-UNIQUE_ID"><div class="bridWidget" id="bridWidget-UNIQUE_ID"><div id="Brid_UNIQUE_ID" class="brid" itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><div id="Brid_UNIQUE_ID_adContainer"></div></div><div class="bridWidgetGoToLeft"><div class="brid-arrow-left"></div></div><div class="brid-pl" style="display:none"><div class="BridWidgetPlaylist" id="Brid_UNIQUE_ID_playlist"></div></div><div class="brid-widget-check"></div><div class="bridWidgetGoToRight"><div class="brid-arrow-right"></div></div></div></div>'),
			this.isMobile && (this.template = '<div class="bridWidgetWrapper" id="bridWidgetWrapper-UNIQUE_ID"><div class="bridWidget" id="bridWidget-UNIQUE_ID"><div class="bridWidgetGoToLeft"><div class="brid-arrow-left"></div></div><div class="brid-pl" style="display:none"><div class="BridWidgetPlaylist" id="Brid_UNIQUE_ID_playlist"><div class="brid-widget-check"></div><div id="Brid_UNIQUE_ID" class="brid" itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><div id="Brid_UNIQUE_ID_adContainer"></div></div></div></div><div class="bridWidgetGoToRight"><div class="brid-arrow-right"></div></div></div></div>'),
			jQuery("#" + this.uniqueId).html(this.template.replace(/UNIQUE_ID/g, this.uniqueId)),
			(this.bridWidget = jQuery("#bridWidget-" + this.uniqueId)),
			(this.playlist = this.bridWidget.find(".brid-pl")),
			(this.playerDiv = this.bridWidget.find("#Brid_" + this.uniqueId)),
			(this.bridWidgetPlaylist = this.bridWidget.find(".BridWidgetPlaylist")),
			this.isMobile)
		) {
			this.bridWidget.css("height", t.height + "px"),
				(this.bridWidgetCheck = this.bridWidget.find(".brid-widget-check")),
				(this.bridWidgetWrapper = this.bridWidget.parent()),
				this.playlist.attr("id", "brid-pl" + this.uniqueId),
				(this.plHeight = parseInt(t.height)),
				this.playlist.css({
					top: "0px",
					height: this.plHeight + "px",
					width: "100%",
					bottom: "0px",
				}),
				this.bridWidgetPlaylist.css("width", "100%"),
				this.bridWidgetWrapper.css("height", t.height + "px"),
				this.bridWidget.css({
					position: "relative",
					overflow: "hidden",
				});
			var i = ["fb", "tw", "gp", "rd", "link", "embed2"],
				a = "";
			for (var s in i) a += '<div class="BridWShare ' + i[s] + '"></div>';
			this.bridWidgetWrapper.append("<div class='BridWidgetEmbed'><input class='bridWidget-embed' type='text'></div><div class='bridClose'></div><div class='BridWidgetShares' style='width:100%;bottom:0px;border-bottom: 1px solid #BBBDBf;'>" + a + "<div class='clear'></div></div>"), (this.bridWidgetEmbed = this.bridWidgetWrapper.find(".BridWidgetEmbed")), (this.embed = this.bridWidgetWrapper.find(".bridWidget-embed")), (this.bridWidgetShares = this.bridWidgetWrapper.find(".BridWidgetShares")), (this.closeDiv = this.bridWidgetWrapper.find(".bridClose"));
		}
		(this.left = this.bridWidget.find(".bridWidgetGoToLeft")),
			(this.right = this.bridWidget.find(".bridWidgetGoToRight")),
			(this.bridWidgetThumb = this.bridWidget.find(".bridWidgetThumb")),
			(this.items = t.items),
			(this.itemsLoaded = this.items),
			(this.errorPixel = 0),
			(this.correctedThumbNum = 0),
			(this.config = jQuery.extend(this.config, t)),
			(this.lightOrDark = function (e) {
				var t,
					i,
					a,
					s = e;
				return s.match(/^rgb/) ? ((t = (s = s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1]), (a = s[2]), (i = s[3])) : ((t = (s = +("0x" + s.slice(1).replace(s.length < 5 && /./g, "$&$&"))) >> 16), (i = (s >> 8) & 255), (a = 255 & s)), Math.sqrt(t * t * 0.299 + a * a * 0.587 + i * i * 0.114) > 127.5 ? "light" : "dark";
			}),
			(this.colorLuminance = function (e, t) {
				(e = String(e).replace(/[^0-9a-f]/gi, "")).length < 6 && (e = e[0] + e[0] + e[1] + e[1] + e[2] + e[2]), (t = t || 0);
				var i,
					a,
					s = "#";
				for (a = 0; a < 3; a++) (i = parseInt(e.substr(2 * a, 2), 16)), (s += ("00" + (i = Math.round(Math.min(Math.max(0, i + i * t), 255)).toString(16))).substr(i.length));
				return s;
			}),
			(this.setColor = function (e) {
				var t, i, a;
				"" == e
					? (this.bridWidget.css({
							"background-color": "transparent",
							border: "1px solid transparent",
					  }),
					  (e = "ffffff"))
					: this.bridWidget.css({
							"background-color": "#" + e,
							border: "1px solid #" + e,
					  }),
					this.isMobile &&
						(this.bridWidget.css("border", "none"),
						this.closeDiv.css("background", "url(//cdn.brid.tv/live/widget/img/close_w.svg) center no-repeat #ffffff"),
						this.embed.css({
							"background-color": "#ffffff",
							"box-shadow": "0 0 0 #ffffff",
						}),
						(a = this.lightOrDark(e)),
						(i = "#ffffff"),
						(t = "#" + e),
						"light" == a ? (this.bridWidgetEmbed.find(".bridWidget-embed").css("color", "#" + e), (t = this.colorLuminance(e, -0.3))) : this.bridWidgetEmbed.find(".bridWidget-embed").css("color", "#" + e),
						"ffffff" == e && ((t = this.colorLuminance(e, -0.5)), this.bridWidgetEmbed.find(".bridWidget-embed").css("color", t)),
						this.bridWidgetShares.find(".BridWShare").each(function (e, a) {
							switch (e) {
								case 0:
									jQuery(a).html('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="45.1px" height="43.9px" viewBox="0 0 45.1 43.9" enable-background="new 0 0 45.1 43.9" xml:space="preserve"> <g> <g class="fHover"> <path fill="' + i + '" d="M45.1,37.8c0,3.4-2.7,6.1-6.1,6.1H6.1c-3.4,0-6.1-2.7-6.1-6.1V6.1C0,2.7,2.7,0,6.1,0H39 c3.4,0,6.1,2.7,6.1,6.1V37.8z"/> </g> <path fill="' + t + '" d="M25.3,9.9c0.8,0,1.3,0,1.9,0.2l0.6,0.2v-2l-0.4-0.1c-0.7-0.2-1.3-0.3-2.1-0.3c-3.1,0-5.1,2.1-5.1,5.5v3.3 h-3.9v1.9h3.9v17.2h2.1V18.6h5.1v-1.9h-5.1v-3.4C22.4,10.5,24,9.9,25.3,9.9z"/> </g> </svg>');
									break;
								case 1:
									jQuery(a).html(
										'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="45.1px" height="43.9px" viewBox="0 0 45.1 43.9" enable-background="new 0 0 45.1 43.9" xml:space="preserve"> <g class="tHover"> <path fill="' +
											i +
											'" d="M45.1,37.8c0,3.4-2.7,6.1-6.1,6.1H6.1c-3.4,0-6.1-2.7-6.1-6.1V6.1C0,2.7,2.7,0,6.1,0H39 c3.4,0,6.1,2.7,6.1,6.1V37.8z"/> </g> <path fill="' +
											t +
											'" d="M18.9,34.8c-6.2,0-11.5-2.7-15.1-7.5c-0.2-0.2-0.1-0.5,0.1-0.7c0.2-0.2,0.5-0.2,0.7,0 c1.6,1.6,3.9,2.5,6.3,2.5c2.1,0,4.1-0.7,5.7-2c-1-0.2-1.7-0.8-1.9-1.6c-0.1-0.3-0.1-0.9,0.4-1.5c-2.2-0.3-3.2-1.9-3.4-2.5 c-0.1-0.2-0.1-0.4,0.1-0.6c0.3-0.3,0.6-0.6,1-0.7c-1.5-0.7-2.4-1.9-2.7-3.5c-0.1-0.3,0.1-0.5,0.4-0.6c0.2-0.1,0.5-0.1,0.8-0.2 c-1.7-1.3-2.2-3-2.1-4.3c0-0.2,0.1-0.3,0.2-0.4s0.3-0.1,0.4,0c3.9,1.4,6.8,2.7,9.5,4.2c0.7,0.4,1.4,0.9,2.3,1.8 c1.3-3.4,3-6.7,5.7-8.4c0.2-0.1,0.4-0.1,0.5,0C28,8.9,28,9,28.1,9.1c0.6-0.3,1.2-0.5,1.8-0.6c0.2,0,0.3,0,0.4,0.1s0.2,0.3,0.1,0.4 c0,0,0,0.1,0,0.1c0.2,0,0.5-0.1,0.7-0.1c0.6,0,0.9,0.3,1,0.5c0.1,0.2,0.1,0.5,0,0.7c-0.2,0.4-0.6,0.6-1.1,0.8c2.7,0.8,5,3.2,5.8,6.2 c0.1,0.2,0.1,0.4,0.2,0.6c0.2,0.1,0.5,0.1,0.9,0.1c1.2,0,2.4-0.4,2.8-0.6c0.2-0.1,0.4-0.1,0.6,0c0.2,0.1,0.2,0.4,0.1,0.6 c-0.4,0.9-1.2,1.7-2.2,2.1c0.7,0.1,1.3,0,1.8,0c0.2,0,0.4,0.1,0.5,0.3c0.1,0.2,0.1,0.4-0.1,0.6c-1.1,1.1-2.5,1.7-4.3,1.8 C35,29.8,27.5,34.8,18.9,34.8z M7,29.4c3.2,2.9,7.3,4.4,11.9,4.4c8.1,0,15.5-5,17.1-11.6c0.1-0.2,0.3-0.4,0.5-0.4c0,0,0,0,0,0 c0,0,0,0,0,0c1.1,0,2-0.2,2.8-0.6c-1,0-2.1-0.2-2.8-0.5c-0.2-0.1-0.3-0.3-0.3-0.5c0-0.2,0.2-0.4,0.5-0.4c1.1-0.1,2-0.4,2.6-0.9 c-1.1,0.2-2.3,0.2-3.1-0.1c-0.2-0.1-0.3-0.2-0.3-0.4c0-0.3-0.1-0.5-0.2-0.8c-0.9-3.5-4.1-6-7.2-5.7c-0.3,0-0.5-0.1-0.5-0.4 s0.1-0.5,0.3-0.6c0.3-0.1,0.6-0.2,0.9-0.3c0.1,0,0.2-0.1,0.4-0.1c0.6-0.1,1-0.3,1.3-0.4c-0.6,0.1-1.6,0.5-2.2,0.7 c-0.2,0.1-0.4,0.2-0.5,0.2c-0.3,0.1-0.5-0.1-0.6-0.3c0,0,0,0,0,0c0,0-0.1,0.1-0.1,0.1c-0.2,0.2-0.5,0.2-0.7,0c0,0,0,0,0,0 c-1.9,1.9-3.2,4.7-4.3,7.7c-0.1,0.2-0.2,0.3-0.4,0.3c-0.2,0-0.3,0-0.5-0.1c-1.1-1.1-2-1.8-2.6-2.1c-2.5-1.3-5.2-2.5-8.6-3.9 c0.2,1.1,1,2.5,2.8,3.4c0.2,0.1,0.3,0.4,0.2,0.6c-0.1,0.2-0.3,0.4-0.6,0.3c-0.3,0-0.9,0-1.6,0.2c0.3,1.1,1.1,2.2,3.6,2.8 c0.2,0.1,0.4,0.3,0.4,0.5c0,0.2-0.2,0.4-0.5,0.5c-1,0.1-1.5,0.3-1.9,0.6c0.5,0.7,1.6,1.9,3.8,1.6c0.2,0,0.5,0.1,0.5,0.4 c0.1,0.2-0.1,0.5-0.3,0.6c-0.8,0.4-1.2,0.8-1.2,1.3c0.1,0.5,0.9,1.1,2,0.9c0.2,0,0.4,0.1,0.5,0.3s0.1,0.4-0.1,0.6 c-1.9,2-4.5,3.1-7.3,3.1C9.5,30.1,8.2,29.9,7,29.4z"/> </svg>'
									);
									break;
								case 2:
									jQuery(a).html('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="45.1px" height="43.9px" viewBox="0 0 45.1 43.9" enable-background="new 0 0 45.1 43.9" xml:space="preserve"> <g class="gHover1"> <path fill="' + i + '" d="M45.1,37.8c0,3.4-2.7,6.1-6.1,6.1H6.1c-3.4,0-6.1-2.7-6.1-6.1V6.1C0,2.7,2.7,0,6.1,0H39 c3.4,0,6.1,2.7,6.1,6.1V37.8z"/> </g> <g class="gHover2"> <path fill="' + t + '" d="M19,24.2c-3.9,0-7.1-3.2-7.1-7.1c0-3.9,3.2-7.1,7.1-7.1c3.9,0,7.1,3.2,7.1,7.1C26.2,21,23,24.2,19,24.2z M19,11c-3.4,0-6.1,2.7-6.1,6.1c0,3.4,2.7,6.1,6.1,6.1c3.4,0,6.1-2.7,6.1-6.1C25.2,13.7,22.4,11,19,11z"/> <path fill="' + t + '" d="M18.4,38c-4.3,0-7.7-2.7-7.7-6.1c0-3.4,3.5-6.1,7.7-6.1c4.3,0,7.7,2.7,7.7,6.1C26.1,35.2,22.7,38,18.4,38z M18.4,26.8c-3.7,0-6.8,2.3-6.8,5.1c0,2.8,3,5.1,6.8,5.1c3.7,0,6.8-2.3,6.8-5.1C25.2,29.1,22.2,26.8,18.4,26.8z"/> <path fill="' + t + '" d="M24.1,29.2c-3.6-3.6-1.2-7.2-1.2-7.3l0.8,0.5c-0.1,0.1-1.9,3,1.1,6.1L24.1,29.2z"/> <rect x="20.9" y="10.3" fill="' + t + '" width="4.7" height="1"/> <g> <rect x="27.9" y="13.9" fill="' + t + '" width="13.2" height="1"/> <rect x="33.7" y="7.8" fill="' + t + '" width="1" height="13.2"/> </g> </g> </svg>');
									break;
								case 3:
									jQuery(a).html('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="45.1px" height="43.9px" viewBox="0 0 45.1 43.9" enable-background="new 0 0 45.1 43.9" xml:space="preserve"> <g> <path fill="' + i + '" d="M45.1,37.8c0,3.4-2.7,6.1-6.1,6.1H6.1c-3.4,0-6.1-2.7-6.1-6.1V6.1C0,2.7,2.7,0,6.1,0H39 c3.4,0,6.1,2.7,6.1,6.1V37.8z"/> </g> <g class="gHover"> <path fill="' + t + '" d="M22.6,33.1c-8.4,0-15.2-4.3-15.2-9.6c0-5.3,6.8-9.6,15.2-9.6c8.4,0,15.2,4.3,15.2,9.6 C37.8,28.8,31,33.1,22.6,33.1z M22.6,14.9c-7.8,0-14.2,3.9-14.2,8.6c0,4.7,6.4,8.6,14.2,8.6s14.2-3.9,14.2-8.6 C36.8,18.7,30.5,14.9,22.6,14.9z"/> <path fill="' + t + '" d="M7.8,22.3c-0.8-0.7-1.2-1.7-1.2-2.8c0-2.1,1.7-3.9,3.9-3.9c0.9,0,1.9,0.3,2.6,1l-0.7,0.7 c-0.5-0.5-1.2-0.7-1.9-0.7c-1.6,0-2.9,1.3-2.9,2.9c0,0.8,0.3,1.5,0.9,2.1L7.8,22.3z"/> <circle fill="' + t + '" cx="17" cy="21.4" r="1.1"/> <path fill="' + t + '" d="M37.3,22.3l-0.7-0.7c0.6-0.5,0.9-1.3,0.9-2.1c0-1.6-1.3-2.9-2.9-2.9c-0.7,0-1.4,0.3-1.9,0.7L32,16.6 c0.7-0.6,1.6-1,2.6-1c2.1,0,3.9,1.7,3.9,3.9C38.5,20.6,38.1,21.6,37.3,22.3z"/> <circle fill="' + t + '" cx="28.1" cy="21.4" r="1.1"/> <path fill="' + t + '" d="M22.8,27.8c-3.1,0-5.9-1-7.2-2.5l0.8-0.6c1.1,1.3,3.6,2.1,6.5,2.1c2.6,0,4.9-0.7,6.2-1.8l0.7,0.7 C28.2,27,25.6,27.8,22.8,27.8z"/> <polygon fill="' + t + '" points="22.6,14.6 21.7,14.2 24.7,8 31.7,9.4 31.5,10.3 25.2,9.2  "/> <path fill="' + t + '" d="M33.2,12.6c-1.4,0-2.5-1.1-2.5-2.5s1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5S34.5,12.6,33.2,12.6z M33.2,8.6 c-0.8,0-1.5,0.7-1.5,1.5s0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5S34,8.6,33.2,8.6z"/> </g> </svg>');
									break;
								case 4:
									jQuery(a).html('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="45.1px" height="43.9px" viewBox="0 0 45.1 43.9" enable-background="new 0 0 45.1 43.9" xml:space="preserve"> <g> <path fill="' + i + '" d="M45.1,37.8c0,3.4-2.7,6.1-6.1,6.1H6.1c-3.4,0-6.1-2.7-6.1-6.1V6.1C0,2.7,2.7,0,6.1,0H39 c3.4,0,6.1,2.7,6.1,6.1V37.8z"/> </g> <g class="linkHover"> <path fill="' + t + '" d="M16,27.7h-6c-3.7,0-6.7-3-6.7-6.7c0-3.7,3-6.7,6.7-6.7h9c3.4,0,6.3,2.6,6.7,6l-1,0.1 c-0.3-2.9-2.8-5.1-5.7-5.1h-9c-3.1,0-5.7,2.6-5.7,5.7c0,3.1,2.6,5.7,5.7,5.7h6V27.7z"/> <path fill="' + t + '" d="M35,27.7h-9c-3.4,0-6.3-2.6-6.7-6l1-0.1c0.3,2.9,2.8,5.1,5.7,5.1h9c3.1,0,5.7-2.6,5.7-5.7 c0-3.1-2.6-5.7-5.7-5.7h-6v-1h6c3.7,0,6.7,3,6.7,6.7C41.8,24.7,38.7,27.7,35,27.7z"/> </g> </svg>');
									break;
								case 5:
									jQuery(a).html('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="45.1px" height="43.9px" viewBox="0 0 45.1 43.9" enable-background="new 0 0 45.1 43.9" xml:space="preserve"> <g> <path fill="' + i + '" d="M45.1,37.8c0,3.4-2.7,6.1-6.1,6.1H6.1c-3.4,0-6.1-2.7-6.1-6.1V6.1C0,2.7,2.7,0,6.1,0H39 c3.4,0,6.1,2.7,6.1,6.1V37.8z"/> </g> <g> <polygon fill="' + t + '" points="16.6,30.1 2.4,22 16.6,13.8 17.1,14.7 4.4,22 17.1,29.2   "/> <polygon fill="' + t + '" points="28.5,30.1 28,29.2 40.6,22 28,14.7 28.5,13.8 42.6,22   "/> <rect x="22.1" y="13.9" transform="matrix(0.9543 0.2989 -0.2989 0.9543 7.5963 -5.7507)" fill="' + t + '" width="1" height="16.1"/> </g> </svg>');
							}
						}));
			}),
			(this.repaint = function () {
				var e = this.bridWidget.width();
				if (null != e) {
					parseInt(e) >= 850 && (this.config.thumbNumber = 4), (this.width = parseInt((parseInt(this.bridWidget.width()) * this.config.maxInnerContent) / 100)), (this.config.thumbNumber = this.config.thumbNumber < 2 ? 2 : this.config.thumbNumber), (this.config.thumbNumber = this.config.thumbNumber > 5 ? 5 : this.config.thumbNumber), (this.thumbWidth = parseInt((this.width - (this.config.thumbNumber - 1) * this.config.offset) / this.config.thumbNumber)), 0 == this.config.ratio ? ((this.ratioW = 4), (this.ratioH = 3)) : ((this.ratioW = 16), (this.ratioH = 9)), (this.thumbHeight = parseInt((this.thumbWidth * this.ratioH) / this.ratioW)), (this.arrowSize = (40 * this.thumbHeight) / 100), this.arrowSize < 28 && (this.left.css("background-size", this.arrowSize / 2 + "px " + this.arrowSize + "px"), this.right.css("background-size", this.arrowSize / 2 + "px " + this.arrowSize + "px"));
					var i = this.thumbHeight + 15;
					(this.playerHeight = t.height - i - 10),
						(this.smallplayWidth = 20),
						(this.smallplayHeight = 22),
						this.thumbWidth < 130 && ((this.smallplayHeight = 17), (this.smallplayWidth = 16)),
						(this.playerWidth = parseInt(this.width)),
						this.isMobile && ((this.thumbWidth = (9 * this.bridWidget.width()) / 10), (this.thumbHeight = (this.ratioH * this.thumbWidth) / this.ratioW), (this.playerHeight = this.thumbHeight), (this.playerWidth = this.thumbWidth)),
						(this.playlistWidth = parseInt(this.width)),
						(this.mar = (parseInt(this.bridWidget.width()) - this.width) / 2),
						(this.mar = parseInt(this.mar)),
						this.left.css("height", i),
						this.right.css("height", i),
						this.isMobile ||
							this.playlist.css({
								width: this.playlistWidth,
								"margin-left": this.mar,
								"margin-right": this.mar,
								height: i,
							}),
						this.isMobile || this.bridWidget.css("height", t.height),
						(this.color = this.config.color),
						this.setColor(this.color);
				}
			}),
			this.repaint(this),
			(this.playerConfig = {
				id: this.config.playerId,
				width: this.playerWidth,
				height: this.playerHeight,
				autoplay: this.config.autoplay,
				//video_type: "0",
				play_in_page: !1,
				slide_inview: !1,
			}),
			this.config.playlistId
				? (this.playerConfig.playlist = this.config.playlistId)
				: (this.playerConfig.playlist = {
						id: "0",
						mode: "latest",
						items: this.items,
				  }),
			this.isMobile && ((this.playerConfig.shareScreen = !1), (this.playerConfig.playlistScreen = !1)),
			(this.playlistUrl = t.playlist),
			(this.pluginUrl = t.plugin_url),
			(this.noImage = t.plugin_url + t.noImage),
			(this.playerConfig.video_type = 0 == t.playlistType || 3 == t.playlistType ? 0 : 1),
			(2 != t.playlistType && 3 != t.playlistType) || ((this.playerConfig.playlist.mode = "channel"), (this.playerConfig.playlist.id = this.config.categoryId)),
			(this.leftVisible = !1),
			(this.rightVisible = !0),
			(this.l = this.bridWidgetPlaylist.css("left")),
			"auto" != this.l && (this.l = parseInt(this.l)),
			("auto" != this.l && 0 != this.l) || this.left.css("display", "none"),
			(Brid.forceConfigLoad = !0),
			this.isMobile && this.playerDiv.css("display", "none"),
			(this.top = "3px"),
			this.isMobile && ((this.mar = "3%"), (this.top = "5px")),
			jQuery("#" + this.playerId).css({
				"margin-left": this.mar,
				"margin-right": this.mar,
				top: this.top,
			}),
			(this.escapeHtml = function (e) {
				return e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
			});
		var r = this;
		return (
			(this.loadWidget = function (e) {
				if (e.items > 0) {
					e.items > e.limit ? (this.videoLength = e.limit) : (this.videoLength = e.items), (r.data = e);
					var t = "",
						i = 0;
					for (var a in e) {
						var s = e[a];
						if ("object" == typeof s) {
							var o = s.title,
								n = o.substring(0, 40);
							o.length > 40 && (n += "..."), ("" != s.image && null != s.image) || (s.image = r.noImage), 1 == r.config.playlistType || 2 == r.config.playlistType ? (1 == e.length ? (i = 0) : i++, (t += '<div class="bridWidgetThumb" title="' + this.escapeHtml(s.title) + '" data-index="' + i + '"><div class="brid-widget-black" style="width:' + r.thumbWidth + "px;height:" + r.thumbHeight + 'px;"></div><img src="' + r.pluginUrl + 'img/smallplay.svg" onerror="' + r.pluginUrl + 'img/thumb_404.png" class="bridWidgetSmallPlay"><div class="brid-widget-title">' + n + '</div><div class="brid-widget-time">' + r.toHHMMSS(s.duration) + '</div><img class="snapshot" src="' + s.poster + '" width="' + r.thumbWidth + 'px" height="' + r.thumbHeight + '"/></div>')) : ((t += '<div class="bridWidgetThumb" title="' + this.escapeHtml(s.title) + '" data-index="' + i + '"><div class="brid-widget-black" style="width:' + r.thumbWidth + "px;height:" + r.thumbHeight + 'px;"></div><img src="' + r.pluginUrl + 'img/smallplay.svg" onerror="' + r.pluginUrl + 'img/thumb_404.png" class="bridWidgetSmallPlay"><div class="brid-widget-title">' + n + '</div><div class="brid-widget-time">' + r.toHHMMSS(s.duration) + '</div><img class="snapshot" src="' + s.thumbnail + '" width="' + r.thumbWidth + 'px" height="' + r.thumbHeight + 'px"/></div>'), i++);
						}
					}
					r.bridWidgetPlaylist.append(t);
				} else null != data.Video.name && ((s = data.Video), r.bridWidgetPlaylist.append('<div class="bridWidgetThumb" title="' + this.escapeHtml(s.title) + '" data-index="' + a + '"><div class="brid-widget-black" style="width:' + r.thumbWidth + "px;height:" + r.thumbHeight + 'px;"></div><img src="' + r.pluginUrl + 'img/smallplay.svg" onerror="' + r.pluginUrl + 'img/thumb_404.png" class="bridWidgetSmallPlay"><div class="brid-widget-title">' + s.name + '</div><div class="brid-widget-time">' + r.toHHMMSS(s.duration) + '</div><img class="snapshot" src="' + s.image + '" width="' + r.thumbWidth + 'px" height="' + r.thumbHeight + 'px"/></div>'));
				r.repaint(), r.isMobile ? r.organizeThumbsMobile(r) : r.organizeThumbsDesktop(r), r.bridWidgetPlaylist.show(), r.playlist.fadeIn();
			}),
			(this.playerReady = function (e) {
				$bp(r.playerId).add("adStart", r.onAdStart), $bp(r.playerId).add("adEnd", r.onAdEnd), r.loadWidget(this.videos);
			}),
			(this.initPlayer = function () {
				this.player = $bp(this.playerId, this.playerConfig, this.playerReady);
			}),
			(this.thumbClickMobile = function (e) {
				if ($bp(r.playerId).getAdInProgress()) return !1;
				var t = (3 * r.bridWidgetPlaylist.width()) / 100,
					i = r.thumbWidth - 30 + t;
				r.bridWidgetCheck.css({
					height: "30px",
					left: i,
				});
				var a = jQuery(".bridWidgetThumb").css("margin-left");
				jQuery(r.player).hide(),
					r.bridWidgetPlaylist.find(".bridWidgetThumb").each(function (e, t) {
						jQuery(t).css("visibility", "visible");
					}),
					r.bridWidgetEmbed.hide(),
					r.closeDiv.hide(),
					r.bridWidgetShares.hide(),
					(r.nn = !1),
					(r.cd = !1);
				var s = parseInt(jQuery(this).attr("data-index"));
				1 == r.config.playlistType && (s -= 1);
				var o = jQuery(this).position().top;
				r.bridWidgetCheck.css({
					background: 'url("' + r.pluginUrl + '/img/wp_parts/CheckBox.svg")no-repeat center',
					top: o,
				}),
					r.bridWidgetCheck.attr("data-index", s),
					(r.playIndex = s),
					jQuery(this).css("visibility", "hidden"),
					r.playerDiv.css({
						width: r.thumbWidth,
						height: r.thumbHeight,
						position: "absolute",
						top: o,
						display: "block",
						"z-index": "2",
						"margin-left": a,
					}),
					$bp(r.playerId).playByIndex(s),
					$bp(r.playerId).onResize(),
					r.bridWidgetCheck.css("display", "block");
			}),
			(this.thumbClick = function (e) {
				var t = parseInt(jQuery(this).attr("data-index"));
				if ($bp(e.data.playerId).getAdInProgress()) return !1;
				$bp(e.data.playerId).playByIndex(t);
			}),
			(this.toHHMMSS = function (e) {
				null == e && (e = 0), (e = parseInt(e));
				var t = Math.floor(e / 3600),
					i = Math.floor((e - 3600 * t) / 60),
					a = e - 3600 * t - 60 * i;
				return t < 10 && (t = "0" + t), i < 10 && (i = "0" + i), a < 10 && (a = "0" + a), ("00" != t ? t + ":" : "") + i + ":" + a;
			}),
			(this.goLeft = function (e) {
				if (("auto" == r.l && (r.l = 0), r.l >= 0)) return !1;
				0 == r.rightVisible && (r.right.css("display", "block"), (r.rightVisible = !0));
				var t = r.l + (r.playlistWidth + r.config.offset);
				(r.l = t > 0 ? r.l + Math.abs(r.l) : r.l + r.playlistWidth + r.config.offset),
					r.l >= 0 && (r.left.css("display", "none"), (r.leftVisible = !1)),
					r.bridWidgetPlaylist.animate(
						{
							left: r.l,
						},
						"normal",
						function () {}
					);
			}),
			this.left.on("click", this, this.goLeft),
			(this.goRight = function (e) {
				if (("auto" == r.l && (r.l = 0), Math.abs(r.l - r.playlistWidth) >= r.bridWidgetPlaylistWidth)) return !1;
				r.left.css("display", "block"), (r.leftVisible = !0), r.hoverVisible();
				var t = r.l - (r.playlistWidth + r.config.offset);
				(r.widthLeft = r.bridWidgetPlaylistWidth - Math.abs(t)),
					r.widthLeft <= r.playlistWidth ? ((r.l = r.l - r.widthLeft - r.config.offset - r.correctedThumbNum * (r.errorPixel / 2)), r.right.css("display", "none"), (r.rightVisible = !1)) : ((r.l = r.l - r.playlistWidth), (r.l = r.l - r.config.offset)),
					r.bridWidgetPlaylist.animate(
						{
							left: r.l,
						},
						"normal",
						function () {}
					);
			}),
			this.right.on("click", this, this.goRight),
			(this.onAdStart = function (e) {
				jQuery(r.bridWidgetCheck).css("display", "none");
			}),
			(this.onAdEnd = function (e) {
				jQuery(r.bridWidgetCheck).css("display", "block");
			}),
			(this.smallPlayIcon = function () {
				var e = (r.thumbHeight - 50) / 2,
					t = (r.thumbWidth - 50) / 2;
				r.bridWidget.find(".bridWidgetSmallPlay").css({
					top: e + "px",
					left: t + "px",
					display: "block",
				});
			}),
			(this.refresh = function (e) {
				r.myScroll.refresh();
			}),
			(this.thumbChecked = function (e) {
				e.stopPropagation(), r.bridWidgetShares.css("display", "none"), r.bridWidgetEmbed.css("display", "none"), r.closeDiv.css("display", "none"), jQuery(r.bridWidgetCheck).css("background", 'url("' + r.pluginUrl + '/img/wp_parts/CheckBox.svg")no-repeat center');
				var t = jQuery(this).attr("data-index");
				t != r.datai && ((r.n = !1), (r.datai = t)),
					0 == r.n ? (jQuery(this).css("background", 'url("' + r.pluginUrl + '/img/wp_parts/CheckBox_State_2.svg")no-repeat center'), r.bridWidgetShares.css("display", "block"), (r.n = !0)) : (jQuery(this).css("background-color", 'url("' + r.pluginUrl + '/img/wp_parts/CheckBox.svg")no-repeat center'), r.bridWidgetShares.css("display", "none"), (r.n = !1)),
					r.bridWidgetShares.find(".BridWShare").each(function (e, i) {
						jQuery(i).attr("data-val", t);
					}),
					"none" == r.bridWidgetWrapper.find(".iScrollIndicator").css("display") && (r.bridWidgetShares.css("width", "100%"), r.bridWidgetEmbed.css("width", "89%"), r.closeDiv.css("right", "1px"));
			}),
			(this.closeEmbed = function () {
				r.bridWidgetEmbed.css("display", "none"), (r.nn = !1), r.closeDiv.css("display", "none"), (r.cd = !1);
			}),
			(this.shareClick = function (e) {
				var t = jQuery(this).attr("data-index"),
					i = jQuery(this).attr("data-val"),
					a = r.bridWidgetPlaylist.find(".bridWidgetThumb")[i],
					s = jQuery(a).attr("title"),
					o = r.data[i].description,
					n = r.data[i].id,
					l = (Brid.Util.isDev() ? "http://dev." : "https://") + "btv.social/" + n + "_" + r.config.playerId,
					d = "";
				switch (parseInt(t)) {
					case 0:
						(l += "/#fb"), (d = "http://www.facebook.com/sharer/sharer.php?u=" + (l = encodeURIComponent(l)) + "&title=" + s + "&summary=" + o);
						break;
					case 1:
						(l += "/#tw"), (d = "http://twitter.com/home?status=" + s + ": " + (l = encodeURIComponent(l)));
						break;
					case 2:
						d = "https://plus.google.com/share?hl=en&url=" + (l += "/#gp");
						break;
					case 3:
						(l += "/#rd"), (d = "http://www.reddit.com/submit?title= " + s + "&text=" + o + "&url=" + (l = encodeURIComponent(l)));
						break;
					case 4:
						r.embed.val(""),
							(l += "/#cp"),
							r.bridWidgetEmbed.css({
								display: "block",
								width: "94%",
							}),
							(r.nn = !0),
							r.closeDiv.css({
								display: "block",
								right: "0",
								width: "7%",
							}),
							(r.cd = !0),
							r.embed.val(l),
							r.embed.select();
						break;
					case 5:
						r.embed.val(""),
							r.bridWidgetEmbed.css({
								display: "block",
								width: "94%",
							}),
							(r.nn = !0),
							r.closeDiv.css({
								display: "block",
								right: "0",
								width: "7%",
							}),
							(r.cd = !0);
						var c = "";
						if ((r.data[i].externalVideo && (n = '{ "src": "' + dataVideo[i].currentSrc() + '", "name": "' + s + '", "image": "' + data[i].poster + '"}'), r.config.yt))
							for (var u in r.data)
								if ((a = r.data[u]).external_url && -1 != a.external_url.indexOf("youtube")) {
									c = ', "yt" : { "src": "' + a.src + '", "name": "' + a.title + '", "image": "' + a.poster + '"}';
									break;
								}
						var h = '<script type="text/javascript" src="http://' + document.loadFromHost + '/player/build/brid.min.js"></script><div id="' + r.playerId + '" class="brid" itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><div id="' + r.playerId + '_adContainer">Initialize ads</div></div><script type="text/javascript"> $bp("' + r.playerId + '", {"id":"' + r.config.playerId + '"' + c + ', "width":"' + r.thumbWidth + '","height":"' + r.thumbHeight + '","video":"' + n + '", "autoplay":0,"shared":true});</script><script type="text/javascript" src="http://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>';
						r.embed.val(h), r.embed.select();
				}
				t < 4 && window.open(d, "PopUpWindow", "width=300,height=200,toolbar=no,scrollbars=yes");
			}),
			(this.organizeThumbsMobile = function (e) {
				e.smallPlayIcon(),
					e.bridWidgetCheck.each(function (t, i) {
						jQuery(i).on("tap", e, e.thumbChecked);
					}),
					e.bridWidgetPlaylist.find(".bridWidgetThumb").each(function (t, i) {
						jQuery(i).on("tap", e, e.thumbClickMobile),
							jQuery(i).css({
								display: "block",
								"margin-bottom": "10px",
								"margin-left": "3%",
							});
					}),
					e.bridWidgetShares.find(".BridWShare").each(function (t, i) {
						jQuery(i).attr("data-index", t), jQuery(i).on("tap", e, e.shareClick);
					}),
					e.bridWidget.find(".bridWidgetThumb").each(function (t, i) {
						jQuery(i).css("height", e.thumbHeight), jQuery(i).css("width", e.thumbWidth);
					}),
					e.closeDiv.on("tap", e.closeEmbed),
					jQuery(document).on("click", ".embed", function () {
						this.select();
					});
				var t = e.playlist.attr("id");
				if ((e.thumbHeight, e.videoLength, e.videoLength, e.isMobile)) {
					var i = document.getElementById(t);
					(e.myScroll = new IScroll(i, {
						scrollbars: !0,
						resizeScrollbars: !0,
						interactiveScrollbars: !0,
						preventDefaultException: {
							tagName: /^(svg|path|rect|circle)$/,
						},
					})),
						e.myScroll.on("beforeScrollStart", e.refresh);
				}
				jQuery(window).resize(function () {
					e.resizeMobile();
				});
			}),
			(this.resizeMobile = function () {
				(r.thumbWidth = (9 * r.bridWidget.width()) / 10),
					(r.thumbHeight = (r.ratioH * r.thumbWidth) / r.ratioW),
					r.bridWidget.find(".bridWidgetThumb").each(function (e, t) {
						jQuery(t).css({
							width: r.thumbWidth,
							height: r.thumbHeight,
						});
					}),
					r.bridWidget.find(".bridWidgetThumb .snapshot").each(function (e, t) {
						jQuery(t).css({
							width: r.thumbWidth,
							height: r.thumbHeight,
						});
					}),
					r.smallPlayIcon();
				var e = r.bridWidgetPlaylist.find(".bridWidgetThumb")[r.playIndex],
					t = (3 * r.bridWidgetPlaylist.width()) / 100,
					i = r.thumbWidth - 30 + t;
				if ("none" != r.playerDiv.css("display")) {
					var a = jQuery(e).position().top;
					r.bridWidgetCheck.css({
						top: a,
						left: i,
					}),
						r.playerDiv.css({
							top: a,
						}),
						$bp(r.playerId).onResize(!0, r.thumbWidth, r.thumbHeight);
				}
			}),
			(this.organizeThumbsDesktop = function (e) {
				(1 != e.config.playlistType && 2 != e.config.playlistType) || (e.videoLength = e.videoLength), e.config.playlistType;
				var t = e.config.offset / 2;
				(e.bridWidgetPlaylistWidth = e.videoLength * (e.thumbWidth + 2 * t)), (e.bridWidgetPlaylistWidth -= 10), e.bridWidgetPlaylistWidth <= e.playlistWidth && (e.left.css("display", "none"), e.right.css("display", "none"), (e.leftVisible = !1), (e.rightVisible = !1), e.playlist.css("text-align", "center"));
				var i = 1,
					a = e.width - ((e.config.thumbNumber - 1) * e.config.offset + e.config.thumbNumber * e.thumbWidth);
				(e.errorPixel = a),
					e.bridWidgetPlaylist.find(".bridWidgetThumb").each(function (s, r) {
						var o = (e.thumbHeight - e.smallplayHeight) / 2,
							n = (e.thumbWidth - e.smallplayWidth) / 2;
						if (
							(jQuery(r)
								.find(".bridWidgetSmallPlay")
								.css({
									width: e.smallplayWidth,
									height: e.smallplayHeight,
									top: o + "px",
									left: n + "px",
									display: "none",
								}),
							jQuery(r).css({
								width: e.thumbWidth,
								height: e.thumbHeight,
							}),
							jQuery(r).find(".snapshot").css({
								width: e.thumbWidth,
								height: e.thumbHeight,
							}),
							jQuery(r).find(".brid-widget-black").css({
								width: e.thumbWidth,
								height: e.thumbHeight,
								display: "block",
							}),
							e.thumbWidth < 130 && jQuery(r).find(".brid-widget-title").css("visibility", "hidden"),
							jQuery(r)
								.css("margin-left", t + "px")
								.css("margin-right", t + "px"),
							0 == s && jQuery(r).css("margin-left", "0px"),
							2 != e.config.thumbNumber && s == i)
						) {
							e.correctedThumbNum++, (i += e.config.thumbNumber);
							var l = a / 2,
								d = parseInt(jQuery(r).css("margin-left"));
							1 == s && jQuery(r).css("margin-left", d + l + "px"), jQuery(r).css("margin-right", d + l + "px");
						}
						s == e.videoLength - 1 && jQuery(r).css("margin-right", "0"),
							jQuery(r).on("click", e, e.thumbClick),
							jQuery(r).hover(
								function () {
									e.thumbOver(r);
								},
								function () {
									e.thumbOut(r);
								}
							),
							jQuery(r).css({
								display: "inline-block",
							});
					}),
					(e.thumbOver = function (e) {
						jQuery(e).find(".brid-widget-black").hide(), jQuery(e).find(".bridWidgetSmallPlay").show(), jQuery(e).find(".brid-widget-title").fadeOut("fast");
					}),
					(e.thumbOut = function (e) {
						jQuery(e).find(".brid-widget-black").show(), jQuery(e).find(".bridWidgetSmallPlay").hide(), jQuery(e).find(".brid-widget-title").fadeIn("fast");
					}),
					(e.hoverVisible = function () {
						e.leftVisible && (e.left.removeClass("leftOut"), e.left.addClass("leftIn")), e.rightVisible && (jQuery(e.right).fadeIn("slow"), e.right.removeClass("rightOut"), e.right.addClass("rightIn")), clearTimeout(e.foTimeOut);
					}),
					(e.hoverHidden = function () {
						e.foTimeOut = setTimeout(function () {
							e.left.removeClass("leftIn"), e.right.removeClass("rightIn"), e.left.addClass("leftOut"), e.right.addClass("rightOut");
						}, 1e3);
					}),
					jQuery(e.playlist).hover(e.hoverVisible, e.hoverHidden),
					jQuery(e.left).hover(e.hoverVisible, e.hoverHidden),
					jQuery(e.right).hover(e.hoverVisible, e.hoverHidden);
				var s = e.bridWidgetPlaylistWidth;
				e.config.thumbNumber > e.videoLength && (s = e.videoLength * (e.thumbWidth + e.config.offset)),
					e.correctedThumbNum > 0 && (s += e.correctedThumbNum * e.errorPixel),
					e.bridWidgetPlaylist.css({
						width: s + "px",
						"max-width": s + "px",
						height: e.thumbHeight,
					});
			}),
			(this.execute = function (e, t) {
				this[e].call(this, t);
			}),
			r.initPlayer(),
			this
		);
	};
if (null == window.$BridWidgets)
	var $BridWidgets = {
		widgets: [],
		done: !1,
		checkFlag: !1,
		scripts: {
			brid: {
				type: "text/javascript",
				src: "/player/build/brid.min.js",
				state: !1,
				appendPath: !0,
				loading: !1,
			},
			jquery: {
				type: "text/javascript",
				src: "//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js",
				state: !1,
				loading: !1,
			},
			mobile: {
				type: "text/javascript",
				src: "//code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js",
				state: !1,
				loading: !1,
			},
			iscroll: {
				type: "text/javascript",
				src: "//cdn.brid.tv/live/widget/js/iscroll.js",
				state: !1,
				loading: !1,
			},
		},
		maxLoadAttempts: 50,
		maxIntervalLoop: 100,
		isMob: !1,
		counter: 0,
		confs: [],
		head: null,
		path: null,
		loadBrid: function (e) {
			$BridWidgets.scripts.brid.state || $BridWidgets.scripts.brid.loading || ($BridWidgets.loadScript("brid", e, "init"), setTimeout($BridWidgets.loadBrid, 100, e));
		},
		getPath: function () {
			if ((document.loadFromHost && ($BridWidgets.path = document.loadFromHost), null != $BridWidgets.path)) return $BridWidgets.path;
			var e = document.querySelector('script[src$="brid.admin.widget.js"]');
			null == e && (e = document.querySelector('script[src$="brid.widget.js"]'));
			var t = e.src.split("//");
			return (t = t[1].split("/")), ($BridWidgets.path = t[0]), t[0];
		},
		loadScript: function (e, t, i) {
			var a = $BridWidgets.createScript(e);
			($BridWidgets.scripts[e].loading = !0),
				(a.onload = a.onreadystatechange =
					function (a) {
						(this.readyState && "loaded" != this.readyState && "complete" != this.readyState) || (($BridWidgets.scripts[e].state = !0), ($BridWidgets.scripts[e].loading = !1), null != i && $BridWidgets[i].call($BridWidgets, t));
					}),
				$BridWidgets.head.appendChild(a);
		},
		init: function (e) {
			if ((null == $BridWidgets.head && ($BridWidgets.head = document.getElementsByTagName("head")[0]), null != e && null != e.id && null == this.confs[e.id] && (this.confs[e.id] = e), null == window.$bp && !this.scripts.brid.state)) return $BridWidgets.loadBrid(e), !1;
			if (((this.scripts.brid.state = !0), window.jQuery)) {
				var t = parseFloat(jQuery.fn.jquery),
					i = t.toString();
				if ((t >= 1.7 || "1.10" == i || "1.11" == i || "1.12" == i) && !$BridWidgets.scripts.jquery.loading && ((this.scripts.jquery.state = !0), this.isMobile(), !jQuery.browser.mobile)) return void $BridWidgets.callWidget(!1);
			}
			return this.scripts.jquery.state || $BridWidgets.scripts.jquery.loading ? (this.scripts.jquery.state && this.scripts.brid.state && (this.isMobile(), !jQuery.browser.mobile) ? ($BridWidgets.callWidget(!1), !0) : (this.scripts.jquery.state && !this.scripts.mobile.state && jQuery.browser.mobile && !$BridWidgets.scripts.mobile.loading && ((this.isMob = !0), null == jQuery.mobile ? $BridWidgets.loadScript("mobile", e, null) : (this.scripts.mobile.state = !0), this.scripts.jquery.state && !this.scripts.iscroll.state && $BridWidgets.loadScript("iscroll", e, null), ($BridWidgets.scripts.mobile.loading = !0)), void (!this.checkFlag && this.isMob && ((this.checkFlag = !0), setTimeout($BridWidgets.timeout, $BridWidgets.maxIntervalLoop, e))))) : (($BridWidgets.scripts.jquery.loading = !0), $BridWidgets.loadScript("jquery", e, "init"), !1);
		},
		createScript: function (e) {
			var t = document.createElement("script");
			return null != $BridWidgets.scripts[e].appendPath && ($BridWidgets.scripts[e].src = "//" + $BridWidgets.getPath() + $BridWidgets.scripts[e].src), (t.src = $BridWidgets.scripts[e].src), (t.type = $BridWidgets.scripts[e].type), (t.state = $BridWidgets.scripts[e].state), t;
		},
		callWidget: function (e) {
			var t = null;
			if (e) (t = jQuery("#" + e.id)), widgets.push(new $BridWidget(t, e));
			else
				for (var i in $BridWidgets.confs) {
					var a = !1;
					for (var s in $BridWidgets.widgets)
						if (null != $BridWidgets.widgets[s].config && null != $BridWidgets.widgets[s].config.id && $BridWidgets.widgets[s].config.id == i) {
							a = !0;
							break;
						}
					if (!a) {
						t = jQuery("#" + $BridWidgets.confs[i].id);
						var r = new $BridWidget(t, $BridWidgets.confs[i]);
						$BridWidgets.widgets.push(r);
					}
				}
			this.isMob && jQuery.mobile.loading().hide();
		},
		timeout: function (e) {
			$BridWidgets.counter++, $BridWidgets.counter != $BridWidgets.maxLoadAttempts ? ($BridWidgets.scripts.jquery.state && $BridWidgets.scripts.mobile.state && $BridWidgets.scripts.iscroll.state ? (($BridWidgets.done = !0), $BridWidgets.callWidget(!1)) : setTimeout($BridWidgets.timeout, $BridWidgets.maxIntervalLoop, e)) : jQuery(document).find(".bridPlaylistWidget").append('<p style="color:#ff0000;">Error: Widget cannot be loaded.</p>');
		},
		isMobile: function () {
			var e;
			(e = navigator.userAgent || navigator.vendor || window.opera),
				((jQuery.browser = jQuery.browser || {}).mobile =
					/(android|bb\d+|meego).+mobile|Tablet|iphone|ipad|ipod|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e) ||
					/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0, 4)));
			var t = navigator.userAgent.toLowerCase().indexOf("nexus 7"),
				i = navigator.userAgent.toLowerCase().indexOf("nexus 10");
			(-1 == t && -1 == i) || (jQuery.browser.mobile = !0);
		},
		widget: function (e) {
			for (var t in $BridWidgets.widgets) if ($BridWidgets.widgets[t].uniqueId == e) return this.widgets[t];
			return null;
		},
	};
var saveObj = {
		init: function () {
			debug.log("Save Obejct init");
			var e = this;
			acceptEmptyTags = false;
			return (
				jQuery(".saveButton").each(function () {
					var t = jQuery(this),
						i = (t.attr("id"), t.attr("data-mode") || null),
						a = t.closest("form").attr("id"),
						s = null == t.attr("data-form-bind") ? 1 : parseInt(t.attr("data-form-bind")),
						r = null == t.attr("data-form-req") ? 1 : parseInt(t.attr("data-form-req"));
					s &&
						(t.unbind("click"),
						t.bind("click", function () {
							t.hasClass("inprogress") ? (e.openRequiredDialog(a, "Save in progress", "Save is disabled"), debug.error("Save is in progress! No duplicate save clicks!")) : t.hasClass("disabled") ? (r ? (e.openRequiredDialog(a, "Please check that the required fields are not empty.<br /> Ensure proper format for fields.", "Save is disabled"), debug.warn("Save is disabled! Check are there any mandatory fields left empty.", "Autorequired:" + r, "Autobind:" + s)) : debug.error("You have sent Autorequred check attribute to be disabled, handle openDialog yourself!!!")) : (t.addClass("inprogress"), e.save(a, i));
						})),
						r &&
							jQuery("#" + a)
								.find(".required")
								.each(function (t, i) {
									jQuery(this)
										.find("input, textarea")
										.input(function () {
											debug.log("Autobind input element for form id:" + a + " - " + jQuery(this).attr("id")), e.toggleSave(a);
										});
								});
				}),
				this
			);
		},
		getValidationMsg: function (e) {
			var t = "",
				i = new Array();
			if (null == e) throw "Invalid argument supplied for save.getValidationMsg()";
			if (null != e.errors && null != e.errors.validation)
				for (var a in e.errors.validation)
					if ("object" == typeof e.errors.validation[a])
						for (var s in e.errors.validation[a])
							if ("object" == typeof e.errors.validation[a][s]) for (var r in e.errors.validation[a][s]) i.indexOf(e.errors.validation[a][s][r][0]) < 0 && ((t += " " + e.errors.validation[a][s][r] + "<br/>"), i.push(e.errors.validation[a][s][r][0]));
							else i.indexOf(e.errors.validation[a][s][0]) < 0 && ((t += " " + e.errors.validation[a][s] + "<br/>"), i.push(e.errors.validation[a][s][0]));
					else i.indexOf(e.errors.validation[a][0]) < 0 && ((t += " " + e.errors.validation[a] + "<br/>"), i.push(e.errors.validation[a][0]));
			return t.replace("<br/>", " ");
		},
		save: function (e, t, i) {
			var tagsAlert = jQuery(".tagsAlert").val();
			var tagsValue = jQuery("input[name='tags']").val();

			if (tagsAlert == 1 && tagsValue == "" && acceptEmptyTags == false) {
				$Brid.Util.confirm({
					title: "Tags are empty",
					text: "Are you sure you want to continue?",
					yesFunction: function () {
						// User has accepted to save with empty tags
						acceptEmptyTags = true;
						// Close modal
						$Brid.Util.closeModalBox();
						// Save action
						jQuery(".saveButton").addClass("inprogress");
						var formId = jQuery(document).find("form.brid-video-form").attr("id");
						save.save(formId);
					},
					cancelFunction: () => {
						// Close modal
						$Brid.Util.closeModalBox();
						// Focus tag field
						jQuery("input[name='tags']").focus();
					},
				});

				jQuery(".saveButton").removeClass("inprogress disabled");
				jQuery("#autoSaving").hide();
				return false;
			}

			debug.log("Form id:", e, "Mode:", t), jQuery("#bridSpin").css("visibility", "visible");
			var a = jQuery("#" + e);
			var form = a;
			if ((0 == a.length && debug.error("Warrning: (Ko god da testira - ovo nije error) - Form does not exist!!! Check data-form-id attribute on your save button"), debug.log("Form", a), null != i)) var s = jQuery("#" + i);
			else s = jQuery("#" + e).find(".saveButton");
			0 == s.length && (debug.warn("No save button by form.id, try to search all document."), (s = jQuery(document).find(".saveButton"))), debug.log("Save obj:", s.length, e), debug.log("Save obj:", "data-method", s.attr("data-method"));
			var r = s.attr("data-method-before");
			null != r && $Brid.Util.executeCallback($Brid.Callbacks, r);
			var o = this,
				n = a.serialize(),
				l = a.attr("action") + (null != t ? t : "");
			(l = l.split("?", 1)),
				jQuery
					.ajax({
						url: l,
						data: n,
						type: "POST",
						beforeSend: function () {},
					})
					.done(function (e) {
						if ((debug.log("Save done?:", e), jQuery("#busy-indicator").hide(), s.removeClass("inprogress"), true != e.status)) {
							null != e.message && e.message;
							try {
								var t = jQuery.parseJSON(e);
								null != t.name && t.name;
							} catch (exception) {
								var error = "";
								for(var i in e.errors.validation) {
									error += e.errors.validation[i] + "<br>";
								}
								if(error == "") {
									error = "Please reload the page";
								}

								$Brid.Util.openDialog(error, "Something went wrong");
							}
							o.getValidationMsg(e), null != e.error && "string" == typeof e.error && e.error;

							//alert(e.message + o.getValidationMsg(e))
						} else {
							enableTabs();
							canLeave = true;
							console.log("-- save --");

							// Set video status message
							setStatus(e.data);
							// Remove old interval
							clearInterval(checkStatusInterval);
							// Set interval for ajax checking status
							checkStatusInterval = setInterval(checkVideoStatus, 5000, e.data.Video?.id);

							var i = s.find(".buttonLargeContent").html();
							s
								.find(".buttonLargeContent")
								.html("SAVED!")
								.delay(1e3)
								.queue(function (e) {
									//jQuery(this).html(i), e(), jQuery("#videoSaveAdd").hide(), jQuery("#playlistSaveAdd").hide(), jQuery("#copy_shortcode").show(), jQuery("#bridSpin").css("visibility", "hidden")
									jQuery(this).html(i), e(), jQuery("#autoSaving").hide(), jQuery("#playlistSaveAdd").hide(), jQuery("#copy_shortcode").show(), jQuery("#bridSpin").css("visibility", "hidden");
								}),
								debug.log("Save callback:", s.attr("data-method")),
								(s.ajaxResponse = e);

							$Brid.Util.executeCallback($Brid.Callbacks, s.attr("data-method"), s);
							var a = s.attr("data-callback");
							null != a && (e.callback = a);
							var r = s.attr("data-colorbox-close");
							if (e.redirect == null) {
								var redirect = form.attr("data-redirect");
								if (redirect != null) e.redirect = redirect;
							}

							if (((r = null == r || parseInt(r)), null != s.attr("data-redirect") && (e.redirect = null), null != e.redirect && null != e.callback)) {
								var n = null != e.callback ? e.callback : "insertContentVideos",
									l = "insertContentVideos" == n ? "Videos-content" : "Playlists-content";
								$Brid.Api.call({
									data: $Brid.Util.getRedirectUrl(e.redirect),
									callback: {
										after: {
											name: n,
											obj: jQuery("#" + l),
										},
									},
								});
							}
							if (null != e.data.Video && null != $BridWordpressConfig.Player) {
								var d = $Brid.Util.shortCode(e.data.Video.id, $BridWordpressConfig.Player.id, e.data.Video.name);
								var raw_embed = document.RAW_EMBED;
								if (raw_embed) {
									jQuery
										.ajax({
											method: "POST",
											url: "/wp-admin/admin-ajax.php?action=getRawEmbed",
											data: { shortcode: d },
										})
										.done(function (msg) {
											d = msg;
											jQuery("#brid_shortcode").val(d);
										});
								} else {
									jQuery("#brid_shortcode").val(d);
								}
							}
							"Video" in e.data && null != e.data.Video.external_id && null != e.data.Video.id && jQuery("td#td" + e.data.Video.external_id + " a").attr("data-id", e.data.Video.id);
							if (null != e.data.Adtag) {
								return;
							}
						}
					})
					.fail(function (e, t, i) {
						$Brid.Util.openDialog("Please reload the page", "Something went wrong");

						var a = jQuery.parseJSON(e.responseText);
						debug.log("Save FAIL response:", a, t, i),
							$Brid.Html.FlashMessage.show({
								msg: a.name,
								status: !1,
							});
					});
		},
		toggleSave: function (e) {
			debug.log("saveObj.toggleSave", e);
			var t = [];
			if (
				(jQuery("#" + e)
					.find(".required")
					.each(function (e, i) {
						t.push(jQuery(this).find("input, textarea").attr("id"));
					}),
				debug.log("saveObj.toggleSave", "Required:", t),
				jQuery(t).each(function (i, a) {
					if (
						"" !=
						jQuery("#" + e)
							.find("#" + a)
							.val()
					) {
						var s = t.indexOf(a);
						t.splice(s, 1);
					}
				}),
				debug.log("saveObj.toggleSave", "Required after checking values:", t),
				0 == t.length)
			)
				jQuery("#" + e)
					.find(".saveButton")
					.removeClass("disabled");
			else {
				var i = jQuery("#" + e).find(".saveButton");
				i.hasClass("disabled") || i.addClass("disabled");
			}
		},
		openRequiredDialog: function (e, t, i) {
			debug.log("openRequiredDialog", e, t, i);
			var a = "",
				s = [],
				r = jQuery("#" + e).find(".saveButton"),
				o = null == r.attr("data-form-req") ? 1 : parseInt(r.attr("data-form-req"));
			if ((debug.log(e), o)) {
				if (
					(jQuery("#" + e)
						.find(".required")
						.each(function (e, t) {
							jQuery(this)
								.find("input, textarea, select")
								.each(function (e, t) {
									var i = "";
									"ChannelIdUpload" != jQuery(this).attr("id") || isCategorySelected()
										? "" == jQuery(this).val() &&
										  ((i = jQuery(this)
												.attr("id")
												.split(/(?=[A-Z])/)),
										  s.push(i.join(" ")))
										: ((i = "Select category".split(/(?=[A-Z])/)), s.push(i.join(" ")));
								});
						}),
					debug.log("Req fields", s),
					s.length > 0)
				) {
					for (var n in ((a = "<br/><br/><p><h5>Notice:</h5></p>"), (a += '<p style="color:#939598;">Please make sure that these fields are filled correctly:</p>'), (a += '<ul class="requiredFieldsLightbox">'), s)) a += "<li>" + s[n] + "</li>";
					a += "</ul>";
				}
				s.length <= 0 &&
					jQuery("#" + e)
						.find(".saveButton")
						.removeClass("disabled");
			}
			$Brid.Util.openDialog(t + a, i);
		},
	},
	Handlebars = {};

function findPos(e) {
	var t = (curtop = 0);
	if (e.offsetParent) for (t = e.offsetLeft, curtop = e.offsetTop; (e = e.offsetParent); ) (t += e.offsetLeft), (curtop += e.offsetTop);
	return [curtop, t];
}
!(function (e, t) {
	(e.VERSION = "1.0.0"),
		(e.COMPILER_REVISION = 4),
		(e.REVISION_CHANGES = {
			1: "<= 1.0.rc.2",
			2: "== 1.0.0-rc.3",
			3: "== 1.0.0-rc.4",
			4: ">= 1.0.0",
		}),
		(e.helpers = {}),
		(e.partials = {});
	var i = Object.prototype.toString,
		a = "[object Function]",
		s = "[object Object]";
	(e.registerHelper = function (t, a, r) {
		if (i.call(t) === s) {
			if (r || a) throw new e.Exception("Arg not supported with multiple helpers");
			e.Utils.extend(this.helpers, t);
		} else r && (a.not = r), (this.helpers[t] = a);
	}),
		(e.registerPartial = function (t, a) {
			i.call(t) === s ? e.Utils.extend(this.partials, t) : (this.partials[t] = a);
		}),
		e.registerHelper("helperMissing", function (e) {
			if (2 === arguments.length) return t;
			throw new Error("Missing helper: '" + e + "'");
		}),
		e.registerHelper("blockHelperMissing", function (t, s) {
			var r = s.inverse || function () {},
				o = s.fn,
				n = i.call(t);
			return n === a && (t = t.call(this)), !0 === t ? o(this) : !1 === t || null == t ? r(this) : "[object Array]" === n ? (t.length > 0 ? e.helpers.each(t, s) : r(this)) : o(t);
		}),
		(e.K = function () {}),
		(e.createFrame =
			Object.create ||
			function (t) {
				e.K.prototype = t;
				var i = new e.K();
				return (e.K.prototype = null), i;
			}),
		(e.logger = {
			DEBUG: 0,
			INFO: 1,
			WARN: 2,
			ERROR: 3,
			level: 3,
			methodMap: {
				0: "debug",
				1: "info",
				2: "warn",
				3: "error",
			},
			log: function (t, i) {
				if (e.logger.level <= t) {
					var a = e.logger.methodMap[t];
					"undefined" != typeof console && console[a] && console[a].call(console, i);
				}
			},
		}),
		(e.log = function (t, i) {
			e.logger.log(t, i);
		}),
		e.registerHelper("each", function (t, s) {
			var r,
				o = s.fn,
				n = s.inverse,
				l = 0,
				d = "";
			if ((i.call(t) === a && (t = t.call(this)), s.data && (r = e.createFrame(s.data)), t && "object" == typeof t))
				if (t instanceof Array)
					for (var c = t.length; l < c; l++)
						r && (r.index = l),
							(d += o(t[l], {
								data: r,
							}));
				else
					for (var u in t)
						t.hasOwnProperty(u) &&
							(r && (r.key = u),
							(d += o(t[u], {
								data: r,
							})),
							l++);
			return 0 === l && (d = n(this)), d;
		}),
		e.registerHelper("if", function (t, s) {
			return i.call(t) === a && (t = t.call(this)), !t || e.Utils.isEmpty(t) ? s.inverse(this) : s.fn(this);
		}),
		e.registerHelper("unless", function (t, i) {
			return e.helpers.if.call(this, t, {
				fn: i.inverse,
				inverse: i.fn,
			});
		}),
		e.registerHelper("with", function (t, s) {
			if ((i.call(t) === a && (t = t.call(this)), !e.Utils.isEmpty(t))) return s.fn(t);
		}),
		e.registerHelper("log", function (t, i) {
			var a = i.data && null != i.data.level ? parseInt(i.data.level, 10) : 1;
			e.log(a, t);
		});
	var r = (function () {
		var e = {
				trace: function () {},
				yy: {},
				symbols_: {
					error: 2,
					root: 3,
					program: 4,
					EOF: 5,
					simpleInverse: 6,
					statements: 7,
					statement: 8,
					openInverse: 9,
					closeBlock: 10,
					openBlock: 11,
					mustache: 12,
					partial: 13,
					CONTENT: 14,
					COMMENT: 15,
					OPEN_BLOCK: 16,
					inMustache: 17,
					CLOSE: 18,
					OPEN_INVERSE: 19,
					OPEN_ENDBLOCK: 20,
					path: 21,
					OPEN: 22,
					OPEN_UNESCAPED: 23,
					CLOSE_UNESCAPED: 24,
					OPEN_PARTIAL: 25,
					partialName: 26,
					params: 27,
					hash: 28,
					dataName: 29,
					param: 30,
					STRING: 31,
					INTEGER: 32,
					BOOLEAN: 33,
					hashSegments: 34,
					hashSegment: 35,
					ID: 36,
					EQUALS: 37,
					DATA: 38,
					pathSegments: 39,
					SEP: 40,
					$accept: 0,
					$end: 1,
				},
				terminals_: {
					2: "error",
					5: "EOF",
					14: "CONTENT",
					15: "COMMENT",
					16: "OPEN_BLOCK",
					18: "CLOSE",
					19: "OPEN_INVERSE",
					20: "OPEN_ENDBLOCK",
					22: "OPEN",
					23: "OPEN_UNESCAPED",
					24: "CLOSE_UNESCAPED",
					25: "OPEN_PARTIAL",
					31: "STRING",
					32: "INTEGER",
					33: "BOOLEAN",
					36: "ID",
					37: "EQUALS",
					38: "DATA",
					40: "SEP",
				},
				productions_: [0, [3, 2], [4, 2], [4, 3], [4, 2], [4, 1], [4, 1], [4, 0], [7, 1], [7, 2], [8, 3], [8, 3], [8, 1], [8, 1], [8, 1], [8, 1], [11, 3], [9, 3], [10, 3], [12, 3], [12, 3], [13, 3], [13, 4], [6, 2], [17, 3], [17, 2], [17, 2], [17, 1], [17, 1], [27, 2], [27, 1], [30, 1], [30, 1], [30, 1], [30, 1], [30, 1], [28, 1], [34, 2], [34, 1], [35, 3], [35, 3], [35, 3], [35, 3], [35, 3], [26, 1], [26, 1], [26, 1], [29, 2], [21, 1], [39, 3], [39, 1]],
				performAction: function (e, t, i, a, s, r, o) {
					var n = r.length - 1;
					switch (s) {
						case 1:
							return r[n - 1];
						case 2:
							this.$ = new a.ProgramNode([], r[n]);
							break;
						case 3:
							this.$ = new a.ProgramNode(r[n - 2], r[n]);
							break;
						case 4:
							this.$ = new a.ProgramNode(r[n - 1], []);
							break;
						case 5:
							this.$ = new a.ProgramNode(r[n]);
							break;
						case 6:
							this.$ = new a.ProgramNode([], []);
							break;
						case 7:
							this.$ = new a.ProgramNode([]);
							break;
						case 8:
							this.$ = [r[n]];
							break;
						case 9:
							r[n - 1].push(r[n]), (this.$ = r[n - 1]);
							break;
						case 10:
							this.$ = new a.BlockNode(r[n - 2], r[n - 1].inverse, r[n - 1], r[n]);
							break;
						case 11:
							this.$ = new a.BlockNode(r[n - 2], r[n - 1], r[n - 1].inverse, r[n]);
							break;
						case 12:
						case 13:
							this.$ = r[n];
							break;
						case 14:
							this.$ = new a.ContentNode(r[n]);
							break;
						case 15:
							this.$ = new a.CommentNode(r[n]);
							break;
						case 16:
						case 17:
							this.$ = new a.MustacheNode(r[n - 1][0], r[n - 1][1]);
							break;
						case 18:
							this.$ = r[n - 1];
							break;
						case 19:
							this.$ = new a.MustacheNode(r[n - 1][0], r[n - 1][1], "&" === r[n - 2][2]);
							break;
						case 20:
							this.$ = new a.MustacheNode(r[n - 1][0], r[n - 1][1], !0);
							break;
						case 21:
							this.$ = new a.PartialNode(r[n - 1]);
							break;
						case 22:
							this.$ = new a.PartialNode(r[n - 2], r[n - 1]);
							break;
						case 23:
							break;
						case 24:
							this.$ = [[r[n - 2]].concat(r[n - 1]), r[n]];
							break;
						case 25:
							this.$ = [[r[n - 1]].concat(r[n]), null];
							break;
						case 26:
							this.$ = [[r[n - 1]], r[n]];
							break;
						case 27:
						case 28:
							this.$ = [[r[n]], null];
							break;
						case 29:
							r[n - 1].push(r[n]), (this.$ = r[n - 1]);
							break;
						case 30:
							this.$ = [r[n]];
							break;
						case 31:
							this.$ = r[n];
							break;
						case 32:
							this.$ = new a.StringNode(r[n]);
							break;
						case 33:
							this.$ = new a.IntegerNode(r[n]);
							break;
						case 34:
							this.$ = new a.BooleanNode(r[n]);
							break;
						case 35:
							this.$ = r[n];
							break;
						case 36:
							this.$ = new a.HashNode(r[n]);
							break;
						case 37:
							r[n - 1].push(r[n]), (this.$ = r[n - 1]);
							break;
						case 38:
							this.$ = [r[n]];
							break;
						case 39:
							this.$ = [r[n - 2], r[n]];
							break;
						case 40:
							this.$ = [r[n - 2], new a.StringNode(r[n])];
							break;
						case 41:
							this.$ = [r[n - 2], new a.IntegerNode(r[n])];
							break;
						case 42:
							this.$ = [r[n - 2], new a.BooleanNode(r[n])];
							break;
						case 43:
							this.$ = [r[n - 2], r[n]];
							break;
						case 44:
							this.$ = new a.PartialNameNode(r[n]);
							break;
						case 45:
							this.$ = new a.PartialNameNode(new a.StringNode(r[n]));
							break;
						case 46:
							this.$ = new a.PartialNameNode(new a.IntegerNode(r[n]));
							break;
						case 47:
							this.$ = new a.DataNode(r[n]);
							break;
						case 48:
							this.$ = new a.IdNode(r[n]);
							break;
						case 49:
							r[n - 2].push({
								part: r[n],
								separator: r[n - 1],
							}),
								(this.$ = r[n - 2]);
							break;
						case 50:
							this.$ = [
								{
									part: r[n],
								},
							];
					}
				},
				table: [
					{
						3: 1,
						4: 2,
						5: [2, 7],
						6: 3,
						7: 4,
						8: 6,
						9: 7,
						11: 8,
						12: 9,
						13: 10,
						14: [1, 11],
						15: [1, 12],
						16: [1, 13],
						19: [1, 5],
						22: [1, 14],
						23: [1, 15],
						25: [1, 16],
					},
					{
						1: [3],
					},
					{
						5: [1, 17],
					},
					{
						5: [2, 6],
						7: 18,
						8: 6,
						9: 7,
						11: 8,
						12: 9,
						13: 10,
						14: [1, 11],
						15: [1, 12],
						16: [1, 13],
						19: [1, 19],
						20: [2, 6],
						22: [1, 14],
						23: [1, 15],
						25: [1, 16],
					},
					{
						5: [2, 5],
						6: 20,
						8: 21,
						9: 7,
						11: 8,
						12: 9,
						13: 10,
						14: [1, 11],
						15: [1, 12],
						16: [1, 13],
						19: [1, 5],
						20: [2, 5],
						22: [1, 14],
						23: [1, 15],
						25: [1, 16],
					},
					{
						17: 23,
						18: [1, 22],
						21: 24,
						29: 25,
						36: [1, 28],
						38: [1, 27],
						39: 26,
					},
					{
						5: [2, 8],
						14: [2, 8],
						15: [2, 8],
						16: [2, 8],
						19: [2, 8],
						20: [2, 8],
						22: [2, 8],
						23: [2, 8],
						25: [2, 8],
					},
					{
						4: 29,
						6: 3,
						7: 4,
						8: 6,
						9: 7,
						11: 8,
						12: 9,
						13: 10,
						14: [1, 11],
						15: [1, 12],
						16: [1, 13],
						19: [1, 5],
						20: [2, 7],
						22: [1, 14],
						23: [1, 15],
						25: [1, 16],
					},
					{
						4: 30,
						6: 3,
						7: 4,
						8: 6,
						9: 7,
						11: 8,
						12: 9,
						13: 10,
						14: [1, 11],
						15: [1, 12],
						16: [1, 13],
						19: [1, 5],
						20: [2, 7],
						22: [1, 14],
						23: [1, 15],
						25: [1, 16],
					},
					{
						5: [2, 12],
						14: [2, 12],
						15: [2, 12],
						16: [2, 12],
						19: [2, 12],
						20: [2, 12],
						22: [2, 12],
						23: [2, 12],
						25: [2, 12],
					},
					{
						5: [2, 13],
						14: [2, 13],
						15: [2, 13],
						16: [2, 13],
						19: [2, 13],
						20: [2, 13],
						22: [2, 13],
						23: [2, 13],
						25: [2, 13],
					},
					{
						5: [2, 14],
						14: [2, 14],
						15: [2, 14],
						16: [2, 14],
						19: [2, 14],
						20: [2, 14],
						22: [2, 14],
						23: [2, 14],
						25: [2, 14],
					},
					{
						5: [2, 15],
						14: [2, 15],
						15: [2, 15],
						16: [2, 15],
						19: [2, 15],
						20: [2, 15],
						22: [2, 15],
						23: [2, 15],
						25: [2, 15],
					},
					{
						17: 31,
						21: 24,
						29: 25,
						36: [1, 28],
						38: [1, 27],
						39: 26,
					},
					{
						17: 32,
						21: 24,
						29: 25,
						36: [1, 28],
						38: [1, 27],
						39: 26,
					},
					{
						17: 33,
						21: 24,
						29: 25,
						36: [1, 28],
						38: [1, 27],
						39: 26,
					},
					{
						21: 35,
						26: 34,
						31: [1, 36],
						32: [1, 37],
						36: [1, 28],
						39: 26,
					},
					{
						1: [2, 1],
					},
					{
						5: [2, 2],
						8: 21,
						9: 7,
						11: 8,
						12: 9,
						13: 10,
						14: [1, 11],
						15: [1, 12],
						16: [1, 13],
						19: [1, 19],
						20: [2, 2],
						22: [1, 14],
						23: [1, 15],
						25: [1, 16],
					},
					{
						17: 23,
						21: 24,
						29: 25,
						36: [1, 28],
						38: [1, 27],
						39: 26,
					},
					{
						5: [2, 4],
						7: 38,
						8: 6,
						9: 7,
						11: 8,
						12: 9,
						13: 10,
						14: [1, 11],
						15: [1, 12],
						16: [1, 13],
						19: [1, 19],
						20: [2, 4],
						22: [1, 14],
						23: [1, 15],
						25: [1, 16],
					},
					{
						5: [2, 9],
						14: [2, 9],
						15: [2, 9],
						16: [2, 9],
						19: [2, 9],
						20: [2, 9],
						22: [2, 9],
						23: [2, 9],
						25: [2, 9],
					},
					{
						5: [2, 23],
						14: [2, 23],
						15: [2, 23],
						16: [2, 23],
						19: [2, 23],
						20: [2, 23],
						22: [2, 23],
						23: [2, 23],
						25: [2, 23],
					},
					{
						18: [1, 39],
					},
					{
						18: [2, 27],
						21: 44,
						24: [2, 27],
						27: 40,
						28: 41,
						29: 48,
						30: 42,
						31: [1, 45],
						32: [1, 46],
						33: [1, 47],
						34: 43,
						35: 49,
						36: [1, 50],
						38: [1, 27],
						39: 26,
					},
					{
						18: [2, 28],
						24: [2, 28],
					},
					{
						18: [2, 48],
						24: [2, 48],
						31: [2, 48],
						32: [2, 48],
						33: [2, 48],
						36: [2, 48],
						38: [2, 48],
						40: [1, 51],
					},
					{
						21: 52,
						36: [1, 28],
						39: 26,
					},
					{
						18: [2, 50],
						24: [2, 50],
						31: [2, 50],
						32: [2, 50],
						33: [2, 50],
						36: [2, 50],
						38: [2, 50],
						40: [2, 50],
					},
					{
						10: 53,
						20: [1, 54],
					},
					{
						10: 55,
						20: [1, 54],
					},
					{
						18: [1, 56],
					},
					{
						18: [1, 57],
					},
					{
						24: [1, 58],
					},
					{
						18: [1, 59],
						21: 60,
						36: [1, 28],
						39: 26,
					},
					{
						18: [2, 44],
						36: [2, 44],
					},
					{
						18: [2, 45],
						36: [2, 45],
					},
					{
						18: [2, 46],
						36: [2, 46],
					},
					{
						5: [2, 3],
						8: 21,
						9: 7,
						11: 8,
						12: 9,
						13: 10,
						14: [1, 11],
						15: [1, 12],
						16: [1, 13],
						19: [1, 19],
						20: [2, 3],
						22: [1, 14],
						23: [1, 15],
						25: [1, 16],
					},
					{
						14: [2, 17],
						15: [2, 17],
						16: [2, 17],
						19: [2, 17],
						20: [2, 17],
						22: [2, 17],
						23: [2, 17],
						25: [2, 17],
					},
					{
						18: [2, 25],
						21: 44,
						24: [2, 25],
						28: 61,
						29: 48,
						30: 62,
						31: [1, 45],
						32: [1, 46],
						33: [1, 47],
						34: 43,
						35: 49,
						36: [1, 50],
						38: [1, 27],
						39: 26,
					},
					{
						18: [2, 26],
						24: [2, 26],
					},
					{
						18: [2, 30],
						24: [2, 30],
						31: [2, 30],
						32: [2, 30],
						33: [2, 30],
						36: [2, 30],
						38: [2, 30],
					},
					{
						18: [2, 36],
						24: [2, 36],
						35: 63,
						36: [1, 64],
					},
					{
						18: [2, 31],
						24: [2, 31],
						31: [2, 31],
						32: [2, 31],
						33: [2, 31],
						36: [2, 31],
						38: [2, 31],
					},
					{
						18: [2, 32],
						24: [2, 32],
						31: [2, 32],
						32: [2, 32],
						33: [2, 32],
						36: [2, 32],
						38: [2, 32],
					},
					{
						18: [2, 33],
						24: [2, 33],
						31: [2, 33],
						32: [2, 33],
						33: [2, 33],
						36: [2, 33],
						38: [2, 33],
					},
					{
						18: [2, 34],
						24: [2, 34],
						31: [2, 34],
						32: [2, 34],
						33: [2, 34],
						36: [2, 34],
						38: [2, 34],
					},
					{
						18: [2, 35],
						24: [2, 35],
						31: [2, 35],
						32: [2, 35],
						33: [2, 35],
						36: [2, 35],
						38: [2, 35],
					},
					{
						18: [2, 38],
						24: [2, 38],
						36: [2, 38],
					},
					{
						18: [2, 50],
						24: [2, 50],
						31: [2, 50],
						32: [2, 50],
						33: [2, 50],
						36: [2, 50],
						37: [1, 65],
						38: [2, 50],
						40: [2, 50],
					},
					{
						36: [1, 66],
					},
					{
						18: [2, 47],
						24: [2, 47],
						31: [2, 47],
						32: [2, 47],
						33: [2, 47],
						36: [2, 47],
						38: [2, 47],
					},
					{
						5: [2, 10],
						14: [2, 10],
						15: [2, 10],
						16: [2, 10],
						19: [2, 10],
						20: [2, 10],
						22: [2, 10],
						23: [2, 10],
						25: [2, 10],
					},
					{
						21: 67,
						36: [1, 28],
						39: 26,
					},
					{
						5: [2, 11],
						14: [2, 11],
						15: [2, 11],
						16: [2, 11],
						19: [2, 11],
						20: [2, 11],
						22: [2, 11],
						23: [2, 11],
						25: [2, 11],
					},
					{
						14: [2, 16],
						15: [2, 16],
						16: [2, 16],
						19: [2, 16],
						20: [2, 16],
						22: [2, 16],
						23: [2, 16],
						25: [2, 16],
					},
					{
						5: [2, 19],
						14: [2, 19],
						15: [2, 19],
						16: [2, 19],
						19: [2, 19],
						20: [2, 19],
						22: [2, 19],
						23: [2, 19],
						25: [2, 19],
					},
					{
						5: [2, 20],
						14: [2, 20],
						15: [2, 20],
						16: [2, 20],
						19: [2, 20],
						20: [2, 20],
						22: [2, 20],
						23: [2, 20],
						25: [2, 20],
					},
					{
						5: [2, 21],
						14: [2, 21],
						15: [2, 21],
						16: [2, 21],
						19: [2, 21],
						20: [2, 21],
						22: [2, 21],
						23: [2, 21],
						25: [2, 21],
					},
					{
						18: [1, 68],
					},
					{
						18: [2, 24],
						24: [2, 24],
					},
					{
						18: [2, 29],
						24: [2, 29],
						31: [2, 29],
						32: [2, 29],
						33: [2, 29],
						36: [2, 29],
						38: [2, 29],
					},
					{
						18: [2, 37],
						24: [2, 37],
						36: [2, 37],
					},
					{
						37: [1, 65],
					},
					{
						21: 69,
						29: 73,
						31: [1, 70],
						32: [1, 71],
						33: [1, 72],
						36: [1, 28],
						38: [1, 27],
						39: 26,
					},
					{
						18: [2, 49],
						24: [2, 49],
						31: [2, 49],
						32: [2, 49],
						33: [2, 49],
						36: [2, 49],
						38: [2, 49],
						40: [2, 49],
					},
					{
						18: [1, 74],
					},
					{
						5: [2, 22],
						14: [2, 22],
						15: [2, 22],
						16: [2, 22],
						19: [2, 22],
						20: [2, 22],
						22: [2, 22],
						23: [2, 22],
						25: [2, 22],
					},
					{
						18: [2, 39],
						24: [2, 39],
						36: [2, 39],
					},
					{
						18: [2, 40],
						24: [2, 40],
						36: [2, 40],
					},
					{
						18: [2, 41],
						24: [2, 41],
						36: [2, 41],
					},
					{
						18: [2, 42],
						24: [2, 42],
						36: [2, 42],
					},
					{
						18: [2, 43],
						24: [2, 43],
						36: [2, 43],
					},
					{
						5: [2, 18],
						14: [2, 18],
						15: [2, 18],
						16: [2, 18],
						19: [2, 18],
						20: [2, 18],
						22: [2, 18],
						23: [2, 18],
						25: [2, 18],
					},
				],
				defaultActions: {
					17: [2, 1],
				},
				parseError: function (e, t) {
					throw new Error(e);
				},
				parse: function (e) {
					var t = [0],
						i = [null],
						a = [],
						s = this.table,
						r = "",
						o = 0,
						n = 0,
						l = 0;
					this.lexer.setInput(e), (this.lexer.yy = this.yy), (this.yy.lexer = this.lexer), (this.yy.parser = this), void 0 === this.lexer.yylloc && (this.lexer.yylloc = {});
					var d = this.lexer.yylloc;
					a.push(d);
					var c = this.lexer.options && this.lexer.options.ranges;
					"function" == typeof this.yy.parseError && (this.parseError = this.yy.parseError);
					for (var u, h, p, g, f, m, y, b, v, x, k = {}; ; ) {
						if (((p = t[t.length - 1]), this.defaultActions[p] ? (g = this.defaultActions[p]) : (null == u && ((x = void 0), "number" != typeof (x = this.lexer.lex() || 1) && (x = this.symbols_[x] || x), (u = x)), (g = s[p] && s[p][u])), void 0 === g || !g.length || !g[0])) {
							var w = "";
							if (!l) {
								for (m in ((v = []), s[p])) this.terminals_[m] && m > 2 && v.push("'" + this.terminals_[m] + "'");
								(w = this.lexer.showPosition ? "Parse error on line " + (o + 1) + ":\n" + this.lexer.showPosition() + "\nExpecting " + v.join(", ") + ", got '" + (this.terminals_[u] || u) + "'" : "Parse error on line " + (o + 1) + ": Unexpected " + (1 == u ? "end of input" : "'" + (this.terminals_[u] || u) + "'")),
									this.parseError(w, {
										text: this.lexer.match,
										token: this.terminals_[u] || u,
										line: this.lexer.yylineno,
										loc: d,
										expected: v,
									});
							}
						}
						if (g[0] instanceof Array && g.length > 1) throw new Error("Parse Error: multiple actions possible at state: " + p + ", token: " + u);
						switch (g[0]) {
							case 1:
								t.push(u), i.push(this.lexer.yytext), a.push(this.lexer.yylloc), t.push(g[1]), (u = null), h ? ((u = h), (h = null)) : ((n = this.lexer.yyleng), (r = this.lexer.yytext), (o = this.lexer.yylineno), (d = this.lexer.yylloc), l > 0 && l--);
								break;
							case 2:
								if (
									((y = this.productions_[g[1]][1]),
									(k.$ = i[i.length - y]),
									(k._$ = {
										first_line: a[a.length - (y || 1)].first_line,
										last_line: a[a.length - 1].last_line,
										first_column: a[a.length - (y || 1)].first_column,
										last_column: a[a.length - 1].last_column,
									}),
									c && (k._$.range = [a[a.length - (y || 1)].range[0], a[a.length - 1].range[1]]),
									void 0 !== (f = this.performAction.call(k, r, n, o, this.yy, g[1], i, a)))
								)
									return f;
								y && ((t = t.slice(0, -1 * y * 2)), (i = i.slice(0, -1 * y)), (a = a.slice(0, -1 * y))), t.push(this.productions_[g[1]][0]), i.push(k.$), a.push(k._$), (b = s[t[t.length - 2]][t[t.length - 1]]), t.push(b);
								break;
							case 3:
								return !0;
						}
					}
					return !0;
				},
			},
			t = {
				EOF: 1,
				parseError: function (e, t) {
					if (!this.yy.parser) throw new Error(e);
					this.yy.parser.parseError(e, t);
				},
				setInput: function (e) {
					return (
						(this._input = e),
						(this._more = this._less = this.done = !1),
						(this.yylineno = this.yyleng = 0),
						(this.yytext = this.matched = this.match = ""),
						(this.conditionStack = ["INITIAL"]),
						(this.yylloc = {
							first_line: 1,
							first_column: 0,
							last_line: 1,
							last_column: 0,
						}),
						this.options.ranges && (this.yylloc.range = [0, 0]),
						(this.offset = 0),
						this
					);
				},
				input: function () {
					var e = this._input[0];
					return (this.yytext += e), this.yyleng++, this.offset++, (this.match += e), (this.matched += e), e.match(/(?:\r\n?|\n).*/g) ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, (this._input = this._input.slice(1)), e;
				},
				unput: function (e) {
					var t = e.length,
						i = e.split(/(?:\r\n?|\n)/g);
					(this._input = e + this._input), (this.yytext = this.yytext.substr(0, this.yytext.length - t - 1)), (this.offset -= t);
					var a = this.match.split(/(?:\r\n?|\n)/g);
					(this.match = this.match.substr(0, this.match.length - 1)), (this.matched = this.matched.substr(0, this.matched.length - 1)), i.length - 1 && (this.yylineno -= i.length - 1);
					var s = this.yylloc.range;
					return (
						(this.yylloc = {
							first_line: this.yylloc.first_line,
							last_line: this.yylineno + 1,
							first_column: this.yylloc.first_column,
							last_column: i ? (i.length === a.length ? this.yylloc.first_column : 0) + a[a.length - i.length].length - i[0].length : this.yylloc.first_column - t,
						}),
						this.options.ranges && (this.yylloc.range = [s[0], s[0] + this.yyleng - t]),
						this
					);
				},
				more: function () {
					return (this._more = !0), this;
				},
				less: function (e) {
					this.unput(this.match.slice(e));
				},
				pastInput: function () {
					var e = this.matched.substr(0, this.matched.length - this.match.length);
					return (e.length > 20 ? "..." : "") + e.substr(-20).replace(/\n/g, "");
				},
				upcomingInput: function () {
					var e = this.match;
					return e.length < 20 && (e += this._input.substr(0, 20 - e.length)), (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(/\n/g, "");
				},
				showPosition: function () {
					var e = this.pastInput(),
						t = new Array(e.length + 1).join("-");
					return e + this.upcomingInput() + "\n" + t + "^";
				},
				next: function () {
					if (this.done) return this.EOF;
					var e, t, i, a, s;
					this._input || (this.done = !0), this._more || ((this.yytext = ""), (this.match = ""));
					for (var r = this._currentRules(), o = 0; o < r.length && (!(i = this._input.match(this.rules[r[o]])) || (t && !(i[0].length > t[0].length)) || ((t = i), (a = o), this.options.flex)); o++);
					return t
						? ((s = t[0].match(/(?:\r\n?|\n).*/g)) && (this.yylineno += s.length),
						  (this.yylloc = {
								first_line: this.yylloc.last_line,
								last_line: this.yylineno + 1,
								first_column: this.yylloc.last_column,
								last_column: s ? s[s.length - 1].length - s[s.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + t[0].length,
						  }),
						  (this.yytext += t[0]),
						  (this.match += t[0]),
						  (this.matches = t),
						  (this.yyleng = this.yytext.length),
						  this.options.ranges && (this.yylloc.range = [this.offset, (this.offset += this.yyleng)]),
						  (this._more = !1),
						  (this._input = this._input.slice(t[0].length)),
						  (this.matched += t[0]),
						  (e = this.performAction.call(this, this.yy, this, r[a], this.conditionStack[this.conditionStack.length - 1])),
						  this.done && this._input && (this.done = !1),
						  e || void 0)
						: "" === this._input
						? this.EOF
						: this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
								text: "",
								token: null,
								line: this.yylineno,
						  });
				},
				lex: function () {
					var e = this.next();
					return void 0 !== e ? e : this.lex();
				},
				begin: function (e) {
					this.conditionStack.push(e);
				},
				popState: function () {
					return this.conditionStack.pop();
				},
				_currentRules: function () {
					return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;
				},
				topState: function () {
					return this.conditionStack[this.conditionStack.length - 2];
				},
				pushState: function (e) {
					this.begin(e);
				},
				options: {},
				performAction: function (e, t, i, a) {
					switch (i) {
						case 0:
							return (t.yytext = "\\"), 14;
						case 1:
							if (("\\" !== t.yytext.slice(-1) && this.begin("mu"), "\\" === t.yytext.slice(-1) && ((t.yytext = t.yytext.substr(0, t.yyleng - 1)), this.begin("emu")), t.yytext)) return 14;
							break;
						case 2:
							return 14;
						case 3:
							return "\\" !== t.yytext.slice(-1) && this.popState(), "\\" === t.yytext.slice(-1) && (t.yytext = t.yytext.substr(0, t.yyleng - 1)), 14;
						case 4:
							return (t.yytext = t.yytext.substr(0, t.yyleng - 4)), this.popState(), 15;
						case 5:
							return 25;
						case 6:
							return 16;
						case 7:
							return 20;
						case 8:
						case 9:
							return 19;
						case 10:
							return 23;
						case 11:
							return 22;
						case 12:
							this.popState(), this.begin("com");
							break;
						case 13:
							return (t.yytext = t.yytext.substr(3, t.yyleng - 5)), this.popState(), 15;
						case 14:
							return 22;
						case 15:
							return 37;
						case 16:
						case 17:
							return 36;
						case 18:
							return 40;
						case 19:
							break;
						case 20:
							return this.popState(), 24;
						case 21:
							return this.popState(), 18;
						case 22:
							return (t.yytext = t.yytext.substr(1, t.yyleng - 2).replace(/\\"/g, '"')), 31;
						case 23:
							return (t.yytext = t.yytext.substr(1, t.yyleng - 2).replace(/\\'/g, "'")), 31;
						case 24:
							return 38;
						case 25:
						case 26:
							return 33;
						case 27:
							return 32;
						case 28:
							return 36;
						case 29:
							return (t.yytext = t.yytext.substr(1, t.yyleng - 2)), 36;
						case 30:
							return "INVALID";
						case 31:
							return 5;
					}
				},
				rules: [/^(?:\\\\(?=(\{\{)))/, /^(?:[^\x00]*?(?=(\{\{)))/, /^(?:[^\x00]+)/, /^(?:[^\x00]{2,}?(?=(\{\{|$)))/, /^(?:[\s\S]*?--\}\})/, /^(?:\{\{>)/, /^(?:\{\{#)/, /^(?:\{\{\/)/, /^(?:\{\{\^)/, /^(?:\{\{\s*else\b)/, /^(?:\{\{\{)/, /^(?:\{\{&)/, /^(?:\{\{!--)/, /^(?:\{\{![\s\S]*?\}\})/, /^(?:\{\{)/, /^(?:=)/, /^(?:\.(?=[}\/ ]))/, /^(?:\.\.)/, /^(?:[\/.])/, /^(?:\s+)/, /^(?:\}\}\})/, /^(?:\}\})/, /^(?:"(\\["]|[^"])*")/, /^(?:'(\\[']|[^'])*')/, /^(?:@)/, /^(?:true(?=[}\s]))/, /^(?:false(?=[}\s]))/, /^(?:-?[0-9]+(?=[}\s]))/, /^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/, /^(?:\[[^\]]*\])/, /^(?:.)/, /^(?:$)/],
				conditions: {
					mu: {
						rules: [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
						inclusive: !1,
					},
					emu: {
						rules: [3],
						inclusive: !1,
					},
					com: {
						rules: [4],
						inclusive: !1,
					},
					INITIAL: {
						rules: [0, 1, 2, 31],
						inclusive: !0,
					},
				},
			};

		function i() {
			this.yy = {};
		}
		return (e.lexer = t), (i.prototype = e), (e.Parser = i), new i();
	})();
	(e.Parser = r),
		(e.parse = function (t) {
			return t.constructor === e.AST.ProgramNode ? t : ((e.Parser.yy = e.AST), e.Parser.parse(t));
		}),
		(e.AST = {}),
		(e.AST.ProgramNode = function (t, i) {
			(this.type = "program"), (this.statements = t), i && (this.inverse = new e.AST.ProgramNode(i));
		}),
		(e.AST.MustacheNode = function (e, t, i) {
			(this.type = "mustache"), (this.escaped = !i), (this.hash = t);
			var a = (this.id = e[0]),
				s = (this.params = e.slice(1)),
				r = (this.eligibleHelper = a.isSimple);
			this.isHelper = r && (s.length || t);
		}),
		(e.AST.PartialNode = function (e, t) {
			(this.type = "partial"), (this.partialName = e), (this.context = t);
		}),
		(e.AST.BlockNode = function (t, i, a, s) {
			!(function (t, i) {
				if (t.original !== i.original) throw new e.Exception(t.original + " doesn't match " + i.original);
			})(t.id, s),
				(this.type = "block"),
				(this.mustache = t),
				(this.program = i),
				(this.inverse = a),
				this.inverse && !this.program && (this.isInverse = !0);
		}),
		(e.AST.ContentNode = function (e) {
			(this.type = "content"), (this.string = e);
		}),
		(e.AST.HashNode = function (e) {
			(this.type = "hash"), (this.pairs = e);
		}),
		(e.AST.IdNode = function (t) {
			this.type = "ID";
			for (var i = "", a = [], s = 0, r = 0, o = t.length; r < o; r++) {
				var n = t[r].part;
				if (((i += (t[r].separator || "") + n), ".." === n || "." === n || "this" === n)) {
					if (a.length > 0) throw new e.Exception("Invalid path: " + i);
					".." === n ? s++ : (this.isScoped = !0);
				} else a.push(n);
			}
			(this.original = i), (this.parts = a), (this.string = a.join(".")), (this.depth = s), (this.isSimple = 1 === t.length && !this.isScoped && 0 === s), (this.stringModeValue = this.string);
		}),
		(e.AST.PartialNameNode = function (e) {
			(this.type = "PARTIAL_NAME"), (this.name = e.original);
		}),
		(e.AST.DataNode = function (e) {
			(this.type = "DATA"), (this.id = e);
		}),
		(e.AST.StringNode = function (e) {
			(this.type = "STRING"), (this.original = this.string = this.stringModeValue = e);
		}),
		(e.AST.IntegerNode = function (e) {
			(this.type = "INTEGER"), (this.original = this.integer = e), (this.stringModeValue = Number(e));
		}),
		(e.AST.BooleanNode = function (e) {
			(this.type = "BOOLEAN"), (this.bool = e), (this.stringModeValue = "true" === e);
		}),
		(e.AST.CommentNode = function (e) {
			(this.type = "comment"), (this.comment = e);
		});
	var o = ["description", "fileName", "lineNumber", "message", "name", "number", "stack"];
	(e.Exception = function (e) {
		for (var t = Error.prototype.constructor.apply(this, arguments), i = 0; i < o.length; i++) this[o[i]] = t[o[i]];
	}),
		(e.Exception.prototype = new Error()),
		(e.SafeString = function (e) {
			this.string = e;
		}),
		(e.SafeString.prototype.toString = function () {
			return this.string.toString();
		});
	var n = {
			"&": "&amp;",
			"<": "&lt;",
			">": "&gt;",
			'"': "&quot;",
			"'": "&#x27;",
			"`": "&#x60;",
		},
		l = /[&<>"'`]/g,
		d = /[&<>"'`]/,
		c = function (e) {
			return n[e] || "&amp;";
		};
	e.Utils = {
		extend: function (e, t) {
			for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]);
		},
		escapeExpression: function (t) {
			return t instanceof e.SafeString ? t.toString() : null == t || !1 === t ? "" : ((t = t.toString()), d.test(t) ? t.replace(l, c) : t);
		},
		isEmpty: function (e) {
			return (!e && 0 !== e) || ("[object Array]" === i.call(e) && 0 === e.length);
		},
	};
	var u = (e.Compiler = function () {}),
		h = (e.JavaScriptCompiler = function () {});
	u.prototype = {
		compiler: u,
		disassemble: function () {
			for (var e, t, i, a = this.opcodes, s = [], r = 0, o = a.length; r < o; r++)
				if ("DECLARE" === (e = a[r]).opcode) s.push("DECLARE " + e.name + "=" + e.value);
				else {
					t = [];
					for (var n = 0; n < e.args.length; n++) "string" == typeof (i = e.args[n]) && (i = '"' + i.replace("\n", "\\n") + '"'), t.push(i);
					s.push(e.opcode + " " + t.join(" "));
				}
			return s.join("\n");
		},
		equals: function (e) {
			var t = this.opcodes.length;
			if (e.opcodes.length !== t) return !1;
			for (var i = 0; i < t; i++) {
				var a = this.opcodes[i],
					s = e.opcodes[i];
				if (a.opcode !== s.opcode || a.args.length !== s.args.length) return !1;
				for (var r = 0; r < a.args.length; r++) if (a.args[r] !== s.args[r]) return !1;
			}
			if (((t = this.children.length), e.children.length !== t)) return !1;
			for (i = 0; i < t; i++) if (!this.children[i].equals(e.children[i])) return !1;
			return !0;
		},
		guid: 0,
		compile: function (e, t) {
			(this.children = []),
				(this.depths = {
					list: [],
				}),
				(this.options = t);
			var i = this.options.knownHelpers;
			if (
				((this.options.knownHelpers = {
					helperMissing: !0,
					blockHelperMissing: !0,
					each: !0,
					if: !0,
					unless: !0,
					with: !0,
					log: !0,
				}),
				i)
			)
				for (var a in i) this.options.knownHelpers[a] = i[a];
			return this.program(e);
		},
		accept: function (e) {
			return this[e.type](e);
		},
		program: function (e) {
			var t,
				i = e.statements;
			this.opcodes = [];
			for (var a = 0, s = i.length; a < s; a++) this[(t = i[a]).type](t);
			return (
				(this.isSimple = 1 === s),
				(this.depths.list = this.depths.list.sort(function (e, t) {
					return e - t;
				})),
				this
			);
		},
		compileProgram: function (e) {
			var t,
				i = new this.compiler().compile(e, this.options),
				a = this.guid++;
			(this.usePartial = this.usePartial || i.usePartial), (this.children[a] = i);
			for (var s = 0, r = i.depths.list.length; s < r; s++) (t = i.depths.list[s]) < 2 || this.addDepth(t - 1);
			return a;
		},
		block: function (e) {
			var t = e.mustache,
				i = e.program,
				a = e.inverse;
			i && (i = this.compileProgram(i)), a && (a = this.compileProgram(a));
			var s = this.classifyMustache(t);
			"helper" === s ? this.helperMustache(t, i, a) : "simple" === s ? (this.simpleMustache(t), this.opcode("pushProgram", i), this.opcode("pushProgram", a), this.opcode("emptyHash"), this.opcode("blockValue")) : (this.ambiguousMustache(t, i, a), this.opcode("pushProgram", i), this.opcode("pushProgram", a), this.opcode("emptyHash"), this.opcode("ambiguousBlockValue")), this.opcode("append");
		},
		hash: function (e) {
			var t,
				i,
				a = e.pairs;
			this.opcode("pushHash");
			for (var s = 0, r = a.length; s < r; s++) (i = (t = a[s])[1]), this.options.stringParams ? (i.depth && this.addDepth(i.depth), this.opcode("getContext", i.depth || 0), this.opcode("pushStringParam", i.stringModeValue, i.type)) : this.accept(i), this.opcode("assignToHash", t[0]);
			this.opcode("popHash");
		},
		partial: function (e) {
			var t = e.partialName;
			(this.usePartial = !0), e.context ? this.ID(e.context) : this.opcode("push", "depth0"), this.opcode("invokePartial", t.name), this.opcode("append");
		},
		content: function (e) {
			this.opcode("appendContent", e.string);
		},
		mustache: function (e) {
			var t = this.options,
				i = this.classifyMustache(e);
			"simple" === i ? this.simpleMustache(e) : "helper" === i ? this.helperMustache(e) : this.ambiguousMustache(e), e.escaped && !t.noEscape ? this.opcode("appendEscaped") : this.opcode("append");
		},
		ambiguousMustache: function (e, t, i) {
			var a = e.id,
				s = a.parts[0],
				r = null != t || null != i;
			this.opcode("getContext", a.depth), this.opcode("pushProgram", t), this.opcode("pushProgram", i), this.opcode("invokeAmbiguous", s, r);
		},
		simpleMustache: function (e) {
			var t = e.id;
			"DATA" === t.type ? this.DATA(t) : t.parts.length ? this.ID(t) : (this.addDepth(t.depth), this.opcode("getContext", t.depth), this.opcode("pushContext")), this.opcode("resolvePossibleLambda");
		},
		helperMustache: function (e, t, i) {
			var a = this.setupFullMustacheParams(e, t, i),
				s = e.id.parts[0];
			if (this.options.knownHelpers[s]) this.opcode("invokeKnownHelper", a.length, s);
			else {
				if (this.options.knownHelpersOnly) throw new Error("You specified knownHelpersOnly, but used the unknown helper " + s);
				this.opcode("invokeHelper", a.length, s);
			}
		},
		ID: function (e) {
			this.addDepth(e.depth), this.opcode("getContext", e.depth), e.parts[0] ? this.opcode("lookupOnContext", e.parts[0]) : this.opcode("pushContext");
			for (var t = 1, i = e.parts.length; t < i; t++) this.opcode("lookup", e.parts[t]);
		},
		DATA: function (t) {
			if (((this.options.data = !0), t.id.isScoped || t.id.depth)) throw new e.Exception("Scoped data references are not supported: " + t.original);
			this.opcode("lookupData");
			for (var i = t.id.parts, a = 0, s = i.length; a < s; a++) this.opcode("lookup", i[a]);
		},
		STRING: function (e) {
			this.opcode("pushString", e.string);
		},
		INTEGER: function (e) {
			this.opcode("pushLiteral", e.integer);
		},
		BOOLEAN: function (e) {
			this.opcode("pushLiteral", e.bool);
		},
		comment: function () {},
		opcode: function (e) {
			this.opcodes.push({
				opcode: e,
				args: [].slice.call(arguments, 1),
			});
		},
		declare: function (e, t) {
			this.opcodes.push({
				opcode: "DECLARE",
				name: e,
				value: t,
			});
		},
		addDepth: function (e) {
			if (isNaN(e)) throw new Error("EWOT");
			0 !== e && (this.depths[e] || ((this.depths[e] = !0), this.depths.list.push(e)));
		},
		classifyMustache: function (e) {
			var t = e.isHelper,
				i = e.eligibleHelper,
				a = this.options;
			if (i && !t) {
				var s = e.id.parts[0];
				a.knownHelpers[s] ? (t = !0) : a.knownHelpersOnly && (i = !1);
			}
			return t ? "helper" : i ? "ambiguous" : "simple";
		},
		pushParams: function (e) {
			for (var t, i = e.length; i--; ) (t = e[i]), this.options.stringParams ? (t.depth && this.addDepth(t.depth), this.opcode("getContext", t.depth || 0), this.opcode("pushStringParam", t.stringModeValue, t.type)) : this[t.type](t);
		},
		setupMustacheParams: function (e) {
			var t = e.params;
			return this.pushParams(t), e.hash ? this.hash(e.hash) : this.opcode("emptyHash"), t;
		},
		setupFullMustacheParams: function (e, t, i) {
			var a = e.params;
			return this.pushParams(a), this.opcode("pushProgram", t), this.opcode("pushProgram", i), e.hash ? this.hash(e.hash) : this.opcode("emptyHash"), a;
		},
	};
	var p = function (e) {
		this.value = e;
	};
	h.prototype = {
		nameLookup: function (e, t) {
			return /^[0-9]+$/.test(t) ? e + "[" + t + "]" : h.isValidJavaScriptVariableName(t) ? e + "." + t : e + "['" + t + "']";
		},
		appendToBuffer: function (e) {
			return this.environment.isSimple
				? "return " + e + ";"
				: {
						appendToBuffer: !0,
						content: e,
						toString: function () {
							return "buffer += " + e + ";";
						},
				  };
		},
		initializeBuffer: function () {
			return this.quotedString("");
		},
		namespace: "Handlebars",
		compile: function (t, i, a, s) {
			(this.environment = t),
				(this.options = i || {}),
				e.log(e.logger.DEBUG, this.environment.disassemble() + "\n\n"),
				(this.name = this.environment.name),
				(this.isChild = !!a),
				(this.context = a || {
					programs: [],
					environments: [],
					aliases: {},
				}),
				this.preamble(),
				(this.stackSlot = 0),
				(this.stackVars = []),
				(this.registers = {
					list: [],
				}),
				(this.compileStack = []),
				(this.inlineStack = []),
				this.compileChildren(t, i);
			var r,
				o = t.opcodes;
			for (this.i = 0, y = o.length; this.i < y; this.i++) "DECLARE" === (r = o[this.i]).opcode ? (this[r.name] = r.value) : this[r.opcode].apply(this, r.args);
			return this.createFunctionContext(s);
		},
		nextOpcode: function () {
			return this.environment.opcodes[this.i + 1];
		},
		eat: function () {
			this.i = this.i + 1;
		},
		preamble: function () {
			var e = [];
			if (this.isChild) e.push("");
			else {
				var t = this.namespace,
					i = "helpers = this.merge(helpers, " + t + ".helpers);";
				this.environment.usePartial && (i = i + " partials = this.merge(partials, " + t + ".partials);"), this.options.data && (i += " data = data || {};"), e.push(i);
			}
			this.environment.isSimple ? e.push("") : e.push(", buffer = " + this.initializeBuffer()), (this.lastContext = 0), (this.source = e);
		},
		createFunctionContext: function (t) {
			var i = this.stackVars.concat(this.registers.list);
			if ((i.length > 0 && (this.source[1] = this.source[1] + ", " + i.join(", ")), !this.isChild)) for (var a in this.context.aliases) this.context.aliases.hasOwnProperty(a) && (this.source[1] = this.source[1] + ", " + a + "=" + this.context.aliases[a]);
			this.source[1] && (this.source[1] = "var " + this.source[1].substring(2) + ";"), this.isChild || (this.source[1] += "\n" + this.context.programs.join("\n") + "\n"), this.environment.isSimple || this.source.push("return buffer;");
			for (var s = this.isChild ? ["depth0", "data"] : ["Handlebars", "depth0", "helpers", "partials", "data"], r = 0, o = this.environment.depths.list.length; r < o; r++) s.push("depth" + this.environment.depths.list[r]);
			var n = this.mergeSource();
			if (!this.isChild) {
				var l = e.COMPILER_REVISION;
				n = "this.compilerInfo = [" + l + ",'" + e.REVISION_CHANGES[l] + "'];\n" + n;
			}
			if (t) return s.push(n), Function.apply(this, s);
			var d = "function " + (this.name || "") + "(" + s.join(",") + ") {\n  " + n + "}";
			return e.log(e.logger.DEBUG, d + "\n\n"), d;
		},
		mergeSource: function () {
			for (var e, i = "", a = 0, s = this.source.length; a < s; a++) {
				var r = this.source[a];
				r.appendToBuffer ? (e = e ? e + "\n    + " + r.content : r.content) : (e && ((i += "buffer += " + e + ";\n  "), (e = t)), (i += r + "\n  "));
			}
			return i;
		},
		blockValue: function () {
			this.context.aliases.blockHelperMissing = "helpers.blockHelperMissing";
			var e = ["depth0"];
			this.setupParams(0, e),
				this.replaceStack(function (t) {
					return e.splice(1, 0, t), "blockHelperMissing.call(" + e.join(", ") + ")";
				});
		},
		ambiguousBlockValue: function () {
			this.context.aliases.blockHelperMissing = "helpers.blockHelperMissing";
			var e = ["depth0"];
			this.setupParams(0, e);
			var t = this.topStack();
			e.splice(1, 0, t), (e[e.length - 1] = "options"), this.source.push("if (!" + this.lastHelper + ") { " + t + " = blockHelperMissing.call(" + e.join(", ") + "); }");
		},
		appendContent: function (e) {
			this.source.push(this.appendToBuffer(this.quotedString(e)));
		},
		append: function () {
			this.flushInline();
			var e = this.popStack();
			this.source.push("if(" + e + " || " + e + " === 0) { " + this.appendToBuffer(e) + " }"), this.environment.isSimple && this.source.push("else { " + this.appendToBuffer("''") + " }");
		},
		appendEscaped: function () {
			(this.context.aliases.escapeExpression = "this.escapeExpression"), this.source.push(this.appendToBuffer("escapeExpression(" + this.popStack() + ")"));
		},
		getContext: function (e) {
			this.lastContext !== e && (this.lastContext = e);
		},
		lookupOnContext: function (e) {
			this.push(this.nameLookup("depth" + this.lastContext, e, "context"));
		},
		pushContext: function () {
			this.pushStackLiteral("depth" + this.lastContext);
		},
		resolvePossibleLambda: function () {
			(this.context.aliases.functionType = '"function"'),
				this.replaceStack(function (e) {
					return "typeof " + e + " === functionType ? " + e + ".apply(depth0) : " + e;
				});
		},
		lookup: function (e) {
			this.replaceStack(function (t) {
				return t + " == null || " + t + " === false ? " + t + " : " + this.nameLookup(t, e, "context");
			});
		},
		lookupData: function (e) {
			this.push("data");
		},
		pushStringParam: function (e, t) {
			this.pushStackLiteral("depth" + this.lastContext), this.pushString(t), "string" == typeof e ? this.pushString(e) : this.pushStackLiteral(e);
		},
		emptyHash: function () {
			this.pushStackLiteral("{}"), this.options.stringParams && (this.register("hashTypes", "{}"), this.register("hashContexts", "{}"));
		},
		pushHash: function () {
			this.hash = {
				values: [],
				types: [],
				contexts: [],
			};
		},
		popHash: function () {
			var e = this.hash;
			(this.hash = t), this.options.stringParams && (this.register("hashContexts", "{" + e.contexts.join(",") + "}"), this.register("hashTypes", "{" + e.types.join(",") + "}")), this.push("{\n    " + e.values.join(",\n    ") + "\n  }");
		},
		pushString: function (e) {
			this.pushStackLiteral(this.quotedString(e));
		},
		push: function (e) {
			return this.inlineStack.push(e), e;
		},
		pushLiteral: function (e) {
			this.pushStackLiteral(e);
		},
		pushProgram: function (e) {
			null != e ? this.pushStackLiteral(this.programExpression(e)) : this.pushStackLiteral(null);
		},
		invokeHelper: function (e, t) {
			this.context.aliases.helperMissing = "helpers.helperMissing";
			var i = (this.lastHelper = this.setupHelper(e, t, !0)),
				a = this.nameLookup("depth" + this.lastContext, t, "context");
			this.push(i.name + " || " + a),
				this.replaceStack(function (e) {
					return e + " ? " + e + ".call(" + i.callParams + ") : helperMissing.call(" + i.helperMissingParams + ")";
				});
		},
		invokeKnownHelper: function (e, t) {
			var i = this.setupHelper(e, t);
			this.push(i.name + ".call(" + i.callParams + ")");
		},
		invokeAmbiguous: function (e, t) {
			(this.context.aliases.functionType = '"function"'), this.pushStackLiteral("{}");
			var i = this.setupHelper(0, e, t),
				a = (this.lastHelper = this.nameLookup("helpers", e, "helper")),
				s = this.nameLookup("depth" + this.lastContext, e, "context"),
				r = this.nextStack();
			this.source.push("if (" + r + " = " + a + ") { " + r + " = " + r + ".call(" + i.callParams + "); }"), this.source.push("else { " + r + " = " + s + "; " + r + " = typeof " + r + " === functionType ? " + r + ".apply(depth0) : " + r + "; }");
		},
		invokePartial: function (e) {
			var t = [this.nameLookup("partials", e, "partial"), "'" + e + "'", this.popStack(), "helpers", "partials"];
			this.options.data && t.push("data"), (this.context.aliases.self = "this"), this.push("self.invokePartial(" + t.join(", ") + ")");
		},
		assignToHash: function (e) {
			var t,
				i,
				a = this.popStack();
			this.options.stringParams && ((i = this.popStack()), (t = this.popStack()));
			var s = this.hash;
			t && s.contexts.push("'" + e + "': " + t), i && s.types.push("'" + e + "': " + i), s.values.push("'" + e + "': (" + a + ")");
		},
		compiler: h,
		compileChildren: function (e, t) {
			for (var i, a, s = e.children, r = 0, o = s.length; r < o; r++) {
				(i = s[r]), (a = new this.compiler());
				var n = this.matchExistingProgram(i);
				null == n ? (this.context.programs.push(""), (n = this.context.programs.length), (i.index = n), (i.name = "program" + n), (this.context.programs[n] = a.compile(i, t, this.context)), (this.context.environments[n] = i)) : ((i.index = n), (i.name = "program" + n));
			}
		},
		matchExistingProgram: function (e) {
			for (var t = 0, i = this.context.environments.length; t < i; t++) {
				var a = this.context.environments[t];
				if (a && a.equals(e)) return t;
			}
		},
		programExpression: function (e) {
			if (((this.context.aliases.self = "this"), null == e)) return "self.noop";
			for (var t, i = this.environment.children[e], a = i.depths.list, s = [i.index, i.name, "data"], r = 0, o = a.length; r < o; r++) 1 === (t = a[r]) ? s.push("depth0") : s.push("depth" + (t - 1));
			return (0 === a.length ? "self.program(" : "self.programWithDepth(") + s.join(", ") + ")";
		},
		register: function (e, t) {
			this.useRegister(e), this.source.push(e + " = " + t + ";");
		},
		useRegister: function (e) {
			this.registers[e] || ((this.registers[e] = !0), this.registers.list.push(e));
		},
		pushStackLiteral: function (e) {
			return this.push(new p(e));
		},
		pushStack: function (e) {
			this.flushInline();
			var t = this.incrStack();
			return e && this.source.push(t + " = " + e + ";"), this.compileStack.push(t), t;
		},
		replaceStack: function (e) {
			var t,
				i = "",
				a = this.isInline();
			if (a) {
				var s = this.popStack(!0);
				if (s instanceof p) t = s.value;
				else {
					var r = this.stackSlot ? this.topStackName() : this.incrStack();
					(i = "(" + this.push(r) + " = " + s + "),"), (t = this.topStack());
				}
			} else t = this.topStack();
			var o = e.call(this, t);
			return a ? ((this.inlineStack.length || this.compileStack.length) && this.popStack(), this.push("(" + i + o + ")")) : (/^stack/.test(t) || (t = this.nextStack()), this.source.push(t + " = (" + i + o + ");")), t;
		},
		nextStack: function () {
			return this.pushStack();
		},
		incrStack: function () {
			return this.stackSlot++, this.stackSlot > this.stackVars.length && this.stackVars.push("stack" + this.stackSlot), this.topStackName();
		},
		topStackName: function () {
			return "stack" + this.stackSlot;
		},
		flushInline: function () {
			var e = this.inlineStack;
			if (e.length) {
				this.inlineStack = [];
				for (var t = 0, i = e.length; t < i; t++) {
					var a = e[t];
					a instanceof p ? this.compileStack.push(a) : this.pushStack(a);
				}
			}
		},
		isInline: function () {
			return this.inlineStack.length;
		},
		popStack: function (e) {
			var t = this.isInline(),
				i = (t ? this.inlineStack : this.compileStack).pop();
			return !e && i instanceof p ? i.value : (t || this.stackSlot--, i);
		},
		topStack: function (e) {
			var t = this.isInline() ? this.inlineStack : this.compileStack,
				i = t[t.length - 1];
			return !e && i instanceof p ? i.value : i;
		},
		quotedString: function (e) {
			return (
				'"' +
				e
					.replace(/\\/g, "\\\\")
					.replace(/"/g, '\\"')
					.replace(/\n/g, "\\n")
					.replace(/\r/g, "\\r")
					.replace(/\u2028/g, "\\u2028")
					.replace(/\u2029/g, "\\u2029") +
				'"'
			);
		},
		setupHelper: function (e, t, i) {
			var a = [];
			return (
				this.setupParams(e, a, i),
				{
					params: a,
					name: this.nameLookup("helpers", t, "helper"),
					callParams: ["depth0"].concat(a).join(", "),
					helperMissingParams: i && ["depth0", this.quotedString(t)].concat(a).join(", "),
				}
			);
		},
		setupParams: function (e, t, i) {
			var a,
				s,
				r,
				o = [],
				n = [],
				l = [];
			o.push("hash:" + this.popStack()), (s = this.popStack()), ((r = this.popStack()) || s) && (r || ((this.context.aliases.self = "this"), (r = "self.noop")), s || ((this.context.aliases.self = "this"), (s = "self.noop")), o.push("inverse:" + s), o.push("fn:" + r));
			for (var d = 0; d < e; d++) (a = this.popStack()), t.push(a), this.options.stringParams && (l.push(this.popStack()), n.push(this.popStack()));
			return this.options.stringParams && (o.push("contexts:[" + n.join(",") + "]"), o.push("types:[" + l.join(",") + "]"), o.push("hashContexts:hashContexts"), o.push("hashTypes:hashTypes")), this.options.data && o.push("data:data"), (o = "{" + o.join(",") + "}"), i ? (this.register("options", o), t.push("options")) : t.push(o), t.join(", ");
		},
	};
	for (var g = "break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "), f = (h.RESERVED_WORDS = {}), m = 0, y = g.length; m < y; m++) f[g[m]] = !0;
	(h.isValidJavaScriptVariableName = function (e) {
		return !(h.RESERVED_WORDS[e] || !/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e));
	}),
		(e.precompile = function (t, i) {
			if (null == t || ("string" != typeof t && t.constructor !== e.AST.ProgramNode)) throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed " + t);
			"data" in (i = i || {}) || (i.data = !0);
			var a = e.parse(t),
				s = new u().compile(a, i);
			return new h().compile(s, i);
		}),
		(e.compile = function (i, a) {
			if (null == i || ("string" != typeof i && i.constructor !== e.AST.ProgramNode)) throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed " + i);
			var s;
			return (
				"data" in (a = a || {}) || (a.data = !0),
				function (r, o) {
					var n, l, d;
					return s || ((n = e.parse(i)), (l = new u().compile(n, a)), (d = new h().compile(l, a, t, !0)), (s = e.template(d))), s.call(this, r, o);
				}
			);
		}),
		(e.VM = {
			template: function (t) {
				var i = {
					escapeExpression: e.Utils.escapeExpression,
					invokePartial: e.VM.invokePartial,
					programs: [],
					program: function (t, i, a) {
						var s = this.programs[t];
						return a ? (s = e.VM.program(t, i, a)) : s || (s = this.programs[t] = e.VM.program(t, i)), s;
					},
					merge: function (t, i) {
						var a = t || i;
						return t && i && ((a = {}), e.Utils.extend(a, i), e.Utils.extend(a, t)), a;
					},
					programWithDepth: e.VM.programWithDepth,
					noop: e.VM.noop,
					compilerInfo: null,
				};
				return function (a, s) {
					s = s || {};
					var r = t.call(i, e, a, s.helpers, s.partials, s.data),
						o = i.compilerInfo || [],
						n = o[0] || 1,
						l = e.COMPILER_REVISION;
					if (n !== l) {
						if (n < l) throw "Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (" + e.REVISION_CHANGES[l] + ") or downgrade your runtime to an older version (" + e.REVISION_CHANGES[n] + ").";
						throw "Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (" + o[1] + ").";
					}
					return r;
				};
			},
			programWithDepth: function (e, t, i) {
				var a = Array.prototype.slice.call(arguments, 3),
					s = function (e, s) {
						return (s = s || {}), t.apply(this, [e, s.data || i].concat(a));
					};
				return (s.program = e), (s.depth = a.length), s;
			},
			program: function (e, t, i) {
				var a = function (e, a) {
					return t(e, (a = a || {}).data || i);
				};
				return (a.program = e), (a.depth = 0), a;
			},
			noop: function () {
				return "";
			},
			invokePartial: function (i, a, s, r, o, n) {
				var l = {
					helpers: r,
					partials: o,
					data: n,
				};
				if (i === t) throw new e.Exception("The partial " + a + " could not be found");
				if (i instanceof Function) return i(s, l);
				if (e.compile)
					return (
						(o[a] = e.compile(i, {
							data: n !== t,
						})),
						o[a](s, l)
					);
				throw new e.Exception("The partial " + a + " could not be compiled when running in runtime-only mode");
			},
		}),
		(e.template = e.VM.template);
})(Handlebars),
	(function (e, t, i) {
		var a,
			s,
			r,
			o,
			n,
			l,
			d,
			c,
			u,
			h,
			p,
			g,
			f,
			m,
			y,
			b,
			v,
			x,
			k,
			w,
			_,
			j,
			C,
			S,
			Q,
			B,
			D,
			$,
			T,
			E,
			I,
			P,
			M,
			H = {
				html: !1,
				photo: !1,
				iframe: !1,
				inline: !1,
				transition: "elastic",
				speed: 300,
				fadeOut: 300,
				width: !1,
				initialWidth: "600",
				innerWidth: !1,
				maxWidth: !1,
				height: !1,
				initialHeight: "450",
				innerHeight: !1,
				maxHeight: !1,
				scalePhotos: !0,
				scrolling: !0,
				opacity: 0.9,
				preloading: !0,
				className: !1,
				overlayClose: !0,
				escKey: !0,
				arrowKey: !0,
				top: !1,
				bottom: !1,
				left: !1,
				right: !1,
				fixed: !0,
				data: void 0,
				closeButton: !0,
				fastIframe: !0,
				open: !1,
				reposition: !0,
				loop: !0,
				slideshow: !1,
				slideshowAuto: !0,
				slideshowSpeed: 2500,
				slideshowStart: "start slideshow",
				slideshowStop: "stop slideshow",
				photoRegex: /\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,
				retinaImage: !1,
				retinaUrl: !1,
				retinaSuffix: "@2x.$1",
				current: "image {current} of {total}",
				previous: "previous",
				next: "next",
				close: "close",
				xhrError: "This content failed to load.",
				imgError: "This image failed to load.",
				returnFocus: !0,
				trapFocus: !0,
				onOpen: !1,
				onLoad: !1,
				onComplete: !1,
				onCleanup: !1,
				onClosed: !1,
				rel: function () {
					return this.rel;
				},
				href: function () {
					return e(this).attr("href");
				},
				title: function () {
					return this.title;
				},
				createImg: function () {
					var t = new Image(),
						i = e(this).data("cbox-img-attrs");
					return (
						"object" == typeof i &&
							e.each(i, function (e, i) {
								t[e] = i;
							}),
						t
					);
				},
				createIframe: function () {
					var i = t.createElement("iframe"),
						a = e(this).data("cbox-iframe-attrs");
					return (
						"object" == typeof a &&
							e.each(a, function (e, t) {
								i[e] = t;
							}),
						"frameBorder" in i && (i.frameBorder = 0),
						"allowTransparency" in i && (i.allowTransparency = "true"),
						(i.name = new Date().getTime()),
						(i.allowFullScreen = !0),
						i
					);
				},
			},
			U = "colorbox",
			A = "cbox",
			W = A + "Element",
			F = A + "_open",
			N = A + "_load",
			O = A + "_complete",
			V = A + "_cleanup",
			z = A + "_closed",
			L = A + "_purge",
			R = e("<a/>"),
			q = "div",
			Y = 0,
			G = {};

		function K(i, a, s) {
			var r = t.createElement(i);
			return a && (r.id = A + a), s && (r.style.cssText = s), e(r);
		}

		function J() {
			return i.innerHeight ? i.innerHeight : e(i).height();
		}

		function X(t, i) {
			i !== Object(i) && (i = {}),
				(this.cache = {}),
				(this.el = t),
				(this.value = function (t) {
					var a;
					return void 0 === this.cache[t] && (void 0 !== (a = e(this.el).attr("data-cbox-" + t)) ? (this.cache[t] = a) : void 0 !== i[t] ? (this.cache[t] = i[t]) : void 0 !== H[t] && (this.cache[t] = H[t])), this.cache[t];
				}),
				(this.get = function (t) {
					var i = this.value(t);
					return e.isFunction(i) ? i.call(this.el, this) : i;
				});
		}

		function Z(e) {
			var t = u.length,
				i = (B + e) % t;
			return i < 0 ? t + i : i;
		}

		function ee(e, t) {
			return Math.round((/%/.test(e) ? ("x" === t ? h.width() : J()) / 100 : 1) * parseInt(e, 10));
		}

		function te(e, t) {
			return e.get("photo") || e.get("photoRegex").test(t);
		}

		function ie(e, t) {
			return e.get("retinaUrl") && i.devicePixelRatio > 1 ? t.replace(e.get("photoRegex"), e.get("retinaSuffix")) : t;
		}

		function ae(e) {
			"contains" in s[0] && !s[0].contains(e.target) && e.target !== a[0] && (e.stopPropagation(), s.focus());
		}

		function se(e) {
			se.str !== e && (s.add(a).removeClass(se.str).addClass(e), (se.str = e));
		}

		function re(i) {
			e(t).trigger(i), R.triggerHandler(i);
		}
		var oe = (function () {
			var e,
				t,
				i = A + "Slideshow_",
				a = "click." + A;

			function r() {
				clearTimeout(t);
			}

			function o() {
				(_.get("loop") || u[B + 1]) && (r(), (t = setTimeout(P.next, _.get("slideshowSpeed"))));
			}

			function n() {
				b.html(_.get("slideshowStop")).unbind(a).one(a, l), R.bind(O, o).bind(N, r), s.removeClass(i + "off").addClass(i + "on");
			}

			function l() {
				r(),
					R.unbind(O, o).unbind(N, r),
					b
						.html(_.get("slideshowStart"))
						.unbind(a)
						.one(a, function () {
							P.next(), n();
						}),
					s.removeClass(i + "on").addClass(i + "off");
			}

			function d() {
				(e = !1), b.hide(), r(), R.unbind(O, o).unbind(N, r), s.removeClass(i + "off " + i + "on");
			}
			return function () {
				e ? _.get("slideshow") || (R.unbind(V, d), d()) : _.get("slideshow") && u[1] && ((e = !0), R.one(V, d), _.get("slideshowAuto") ? n() : l(), b.show());
			};
		})();

		function ne(r) {
			var h, y;
			if (!E) {
				if (
					((h = e(r).data(U)),
					(_ = new X(r, h)),
					(y = _.get("rel")),
					(B = 0),
					y && !1 !== y && "nofollow" !== y
						? ((u = e("." + W).filter(function () {
								return new X(this, e.data(this, U)).get("rel") === y;
						  })),
						  -1 === (B = u.index(_.el)) && ((u = u.add(_.el)), (B = u.length - 1)))
						: (u = e(_.el)),
					!$)
				) {
					($ = T = !0),
						se(_.get("className")),
						s.css({
							visibility: "hidden",
							display: "block",
							opacity: "",
						}),
						(p = K(q, "LoadedContent", "width:0; height:0; overflow:hidden; visibility:hidden")),
						o
							.css({
								width: "",
								height: "",
							})
							.append(p),
						(j = n.height() + c.height() + o.outerHeight(!0) - o.height()),
						(C = l.width() + d.width() + o.outerWidth(!0) - o.width()),
						(S = p.outerHeight(!0)),
						(Q = p.outerWidth(!0));
					var b = ee(_.get("initialWidth"), "x"),
						v = ee(_.get("initialHeight"), "y"),
						x = _.get("maxWidth"),
						M = _.get("maxHeight");
					(_.w = (!1 !== x ? Math.min(b, ee(x, "x")) : b) - Q - C),
						(_.h = (!1 !== M ? Math.min(v, ee(M, "y")) : v) - S - j),
						p.css({
							width: "",
							height: _.h,
						}),
						P.position(),
						re(F),
						_.get("onOpen"),
						w.add(m).hide(),
						s.focus(),
						_.get("trapFocus") &&
							t.addEventListener &&
							(t.addEventListener("focus", ae, !0),
							R.one(z, function () {
								t.removeEventListener("focus", ae, !0);
							})),
						_.get("returnFocus") &&
							R.one(z, function () {
								e(_.el).focus();
							});
				}
				var H = parseFloat(_.get("opacity"));
				a
					.css({
						opacity: H == H ? H : "",
						cursor: _.get("overlayClose") ? "pointer" : "",
						visibility: "visible",
					})
					.show(),
					_.get("closeButton") ? k.html(_.get("close")).appendTo(o) : k.appendTo("<div/>"),
					(function () {
						var t,
							a,
							s,
							r = P.prep,
							o = ++Y;
						if (
							((T = !0),
							(D = !1),
							re(L),
							re(N),
							_.get("onLoad"),
							(_.h = _.get("height") ? ee(_.get("height"), "y") - S - j : _.get("innerHeight") && ee(_.get("innerHeight"), "y")),
							(_.w = _.get("width") ? ee(_.get("width"), "x") - Q - C : _.get("innerWidth") && ee(_.get("innerWidth"), "x")),
							(_.mw = _.w),
							(_.mh = _.h),
							_.get("maxWidth") && ((_.mw = ee(_.get("maxWidth"), "x") - Q - C), (_.mw = _.w && _.w < _.mw ? _.w : _.mw)),
							_.get("maxHeight") && ((_.mh = ee(_.get("maxHeight"), "y") - S - j), (_.mh = _.h && _.h < _.mh ? _.h : _.mh)),
							(t = _.get("href")),
							(I = setTimeout(function () {
								f.show();
							}, 100)),
							_.get("inline"))
						) {
							var n = e(t);
							(s = e("<div>").hide().insertBefore(n)),
								R.one(L, function () {
									s.replaceWith(n);
								}),
								r(n);
						} else
							_.get("iframe")
								? r(" ")
								: _.get("html")
								? r(_.get("html"))
								: te(_, t)
								? ((t = ie(_, t)),
								  (D = _.get("createImg")),
								  e(D)
										.addClass(A + "Photo")
										.bind("error", function () {
											r(K(q, "Error").html(_.get("imgError")));
										})
										.one("load", function () {
											o === Y &&
												setTimeout(function () {
													var e;
													_.get("retinaImage") && i.devicePixelRatio > 1 && ((D.height = D.height / i.devicePixelRatio), (D.width = D.width / i.devicePixelRatio)),
														_.get("scalePhotos") &&
															((a = function () {
																(D.height -= D.height * e), (D.width -= D.width * e);
															}),
															_.mw && D.width > _.mw && ((e = (D.width - _.mw) / D.width), a()),
															_.mh && D.height > _.mh && ((e = (D.height - _.mh) / D.height), a())),
														_.h && (D.style.marginTop = Math.max(_.mh - D.height, 0) / 2 + "px"),
														u[1] &&
															(_.get("loop") || u[B + 1]) &&
															((D.style.cursor = "pointer"),
															(D.onclick = function () {
																P.next();
															})),
														(D.style.width = D.width + "px"),
														(D.style.height = D.height + "px"),
														r(D);
												}, 1);
										}),
								  (D.src = t))
								: t &&
								  g.load(t, _.get("data"), function (t, i) {
										o === Y && r("error" === i ? K(q, "Error").html(_.get("xhrError")) : e(this).contents());
								  });
					})();
			}
		}

		function le() {
			s ||
				((M = !1),
				(h = e(i)),
				(s = K(q)
					.attr({
						id: U,
						class: !1 === e.support.opacity ? A + "IE" : "",
						role: "dialog",
						tabindex: "-1",
					})
					.hide()),
				(a = K(q, "Overlay").hide()),
				(f = e([K(q, "LoadingOverlay")[0], K(q, "LoadingGraphic")[0]])),
				(r = K(q, "Wrapper")),
				(o = K(q, "Content").append(
					(m = K(q, "Title")),
					(y = K(q, "Current")),
					(x = e('<button type="button"/>').attr({
						id: A + "Previous",
					})),
					(v = e('<button type="button"/>').attr({
						id: A + "Next",
					})),
					(b = K("button", "Slideshow")),
					f
				)),
				(k = e('<button type="button"/>').attr({
					id: A + "Close",
				})),
				r
					.append(K(q).append(K(q, "TopLeft"), (n = K(q, "TopCenter")), K(q, "TopRight")), K(q, !1, "clear:left").append((l = K(q, "MiddleLeft")), o, (d = K(q, "MiddleRight"))), K(q, !1, "clear:left").append(K(q, "BottomLeft"), (c = K(q, "BottomCenter")), K(q, "BottomRight")))
					.find("div div")
					.css({
						float: "left",
					}),
				(g = K(q, !1, "position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;")),
				(w = v.add(x).add(y).add(b))),
				t.body && !s.parent().length && e(t.body).append(a, s.append(r, g));
		}
		e[U] ||
			(e(le),
			((P =
				e.fn[U] =
				e[U] =
					function (i, r) {
						var o = this;
						return (
							(i = i || {}),
							e.isFunction(o) && ((o = e("<a/>")), (i.open = !0)),
							o[0]
								? (le(),
								  (function () {
										function i(e) {
											e.which > 1 || e.shiftKey || e.altKey || e.metaKey || e.ctrlKey || (e.preventDefault(), ne(this));
										}
										return (
											!!s &&
											(M ||
												((M = !0),
												v.click(function () {
													P.next();
												}),
												x.click(function () {
													P.prev();
												}),
												k.click(function () {
													P.close();
												}),
												a.click(function () {
													_.get("overlayClose") && P.close();
												}),
												e(t).bind("keydown." + A, function (e) {
													var t = e.keyCode;
													$ && _.get("escKey") && 27 === t && (e.preventDefault(), P.close()), $ && _.get("arrowKey") && u[1] && !e.altKey && (37 === t ? (e.preventDefault(), x.click()) : 39 === t && (e.preventDefault(), v.click()));
												}),
												e.isFunction(e.fn.on) ? e(t).on("click." + A, "." + W, i) : e("." + W).live("click." + A, i)),
											!0)
										);
								  })() &&
										(r && (i.onComplete = r),
										o
											.each(function () {
												var t = e.data(this, U) || {};
												e.data(this, U, e.extend(t, i));
											})
											.addClass(W),
										new X(o[0], i).get("open") && ne(o[0])),
								  o)
								: o
						);
					}).position = function (t, i) {
				var a,
					u,
					p,
					g = 0,
					f = 0,
					m = s.offset();

				function y() {
					(n[0].style.width = c[0].style.width = o[0].style.width = parseInt(s[0].style.width, 10) - C + "px"), (o[0].style.height = l[0].style.height = d[0].style.height = parseInt(s[0].style.height, 10) - j + "px");
				}
				if (
					(h.unbind("resize." + A),
					s.css({
						top: -9e4,
						left: -9e4,
					}),
					(u = h.scrollTop()),
					(p = h.scrollLeft()),
					_.get("fixed")
						? ((m.top -= u),
						  (m.left -= p),
						  s.css({
								position: "fixed",
						  }))
						: ((g = u),
						  (f = p),
						  s.css({
								position: "absolute",
						  })),
					!1 !== _.get("right") ? (f += Math.max(h.width() - _.w - Q - C - ee(_.get("right"), "x"), 0)) : !1 !== _.get("left") ? (f += ee(_.get("left"), "x")) : (f += Math.round(Math.max(h.width() - _.w - Q - C, 0) / 2)),
					!1 !== _.get("bottom") ? (g += Math.max(J() - _.h - S - j - ee(_.get("bottom"), "y"), 0)) : !1 !== _.get("top") ? (g += ee(_.get("top"), "y")) : (g += Math.round(Math.max(J() - _.h - S - j, 0) / 2)),
					s.css({
						top: m.top,
						left: m.left,
						visibility: "visible",
					}),
					(r[0].style.width = r[0].style.height = "9999px"),
					(a = {
						width: _.w + Q + C,
						height: _.h + S + j,
						top: g,
						left: f,
					}),
					t)
				) {
					var b = 0;
					e.each(a, function (e) {
						a[e] === G[e] || (b = t);
					}),
						(t = b);
				}
				(G = a),
					t || s.css(a),
					s.dequeue().animate(a, {
						duration: t || 0,
						complete: function () {
							y(),
								(T = !1),
								(r[0].style.width = _.w + Q + C + "px"),
								(r[0].style.height = _.h + S + j + "px"),
								_.get("reposition") &&
									setTimeout(function () {
										h.bind("resize." + A, P.position);
									}, 1),
								e.isFunction(i) && i();
						},
						step: y,
					});
			}),
			(P.resize = function (e) {
				var t;
				$ &&
					((e = e || {}).width && (_.w = ee(e.width, "x") - Q - C),
					e.innerWidth && (_.w = ee(e.innerWidth, "x")),
					p.css({
						width: _.w,
					}),
					e.height && (_.h = ee(e.height, "y") - S - j),
					e.innerHeight && (_.h = ee(e.innerHeight, "y")),
					e.innerHeight ||
						e.height ||
						((t = p.scrollTop()),
						p.css({
							height: "auto",
						}),
						(_.h = p.height())),
					p.css({
						height: _.h,
					}),
					t && p.scrollTop(t),
					P.position("none" === _.get("transition") ? 0 : _.get("speed")));
			}),
			(P.prep = function (i) {
				if ($) {
					var a,
						r = "none" === _.get("transition") ? 0 : _.get("speed");
					p.remove(),
						(p = K(q, "LoadedContent").append(i))
							.hide()
							.appendTo(g.show())
							.css({
								width: ((_.w = _.w || p.width()), (_.w = _.mw && _.mw < _.w ? _.mw : _.w), _.w),
								overflow: _.get("scrolling") ? "auto" : "hidden",
							})
							.css({
								height: ((_.h = _.h || p.height()), (_.h = _.mh && _.mh < _.h ? _.mh : _.h), _.h),
							})
							.prependTo(o),
						g.hide(),
						e(D).css({
							float: "none",
						}),
						se(_.get("className")),
						(a = function () {
							var i,
								a,
								o = u.length;

							function n() {
								!1 === e.support.opacity && s[0].style.removeAttribute("filter");
							}
							$ &&
								((a = function () {
									clearTimeout(I), f.hide(), re(O), _.get("onComplete");
								}),
								m.html(_.get("title")).show(),
								p.show(),
								o > 1
									? ("string" == typeof _.get("current") &&
											y
												.html(
													_.get("current")
														.replace("{current}", B + 1)
														.replace("{total}", o)
												)
												.show(),
									  v[_.get("loop") || B < o - 1 ? "show" : "hide"]().html(_.get("next")),
									  x[_.get("loop") || B ? "show" : "hide"]().html(_.get("previous")),
									  oe(),
									  _.get("preloading") &&
											e.each([Z(-1), Z(1)], function () {
												var i = u[this],
													a = new X(i, e.data(i, U)),
													s = a.get("href");
												s && te(a, s) && ((s = ie(a, s)), (t.createElement("img").src = s));
											}))
									: w.hide(),
								_.get("iframe")
									? ((i = _.get("createIframe")),
									  _.get("scrolling") || (i.scrolling = "no"),
									  e(i)
											.attr({
												src: _.get("href"),
												class: A + "Iframe",
											})
											.one("load", a)
											.appendTo(p),
									  R.one(L, function () {
											i.src = "//about:blank";
									  }),
									  _.get("fastIframe") && e(i).trigger("load"))
									: a(),
								"fade" === _.get("transition") ? s.fadeTo(r, 1, n) : n());
						}),
						"fade" === _.get("transition")
							? s.fadeTo(r, 0, function () {
									P.position(0, a);
							  })
							: P.position(r, a);
				}
			}),
			(P.next = function () {
				!T && u[1] && (_.get("loop") || u[B + 1]) && ((B = Z(1)), ne(u[B]));
			}),
			(P.prev = function () {
				!T && u[1] && (_.get("loop") || B) && ((B = Z(-1)), ne(u[B]));
			}),
			(P.close = function () {
				$ &&
					!E &&
					((E = !0),
					($ = !1),
					re(V),
					_.get("onCleanup"),
					h.unbind("." + A),
					a.fadeTo(_.get("fadeOut") || 0, 0),
					s.stop().fadeTo(_.get("fadeOut") || 0, 0, function () {
						s.hide(),
							a.hide(),
							re(L),
							p.remove(),
							setTimeout(function () {
								(E = !1), re(z), _.get("onClosed");
							}, 1);
					}));
			}),
			(P.remove = function () {
				s &&
					(s.stop(),
					e[U].close(),
					s.stop(!1, !0).remove(),
					a.remove(),
					(E = !1),
					(s = null),
					e("." + W)
						.removeData(U)
						.removeClass(W),
					e(t)
						.unbind("click." + A)
						.unbind("keydown." + A));
			}),
			(P.element = function () {
				return e(_.el);
			}),
			(P.settings = H));
	})(jQuery, document, window),
	(function (e) {
		function t() {
			(this._defaults = {
				pickerClass: "",
				showOnFocus: !0,
				showTrigger: null,
				showAnim: "show",
				showOptions: {},
				showSpeed: "normal",
				popupContainer: null,
				alignment: "bottom",
				fixedWeeks: !1,
				firstDay: 0,
				calculateWeek: this.iso8601Week,
				monthsToShow: 1,
				monthsOffset: 0,
				monthsToStep: 1,
				monthsToJump: 12,
				useMouseWheel: !0,
				changeMonth: !0,
				yearRange: "c-10:c+10",
				shortYearCutoff: "+10",
				showOtherMonths: !1,
				selectOtherMonths: !1,
				defaultDate: null,
				selectDefaultDate: !1,
				minDate: null,
				maxDate: null,
				dateFormat: "mm/dd/yyyy",
				autoSize: !1,
				rangeSelect: !1,
				rangeSeparator: " - ",
				multiSelect: 0,
				multiSeparator: ",",
				onDate: null,
				onShow: null,
				onChangeMonthYear: null,
				onSelect: null,
				onClose: null,
				altField: null,
				altFormat: null,
				constrainInput: !0,
				commandsAsDateFormat: !1,
				commands: this.commands,
			}),
				(this.regional = []),
				(this.regional[""] = {
					monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
					monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
					dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
					dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
					dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
					dateFormat: "mm/dd/yyyy",
					firstDay: 0,
					renderer: this.defaultRenderer,
					prevText: "&lt;Prev",
					prevStatus: "Show the previous month",
					prevJumpText: "&lt;&lt;",
					prevJumpStatus: "Show the previous year",
					nextText: "Next&gt;",
					nextStatus: "Show the next month",
					nextJumpText: "&gt;&gt;",
					nextJumpStatus: "Show the next year",
					currentText: "Current",
					currentStatus: "Show the current month",
					todayText: "Today",
					todayStatus: "Show today's month",
					clearText: "Clear",
					clearStatus: "Clear all the dates",
					closeText: "Close",
					closeStatus: "Close the datepicker",
					yearStatus: "Change the year",
					monthStatus: "Change the month",
					weekText: "Wk",
					weekStatus: "Week of the year",
					dayStatus: "Select DD, M d, yyyy",
					defaultStatus: "Select a date",
					isRTL: !1,
				}),
				e.extend(this._defaults, this.regional[""]),
				(this._disabled = []);
		}
		e.extend(t.prototype, {
			markerClassName: "hasDatepick",
			propertyName: "datepick",
			_popupClass: "datepick-popup",
			_triggerClass: "datepick-trigger",
			_disableClass: "datepick-disable",
			_monthYearClass: "datepick-month-year",
			_curMonthClass: "datepick-month-",
			_anyYearClass: "datepick-any-year",
			_curDoWClass: "datepick-dow-",
			commands: {
				prev: {
					text: "prevText",
					status: "prevStatus",
					keystroke: {
						keyCode: 33,
					},
					enabled: function (e) {
						var t = e.curMinDate();
						return !t || a.add(a.day(a._applyMonthsOffset(a.add(a.newDate(e.drawDate), 1 - e.options.monthsToStep, "m"), e), 1), -1, "d").getTime() >= t.getTime();
					},
					date: function (e) {
						return a.day(a._applyMonthsOffset(a.add(a.newDate(e.drawDate), -e.options.monthsToStep, "m"), e), 1);
					},
					action: function (e) {
						a._changeMonthPlugin(this, -e.options.monthsToStep);
					},
				},
				prevJump: {
					text: "prevJumpText",
					status: "prevJumpStatus",
					keystroke: {
						keyCode: 33,
						ctrlKey: !0,
					},
					enabled: function (e) {
						var t = e.curMinDate();
						return !t || a.add(a.day(a._applyMonthsOffset(a.add(a.newDate(e.drawDate), 1 - e.options.monthsToJump, "m"), e), 1), -1, "d").getTime() >= t.getTime();
					},
					date: function (e) {
						return a.day(a._applyMonthsOffset(a.add(a.newDate(e.drawDate), -e.options.monthsToJump, "m"), e), 1);
					},
					action: function (e) {
						a._changeMonthPlugin(this, -e.options.monthsToJump);
					},
				},
				next: {
					text: "nextText",
					status: "nextStatus",
					keystroke: {
						keyCode: 34,
					},
					enabled: function (e) {
						var t = e.get("maxDate");
						return !t || a.day(a._applyMonthsOffset(a.add(a.newDate(e.drawDate), e.options.monthsToStep, "m"), e), 1).getTime() <= t.getTime();
					},
					date: function (e) {
						return a.day(a._applyMonthsOffset(a.add(a.newDate(e.drawDate), e.options.monthsToStep, "m"), e), 1);
					},
					action: function (e) {
						a._changeMonthPlugin(this, e.options.monthsToStep);
					},
				},
				nextJump: {
					text: "nextJumpText",
					status: "nextJumpStatus",
					keystroke: {
						keyCode: 34,
						ctrlKey: !0,
					},
					enabled: function (e) {
						var t = e.get("maxDate");
						return !t || a.day(a._applyMonthsOffset(a.add(a.newDate(e.drawDate), e.options.monthsToJump, "m"), e), 1).getTime() <= t.getTime();
					},
					date: function (e) {
						return a.day(a._applyMonthsOffset(a.add(a.newDate(e.drawDate), e.options.monthsToJump, "m"), e), 1);
					},
					action: function (e) {
						a._changeMonthPlugin(this, e.options.monthsToJump);
					},
				},
				current: {
					text: "currentText",
					status: "currentStatus",
					keystroke: {
						keyCode: 36,
						ctrlKey: !0,
					},
					enabled: function (e) {
						var t = e.curMinDate(),
							i = e.get("maxDate"),
							s = e.selectedDates[0] || a.today();
						return (!t || s.getTime() >= t.getTime()) && (!i || s.getTime() <= i.getTime());
					},
					date: function (e) {
						return e.selectedDates[0] || a.today();
					},
					action: function (e) {
						var t = e.selectedDates[0] || a.today();
						a._showMonthPlugin(this, t.getFullYear(), t.getMonth() + 1);
					},
				},
				today: {
					text: "todayText",
					status: "todayStatus",
					keystroke: {
						keyCode: 36,
						ctrlKey: !0,
					},
					enabled: function (e) {
						var t = e.curMinDate(),
							i = e.get("maxDate");
						return (!t || a.today().getTime() >= t.getTime()) && (!i || a.today().getTime() <= i.getTime());
					},
					date: function (e) {
						return a.today();
					},
					action: function (e) {
						a._showMonthPlugin(this);
					},
				},
				clear: {
					text: "clearText",
					status: "clearStatus",
					keystroke: {
						keyCode: 35,
						ctrlKey: !0,
					},
					enabled: function (e) {
						return !0;
					},
					date: function (e) {
						return null;
					},
					action: function (e) {
						a._clearPlugin(this);
					},
				},
				close: {
					text: "closeText",
					status: "closeStatus",
					keystroke: {
						keyCode: 27,
					},
					enabled: function (e) {
						return !0;
					},
					date: function (e) {
						return null;
					},
					action: function (e) {
						a._hidePlugin(this);
					},
				},
				prevWeek: {
					text: "prevWeekText",
					status: "prevWeekStatus",
					keystroke: {
						keyCode: 38,
						ctrlKey: !0,
					},
					enabled: function (e) {
						var t = e.curMinDate();
						return !t || a.add(a.newDate(e.drawDate), -7, "d").getTime() >= t.getTime();
					},
					date: function (e) {
						return a.add(a.newDate(e.drawDate), -7, "d");
					},
					action: function (e) {
						a._changeDayPlugin(this, -7);
					},
				},
				prevDay: {
					text: "prevDayText",
					status: "prevDayStatus",
					keystroke: {
						keyCode: 37,
						ctrlKey: !0,
					},
					enabled: function (e) {
						var t = e.curMinDate();
						return !t || a.add(a.newDate(e.drawDate), -1, "d").getTime() >= t.getTime();
					},
					date: function (e) {
						return a.add(a.newDate(e.drawDate), -1, "d");
					},
					action: function (e) {
						a._changeDayPlugin(this, -1);
					},
				},
				nextDay: {
					text: "nextDayText",
					status: "nextDayStatus",
					keystroke: {
						keyCode: 39,
						ctrlKey: !0,
					},
					enabled: function (e) {
						var t = e.get("maxDate");
						return !t || a.add(a.newDate(e.drawDate), 1, "d").getTime() <= t.getTime();
					},
					date: function (e) {
						return a.add(a.newDate(e.drawDate), 1, "d");
					},
					action: function (e) {
						a._changeDayPlugin(this, 1);
					},
				},
				nextWeek: {
					text: "nextWeekText",
					status: "nextWeekStatus",
					keystroke: {
						keyCode: 40,
						ctrlKey: !0,
					},
					enabled: function (e) {
						var t = e.get("maxDate");
						return !t || a.add(a.newDate(e.drawDate), 7, "d").getTime() <= t.getTime();
					},
					date: function (e) {
						return a.add(a.newDate(e.drawDate), 7, "d");
					},
					action: function (e) {
						a._changeDayPlugin(this, 7);
					},
				},
			},
			defaultRenderer: {
				picker: '<div class="datepick"><div class="datepick-nav">{link:prev}{link:today}{link:next}</div>{months}{popup:start}<div class="datepick-ctrl">{link:clear}{link:close}</div>{popup:end}<div class="datepick-clear-fix"></div></div>',
				monthRow: '<div class="datepick-month-row">{months}</div>',
				month: '<div class="datepick-month"><div class="datepick-month-header">{monthHeader}</div><table><thead>{weekHeader}</thead><tbody>{weeks}</tbody></table></div>',
				weekHeader: "<tr>{days}</tr>",
				dayHeader: "<th>{day}</th>",
				week: "<tr>{days}</tr>",
				day: "<td>{day}</td>",
				monthSelector: ".datepick-month",
				daySelector: "td",
				rtlClass: "datepick-rtl",
				multiClass: "datepick-multi",
				defaultClass: "",
				selectedClass: "datepick-selected",
				highlightedClass: "datepick-highlight",
				todayClass: "datepick-today",
				otherMonthClass: "datepick-other-month",
				weekendClass: "datepick-weekend",
				commandClass: "datepick-cmd",
				commandButtonClass: "",
				commandLinkClass: "",
				disabledClass: "datepick-disabled",
			},
			setDefaults: function (t) {
				return e.extend(this._defaults, t || {}), this;
			},
			_ticksTo1970: 24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 60 * 60 * 1e7,
			_msPerDay: 864e5,
			ATOM: "yyyy-mm-dd",
			COOKIE: "D, dd M yyyy",
			FULL: "DD, MM d, yyyy",
			ISO_8601: "yyyy-mm-dd",
			JULIAN: "J",
			RFC_822: "D, d M yy",
			RFC_850: "DD, dd-M-yy",
			RFC_1036: "D, d M yy",
			RFC_1123: "D, d M yyyy",
			RFC_2822: "D, d M yyyy",
			RSS: "D, d M yy",
			TICKS: "!",
			TIMESTAMP: "@",
			W3C: "yyyy-mm-dd",
			formatDate: function (e, t, i) {
				if (("string" != typeof e && ((i = t), (t = e), (e = "")), !t)) return "";
				e = e || this._defaults.dateFormat;
				for (
					var a = (i = i || {}).dayNamesShort || this._defaults.dayNamesShort,
						s = i.dayNames || this._defaults.dayNames,
						r = i.monthNamesShort || this._defaults.monthNamesShort,
						o = i.monthNames || this._defaults.monthNames,
						n = i.calculateWeek || this._defaults.calculateWeek,
						l = function (t, i) {
							for (var a = 1; p + a < e.length && e.charAt(p + a) == t; ) a++;
							return (p += a - 1), Math.floor(a / (i || 1)) > 1;
						},
						d = function (e, t, i, a) {
							var s = "" + t;
							if (l(e, a)) for (; s.length < i; ) s = "0" + s;
							return s;
						},
						c = function (e, t, i, a) {
							return l(e) ? a[t] : i[t];
						},
						u = "",
						h = !1,
						p = 0;
					p < e.length;
					p++
				)
					if (h) "'" != e.charAt(p) || l("'") ? (u += e.charAt(p)) : (h = !1);
					else
						switch (e.charAt(p)) {
							case "d":
								u += d("d", t.getDate(), 2);
								break;
							case "D":
								u += c("D", t.getDay(), a, s);
								break;
							case "o":
								u += d("o", this.dayOfYear(t), 3);
								break;
							case "w":
								u += d("w", n(t), 2);
								break;
							case "m":
								u += d("m", t.getMonth() + 1, 2);
								break;
							case "M":
								u += c("M", t.getMonth(), r, o);
								break;
							case "y":
								u += l("y", 2) ? t.getFullYear() : (t.getFullYear() % 100 < 10 ? "0" : "") + (t.getFullYear() % 100);
								break;
							case "@":
								u += Math.floor(t.getTime() / 1e3);
								break;
							case "!":
								u += 1e4 * t.getTime() + this._ticksTo1970;
								break;
							case "'":
								l("'") ? (u += "'") : (h = !0);
								break;
							default:
								u += e.charAt(p);
						}
				return u;
			},
			parseDate: function (e, t, i) {
				if (null == t) throw "Invalid arguments";
				if ("" == (t = "object" == typeof t ? t.toString() : t + "")) return null;
				e = e || this._defaults.dateFormat;
				var a = (i = i || {}).shortYearCutoff || this._defaults.shortYearCutoff;
				a = "string" != typeof a ? a : (this.today().getFullYear() % 100) + parseInt(a, 10);
				for (
					var s = i.dayNamesShort || this._defaults.dayNamesShort,
						r = i.dayNames || this._defaults.dayNames,
						o = i.monthNamesShort || this._defaults.monthNamesShort,
						n = i.monthNames || this._defaults.monthNames,
						l = -1,
						d = -1,
						c = -1,
						u = -1,
						h = !1,
						p = !1,
						g = function (t, i) {
							for (var a = 1; v + a < e.length && e.charAt(v + a) == t; ) a++;
							return (v += a - 1), Math.floor(a / (i || 1)) > 1;
						},
						f = function (e, i) {
							var a = [2, 3, g(e, i) ? 4 : 2, 11, 20]["oy@!".indexOf(e) + 1],
								s = new RegExp("^-?\\d{1," + a + "}"),
								r = t.substring(b).match(s);
							if (!r) throw "Missing number at position {0}".replace(/\{0\}/, b);
							return (b += r[0].length), parseInt(r[0], 10);
						},
						m = function (e, i, a, s) {
							for (var r = g(e, s) ? a : i, o = 0; o < r.length; o++) if (t.substr(b, r[o].length).toLowerCase() == r[o].toLowerCase()) return (b += r[o].length), o + 1;
							throw "Unknown name at position {0}".replace(/\{0\}/, b);
						},
						y = function () {
							if (t.charAt(b) != e.charAt(v)) throw "Unexpected literal at position {0}".replace(/\{0\}/, b);
							b++;
						},
						b = 0,
						v = 0;
					v < e.length;
					v++
				)
					if (p) "'" != e.charAt(v) || g("'") ? y() : (p = !1);
					else
						switch (e.charAt(v)) {
							case "d":
								c = f("d");
								break;
							case "D":
								m("D", s, r);
								break;
							case "o":
								u = f("o");
								break;
							case "w":
								f("w");
								break;
							case "m":
								d = f("m");
								break;
							case "M":
								d = m("M", o, n);
								break;
							case "y":
								var x = v;
								(h = !g("y", 2)), (v = x), (l = f("y", 2));
								break;
							case "@":
								(l = (k = this._normaliseDate(new Date(1e3 * f("@")))).getFullYear()), (d = k.getMonth() + 1), (c = k.getDate());
								break;
							case "!":
								var k;
								(l = (k = this._normaliseDate(new Date((f("!") - this._ticksTo1970) / 1e4))).getFullYear()), (d = k.getMonth() + 1), (c = k.getDate());
								break;
							case "*":
								b = t.length;
								break;
							case "'":
								g("'") ? y() : (p = !0);
								break;
							default:
								y();
						}
				if (b < t.length) throw "Additional text found at end";
				if ((-1 == l ? (l = this.today().getFullYear()) : l < 100 && h && (l += -1 == a ? 1900 : this.today().getFullYear() - (this.today().getFullYear() % 100) - (l <= a ? 0 : 100)), u > -1)) {
					(d = 1), (c = u);
					for (var w = this.daysInMonth(l, d); c > w; w = this.daysInMonth(l, d)) d++, (c -= w);
				}
				if ((k = this.newDate(l, d, c)).getFullYear() != l || k.getMonth() + 1 != d || k.getDate() != c) throw "Invalid date";
				return k;
			},
			determineDate: function (e, t, i, s, r) {
				return (
					i && "object" != typeof i && ((r = s), (s = i), (i = null)),
					"string" != typeof s && ((r = s), (s = "")),
					(t = t ? a.newDate(t) : null),
					null == e
						? t
						: "string" == typeof e
						? (function (e) {
								try {
									return a.parseDate(s, e, r);
								} catch (e) {}
								for (var t = ((e = e.toLowerCase()).match(/^c/) && i ? a.newDate(i) : null) || a.today(), o = /([+-]?[0-9]+)\s*(d|w|m|y)?/g, n = null; (n = o.exec(e)); ) t = a.add(t, parseInt(n[1], 10), n[2] || "d");
								return t;
						  })(e)
						: "number" == typeof e
						? isNaN(e) || e == 1 / 0 || e == -1 / 0
							? t
							: a.add(a.today(), e, "d")
						: a.newDate(e)
				);
			},
			daysInMonth: function (e, t) {
				return (t = e.getFullYear ? e.getMonth() + 1 : t), (e = e.getFullYear ? e.getFullYear() : e), this.newDate(e, t + 1, 0).getDate();
			},
			dayOfYear: function (e, t, i) {
				var a = e.getFullYear ? e : this.newDate(e, t, i),
					s = this.newDate(a.getFullYear(), 1, 1);
				return Math.floor((a.getTime() - s.getTime()) / this._msPerDay) + 1;
			},
			iso8601Week: function (e, t, i) {
				var a = e.getFullYear ? new Date(e.getTime()) : this.newDate(e, t, i);
				a.setDate(a.getDate() + 4 - (a.getDay() || 7));
				var s = a.getTime();
				return a.setMonth(0, 1), Math.floor(Math.round((s - a) / 864e5) / 7) + 1;
			},
			today: function () {
				return this._normaliseDate(new Date());
			},
			newDate: function (e, t, i) {
				return e ? (e.getFullYear ? this._normaliseDate(new Date(e.getTime())) : new Date(e, t - 1, i, 12)) : null;
			},
			_normaliseDate: function (e) {
				return e && e.setHours(12, 0, 0, 0), e;
			},
			year: function (e, t) {
				return e.setFullYear(t), this._normaliseDate(e);
			},
			month: function (e, t) {
				return e.setMonth(t - 1), this._normaliseDate(e);
			},
			day: function (e, t) {
				return e.setDate(t), this._normaliseDate(e);
			},
			add: function (e, t, i) {
				if ("d" == i || "w" == i) this._normaliseDate(e), e.setDate(e.getDate() + t * ("w" == i ? 7 : 1));
				else {
					var s = e.getFullYear() + ("y" == i ? t : 0),
						r = e.getMonth() + ("m" == i ? t : 0);
					e.setTime(a.newDate(s, r + 1, Math.min(e.getDate(), this.daysInMonth(s, r + 1))).getTime());
				}
				return e;
			},
			_applyMonthsOffset: function (t, i) {
				var s = i.options.monthsOffset;
				return e.isFunction(s) && (s = s.apply(i.target[0], [t])), a.add(t, -s, "m");
			},
			_attachPlugin: function (t, i) {
				if (!(t = e(t)).hasClass(this.markerClassName)) {
					var s = e.fn.metadata ? t.metadata() : {},
						r = {
							options: e.extend({}, this._defaults, s, i),
							target: t,
							selectedDates: [],
							drawDate: null,
							pickingRange: !1,
							inline: e.inArray(t[0].nodeName.toLowerCase(), ["div", "span"]) > -1,
							get: function (t) {
								return e.inArray(t, ["defaultDate", "minDate", "maxDate"]) > -1 ? a.determineDate(this.options[t], null, this.selectedDates[0], this.options.dateFormat, r.getConfig()) : this.options[t];
							},
							curMinDate: function () {
								return this.pickingRange ? this.selectedDates[0] : this.get("minDate");
							},
							getConfig: function () {
								return {
									dayNamesShort: this.options.dayNamesShort,
									dayNames: this.options.dayNames,
									monthNamesShort: this.options.monthNamesShort,
									monthNames: this.options.monthNames,
									calculateWeek: this.options.calculateWeek,
									shortYearCutoff: this.options.shortYearCutoff,
								};
							},
						};
					t.addClass(this.markerClassName).data(this.propertyName, r),
						r.inline
							? ((r.drawDate = a._checkMinMax(a.newDate(r.selectedDates[0] || r.get("defaultDate") || a.today()), r)), (r.prevDate = a.newDate(r.drawDate)), this._update(t[0]), e.fn.mousewheel && t.mousewheel(this._doMouseWheel))
							: (this._attachments(t, r),
							  t
									.bind("keydown." + this.propertyName, this._keyDown)
									.bind("keypress." + this.propertyName, this._keyPress)
									.bind("keyup." + this.propertyName, this._keyUp),
							  t.attr("disabled") && this._disablePlugin(t[0]));
				}
			},
			_optionPlugin: function (t, i, s) {
				var r = (t = e(t)).data(this.propertyName);
				if (!i || ("string" == typeof i && null == s)) {
					var o = i;
					return (i = (r || {}).options) && o ? i[o] : i;
				}
				if (t.hasClass(this.markerClassName)) {
					if (("string" == typeof (i = i || {}) && ((o = i), ((i = {})[o] = s)), i.calendar && i.calendar != r.options.calendar)) {
						var n = function (e) {
							return "object" == typeof r.options[e] ? null : r.options[e];
						};
						(i = e.extend(
							{
								defaultDate: n("defaultDate"),
								minDate: n("minDate"),
								maxDate: n("maxDate"),
							},
							i
						)),
							(r.selectedDates = []),
							(r.drawDate = null);
					}
					var l = r.selectedDates;
					e.extend(r.options, i), this._setDatePlugin(t[0], l, null, !1, !0), (r.pickingRange = !1), (r.drawDate = a.newDate(this._checkMinMax((r.options.defaultDate ? r.get("defaultDate") : r.drawDate) || r.get("defaultDate") || a.today(), r))), r.inline || this._attachments(t, r), (r.inline || r.div) && this._update(t[0]);
				}
			},
			_attachments: function (t, i) {
				t.unbind("focus." + this.propertyName), i.options.showOnFocus && t.bind("focus." + this.propertyName, this._showPlugin), i.trigger && i.trigger.remove();
				var s = i.options.showTrigger;
				(i.trigger = s
					? e(s)
							.clone()
							.removeAttr("id")
							.addClass(this._triggerClass)
							[i.options.isRTL ? "insertBefore" : "insertAfter"](t)
							.click(function () {
								a._isDisabledPlugin(t[0]) || a[a.curInst == i ? "_hidePlugin" : "_showPlugin"](t[0]);
							})
					: e([])),
					this._autoSize(t, i);
				var r = this._extractDates(i, t.val());
				r && this._setDatePlugin(t[0], r, null, !0);
				var o = i.get("defaultDate");
				i.options.selectDefaultDate && o && 0 == i.selectedDates.length && this._setDatePlugin(t[0], a.newDate(o || a.today()));
			},
			_autoSize: function (e, t) {
				if (t.options.autoSize && !t.inline) {
					var i = a.newDate(2009, 10, 20),
						s = t.options.dateFormat;
					if (s.match(/[DM]/)) {
						var r = function (e) {
							for (var t = 0, i = 0, a = 0; a < e.length; a++) e[a].length > t && ((t = e[a].length), (i = a));
							return i;
						};
						i.setMonth(r(t.options[s.match(/MM/) ? "monthNames" : "monthNamesShort"])), i.setDate(r(t.options[s.match(/DD/) ? "dayNames" : "dayNamesShort"]) + 20 - i.getDay());
					}
					t.target.attr("size", a.formatDate(s, i, t.getConfig()).length);
				}
			},
			_destroyPlugin: function (t) {
				if ((t = e(t)).hasClass(this.markerClassName)) {
					var i = t.data(this.propertyName);
					i.trigger && i.trigger.remove(),
						t
							.removeClass(this.markerClassName)
							.removeData(this.propertyName)
							.empty()
							.unbind("." + this.propertyName),
						i.inline && e.fn.mousewheel && t.unmousewheel(),
						!i.inline && i.options.autoSize && t.removeAttr("size");
				}
			},
			multipleEvents: function (e) {
				var t = arguments;
				return function (e) {
					for (var i = 0; i < t.length; i++) t[i].apply(this, arguments);
				};
			},
			_enablePlugin: function (t) {
				if ((t = e(t)).hasClass(this.markerClassName)) {
					var i = t.data(this.propertyName);
					i.inline
						? t
								.children("." + this._disableClass)
								.remove()
								.end()
								.find("button,select")
								.removeAttr("disabled")
								.end()
								.find("a")
								.attr("href", "javascript:void(0)")
						: (t.prop("disabled", !1),
						  i.trigger
								.filter("button." + this._triggerClass)
								.removeAttr("disabled")
								.end()
								.filter("img." + this._triggerClass)
								.css({
									opacity: "1.0",
									cursor: "",
								})),
						(this._disabled = e.map(this._disabled, function (e) {
							return e == t[0] ? null : e;
						}));
				}
			},
			_disablePlugin: function (t) {
				if ((t = e(t)).hasClass(this.markerClassName)) {
					var i = t.data(this.propertyName);
					if (i.inline) {
						var a = t.children(":last"),
							s = a.offset(),
							r = {
								left: 0,
								top: 0,
							};
						a.parents().each(function () {
							if ("relative" == e(this).css("position")) return (r = e(this).offset()), !1;
						});
						var o = t.css("zIndex");
						(o = ("auto" == o ? 0 : parseInt(o, 10)) + 1),
							t
								.prepend('<div class="' + this._disableClass + '" style="width: ' + a.outerWidth() + "px; height: " + a.outerHeight() + "px; left: " + (s.left - r.left) + "px; top: " + (s.top - r.top) + "px; z-index: " + o + '"></div>')
								.find("button,select")
								.attr("disabled", "disabled")
								.end()
								.find("a")
								.removeAttr("href");
					} else
						t.prop("disabled", !0),
							i.trigger
								.filter("button." + this._triggerClass)
								.attr("disabled", "disabled")
								.end()
								.filter("img." + this._triggerClass)
								.css({
									opacity: "0.5",
									cursor: "default",
								});
					(this._disabled = e.map(this._disabled, function (e) {
						return e == t[0] ? null : e;
					})),
						this._disabled.push(t[0]);
				}
			},
			_isDisabledPlugin: function (t) {
				return t && e.inArray(t, this._disabled) > -1;
			},
			_showPlugin: function (t) {
				var i = (t = e(t.target || t)).data(a.propertyName);
				if (a.curInst != i && (a.curInst && a._hidePlugin(a.curInst, !0), i)) {
					(i.lastVal = null), (i.selectedDates = a._extractDates(i, t.val())), (i.pickingRange = !1), (i.drawDate = a._checkMinMax(a.newDate(i.selectedDates[0] || i.get("defaultDate") || a.today()), i)), (i.prevDate = a.newDate(i.drawDate)), (a.curInst = i), a._update(t[0], !0);
					var s = a._checkOffset(i);
					i.div.css({
						left: s.left,
						top: s.top,
					});
					var r = i.options.showAnim,
						o = i.options.showSpeed;
					if (((o = "normal" == o && e.ui && e.ui.version >= "1.8" ? "_default" : o), e.effects && e.effects[r])) {
						var n = i.div.data();
						for (var l in n) l.match(/^ec\.storage\./) && (n[l] = i._mainDiv.css(l.replace(/ec\.storage\./, "")));
						i.div.data(n).show(r, i.options.showOptions, o);
					} else i.div[r || "show"](r ? o : "");
				}
			},
			_extractDates: function (e, t) {
				if (t != e.lastVal) {
					(e.lastVal = t), (t = t.split(e.options.multiSelect ? e.options.multiSeparator : e.options.rangeSelect ? e.options.rangeSeparator : "\0"));
					for (var i = [], s = 0; s < t.length; s++)
						try {
							var r = a.parseDate(e.options.dateFormat, t[s], e.getConfig());
							if (r) {
								for (var o = !1, n = 0; n < i.length; n++)
									if (i[n].getTime() == r.getTime()) {
										o = !0;
										break;
									}
								o || i.push(r);
							}
						} catch (e) {}
					return i.splice(e.options.multiSelect || (e.options.rangeSelect ? 2 : 1), i.length), e.options.rangeSelect && 1 == i.length && (i[1] = i[0]), i;
				}
			},
			_update: function (t, i) {
				var s = (t = e(t.target || t)).data(a.propertyName);
				s &&
					((s.inline || a.curInst == s) && (!e.isFunction(s.options.onChangeMonthYear) || (s.prevDate && s.prevDate.getFullYear() == s.drawDate.getFullYear() && s.prevDate.getMonth() == s.drawDate.getMonth()) || s.options.onChangeMonthYear.apply(t[0], [s.drawDate.getFullYear(), s.drawDate.getMonth() + 1])),
					s.inline
						? t.html(this._generateContent(t[0], s))
						: a.curInst == s &&
						  (s.div ||
								((s.div = e("<div></div>")
									.addClass(this._popupClass)
									.css({
										display: i ? "none" : "static",
										position: "absolute",
										left: t.offset().left,
										top: t.offset().top + t.outerHeight(),
									})
									.appendTo(e(s.options.popupContainer || "body"))),
								e.fn.mousewheel && s.div.mousewheel(this._doMouseWheel)),
						  s.div.html(this._generateContent(t[0], s)),
						  t.focus()));
			},
			_updateInput: function (t, i) {
				var s = e.data(t, this.propertyName);
				if (s) {
					for (var r = "", o = "", n = s.options.multiSelect ? s.options.multiSeparator : s.options.rangeSeparator, l = s.options.altFormat || s.options.dateFormat, d = 0; d < s.selectedDates.length; d++) (r += i ? "" : (d > 0 ? n : "") + a.formatDate(s.options.dateFormat, s.selectedDates[d], s.getConfig())), (o += (d > 0 ? n : "") + a.formatDate(l, s.selectedDates[d], s.getConfig()));
					s.inline || i || e(t).val(r), e(s.options.altField).val(o), !e.isFunction(s.options.onSelect) || i || s.inSelect || ((s.inSelect = !0), s.options.onSelect.apply(t, [s.selectedDates]), (s.inSelect = !1));
				}
			},
			_getBorders: function (e) {
				var t = function (e) {
					return (
						{
							thin: 1,
							medium: 3,
							thick: 5,
						}[e] || e
					);
				};
				return [parseFloat(t(e.css("border-left-width"))), parseFloat(t(e.css("border-top-width")))];
			},
			_checkOffset: function (t) {
				var i = t.target.is(":hidden") && t.trigger ? t.trigger : t.target,
					a = i.offset(),
					s = e(window).width(),
					r = e(window).height();
				if (0 == s) return a;
				var o = !1;
				e(t.target)
					.parents()
					.each(function () {
						return !(o |= "fixed" == e(this).css("position"));
					});
				var n = document.documentElement.scrollLeft || document.body.scrollLeft,
					l = document.documentElement.scrollTop || document.body.scrollTop,
					d = a.top - (o ? l : 0) - t.div.outerHeight(),
					c = a.top - (o ? l : 0) + i.outerHeight(),
					u = a.left - (o ? n : 0),
					h = a.left - (o ? n : 0) + i.outerWidth() - t.div.outerWidth(),
					p = a.left - n + t.div.outerWidth() > s,
					g = a.top - l + t.target.outerHeight() + t.div.outerHeight() > r;
				t.div.css("position", o ? "fixed" : "absolute");
				var f = t.options.alignment;
				return (
					((a =
						"topLeft" == f
							? {
									left: u,
									top: d,
							  }
							: "topRight" == f
							? {
									left: h,
									top: d,
							  }
							: "bottomLeft" == f
							? {
									left: u,
									top: c,
							  }
							: "bottomRight" == f
							? {
									left: h,
									top: c,
							  }
							: "top" == f
							? {
									left: t.options.isRTL || p ? h : u,
									top: d,
							  }
							: {
									left: t.options.isRTL || p ? h : u,
									top: g ? d : c,
							  }).left = Math.max(o ? 0 : n, a.left)),
					(a.top = Math.max(o ? 0 : l, a.top)),
					a
				);
			},
			_checkExternalClick: function (t) {
				if (a.curInst) {
					var i = e(t.target);
					i.parents().andSelf().hasClass(a._popupClass) || i.hasClass(a.markerClassName) || i.parents().andSelf().hasClass(a._triggerClass) || a._hidePlugin(a.curInst);
				}
			},
			_hidePlugin: function (t, i) {
				if (t) {
					var s = e.data(t, this.propertyName) || t;
					if (s && s == a.curInst) {
						var r = i ? "" : s.options.showAnim,
							o = s.options.showSpeed;
						o = "normal" == o && e.ui && e.ui.version >= "1.8" ? "_default" : o;
						var n = function () {
							s.div && (s.div.remove(), (s.div = null), (a.curInst = null), e.isFunction(s.options.onClose) && s.options.onClose.apply(t, [s.selectedDates]));
						};
						if ((s.div.stop(), e.effects && e.effects[r])) s.div.hide(r, s.options.showOptions, o, n);
						else {
							var l = "slideDown" == r ? "slideUp" : "fadeIn" == r ? "fadeOut" : "hide";
							s.div[l](r ? o : "", n);
						}
						r || n();
					}
				}
			},
			_keyDown: function (t) {
				var i = t.target,
					s = e.data(i, a.propertyName),
					r = !1;
				if (s.div)
					if (9 == t.keyCode) a._hidePlugin(i);
					else if (13 == t.keyCode) a._selectDatePlugin(i, e("a." + s.options.renderer.highlightedClass, s.div)[0]), (r = !0);
					else {
						var o = s.options.commands;
						for (var n in o) {
							var l;
							if ((l = o[n]).keystroke.keyCode == t.keyCode && !!l.keystroke.ctrlKey == !(!t.ctrlKey && !t.metaKey) && !!l.keystroke.altKey == t.altKey && !!l.keystroke.shiftKey == t.shiftKey) {
								a._performActionPlugin(i, n), (r = !0);
								break;
							}
						}
					}
				else (l = s.options.commands.current).keystroke.keyCode == t.keyCode && !!l.keystroke.ctrlKey == !(!t.ctrlKey && !t.metaKey) && !!l.keystroke.altKey == t.altKey && !!l.keystroke.shiftKey == t.shiftKey && (a._showPlugin(i), (r = !0));
				return (s.ctrlKey = (t.keyCode < 48 && 32 != t.keyCode) || t.ctrlKey || t.metaKey), r && (t.preventDefault(), t.stopPropagation()), !r;
			},
			_keyPress: function (t) {
				var i = e.data(t.target, a.propertyName);
				if (i && i.options.constrainInput) {
					var s = String.fromCharCode(t.keyCode || t.charCode),
						r = a._allowedChars(i);
					return t.metaKey || i.ctrlKey || s < " " || !r || r.indexOf(s) > -1;
				}
				return !0;
			},
			_allowedChars: function (e) {
				for (var t = e.options.multiSelect ? e.options.multiSeparator : e.options.rangeSelect ? e.options.rangeSeparator : "", i = !1, a = !1, s = e.options.dateFormat, r = 0; r < s.length; r++) {
					var o = s.charAt(r);
					if (i) "'" == o && "'" != s.charAt(r + 1) ? (i = !1) : (t += o);
					else
						switch (o) {
							case "d":
							case "m":
							case "o":
							case "w":
								(t += a ? "" : "0123456789"), (a = !0);
								break;
							case "y":
							case "@":
							case "!":
								(t += (a ? "" : "0123456789") + "-"), (a = !0);
								break;
							case "J":
								(t += (a ? "" : "0123456789") + "-."), (a = !0);
								break;
							case "D":
							case "M":
							case "Y":
								return null;
							case "'":
								"'" == s.charAt(r + 1) ? (t += "'") : (i = !0);
								break;
							default:
								t += o;
						}
				}
				return t;
			},
			_keyUp: function (t) {
				var i = t.target,
					s = e.data(i, a.propertyName);
				if (s && !s.ctrlKey && s.lastVal != s.target.val())
					try {
						var r = a._extractDates(s, s.target.val());
						r.length > 0 && a._setDatePlugin(i, r, null, !0);
					} catch (t) {}
				return !0;
			},
			_doMouseWheel: function (t, i) {
				var s = (a.curInst && a.curInst.target[0]) || e(t.target).closest("." + a.markerClassName)[0];
				if (!a._isDisabledPlugin(s)) {
					var r = e.data(s, a.propertyName);
					r.options.useMouseWheel && ((i = i < 0 ? -1 : 1), a._changeMonthPlugin(s, -r.options[t.ctrlKey ? "monthsToJump" : "monthsToStep"] * i)), t.preventDefault();
				}
			},
			_clearPlugin: function (t) {
				var i = e.data(t, this.propertyName);
				if (i) {
					(i.selectedDates = []), this._hidePlugin(t);
					var s = i.get("defaultDate");
					i.options.selectDefaultDate && s ? this._setDatePlugin(t, a.newDate(s || a.today())) : this._updateInput(t);
				}
			},
			_getDatePlugin: function (t) {
				var i = e.data(t, this.propertyName);
				return i ? i.selectedDates : [];
			},
			_setDatePlugin: function (t, i, s, r, o) {
				var n = e.data(t, this.propertyName);
				if (n) {
					e.isArray(i) || ((i = [i]), s && i.push(s));
					var l = n.get("minDate"),
						d = n.get("maxDate"),
						c = n.selectedDates[0];
					n.selectedDates = [];
					for (var u = 0; u < i.length; u++) {
						var h = a.determineDate(i[u], null, c, n.options.dateFormat, n.getConfig());
						if (h && (!l || h.getTime() >= l.getTime()) && (!d || h.getTime() <= d.getTime())) {
							for (var p = !1, g = 0; g < n.selectedDates.length; g++)
								if (n.selectedDates[g].getTime() == h.getTime()) {
									p = !0;
									break;
								}
							p || n.selectedDates.push(h);
						}
					}
					if ((n.selectedDates.splice(n.options.multiSelect || (n.options.rangeSelect ? 2 : 1), n.selectedDates.length), n.options.rangeSelect)) {
						switch (n.selectedDates.length) {
							case 1:
								n.selectedDates[1] = n.selectedDates[0];
								break;
							case 2:
								n.selectedDates[1] = n.selectedDates[0].getTime() > n.selectedDates[1].getTime() ? n.selectedDates[0] : n.selectedDates[1];
						}
						n.pickingRange = !1;
					}
					(n.prevDate = n.drawDate ? a.newDate(n.drawDate) : null), (n.drawDate = this._checkMinMax(a.newDate(n.selectedDates[0] || n.get("defaultDate") || a.today()), n)), o || (this._update(t), this._updateInput(t, r));
				}
			},
			_isSelectablePlugin: function (t, i) {
				var s = e.data(t, this.propertyName);
				return !!s && ((i = a.determineDate(i, s.selectedDates[0] || this.today(), null, s.options.dateFormat, s.getConfig())), this._isSelectable(t, i, s.options.onDate, s.get("minDate"), s.get("maxDate")));
			},
			_isSelectable: function (t, i, a, s, r) {
				return (
					0 !=
						("boolean" == typeof a
							? {
									selectable: a,
							  }
							: e.isFunction(a)
							? a.apply(t, [i, !0])
							: {}
						).selectable &&
					(!s || i.getTime() >= s.getTime()) &&
					(!r || i.getTime() <= r.getTime())
				);
			},
			_performActionPlugin: function (t, i) {
				var a = e.data(t, this.propertyName);
				if (a && !this._isDisabledPlugin(t)) {
					var s = a.options.commands;
					s[i] && s[i].enabled.apply(t, [a]) && s[i].action.apply(t, [a]);
				}
			},
			_showMonthPlugin: function (t, i, s, r) {
				var o = e.data(t, this.propertyName);
				if (o && (null != r || o.drawDate.getFullYear() != i || o.drawDate.getMonth() + 1 != s)) {
					o.prevDate = a.newDate(o.drawDate);
					var n = this._checkMinMax(null != i ? a.newDate(i, s, 1) : a.today(), o);
					(o.drawDate = a.newDate(n.getFullYear(), n.getMonth() + 1, null != r ? r : Math.min(o.drawDate.getDate(), a.daysInMonth(n.getFullYear(), n.getMonth() + 1)))), this._update(t);
				}
			},
			_changeMonthPlugin: function (t, i) {
				var s = e.data(t, this.propertyName);
				if (s) {
					var r = a.add(a.newDate(s.drawDate), i, "m");
					this._showMonthPlugin(t, r.getFullYear(), r.getMonth() + 1);
				}
			},
			_changeDayPlugin: function (t, i) {
				var s = e.data(t, this.propertyName);
				if (s) {
					var r = a.add(a.newDate(s.drawDate), i, "d");
					this._showMonthPlugin(t, r.getFullYear(), r.getMonth() + 1, r.getDate());
				}
			},
			_checkMinMax: function (e, t) {
				var i = t.get("minDate"),
					s = t.get("maxDate");
				return (e = i && e.getTime() < i.getTime() ? a.newDate(i) : e), s && e.getTime() > s.getTime() ? a.newDate(s) : e;
			},
			_retrieveDatePlugin: function (t, i) {
				return e.data(t, this.propertyName) ? this._normaliseDate(new Date(parseInt(i.className.replace(/^.*dp(-?\d+).*$/, "$1"), 10))) : null;
			},
			_selectDatePlugin: function (t, i) {
				var s = e.data(t, this.propertyName);
				if (s && !this._isDisabledPlugin(t)) {
					var r = this._retrieveDatePlugin(t, i);
					if (s.options.multiSelect) {
						for (var o = !1, n = 0; n < s.selectedDates.length; n++)
							if (r.getTime() == s.selectedDates[n].getTime()) {
								s.selectedDates.splice(n, 1), (o = !0);
								break;
							}
						!o && s.selectedDates.length < s.options.multiSelect && s.selectedDates.push(r);
					} else s.options.rangeSelect ? (s.pickingRange ? (s.selectedDates[1] = r) : (s.selectedDates = [r, r]), (s.pickingRange = !s.pickingRange)) : (s.selectedDates = [r]);
					(s.prevDate = a.newDate(r)), this._updateInput(t), s.inline || s.pickingRange || s.selectedDates.length < (s.options.multiSelect || (s.options.rangeSelect ? 2 : 1)) ? this._update(t) : this._hidePlugin(t);
				}
			},
			_generateContent: function (t, i) {
				var s = i.options.monthsToShow;
				(s = e.isArray(s) ? s : [1, s]), (i.drawDate = this._checkMinMax(i.drawDate || i.get("defaultDate") || a.today(), i));
				for (var r = a._applyMonthsOffset(a.newDate(i.drawDate), i), o = "", n = 0; n < s[0]; n++) {
					for (var l = "", d = 0; d < s[1]; d++) (l += this._generateMonth(t, i, r.getFullYear(), r.getMonth() + 1, i.options.renderer, 0 == n && 0 == d)), a.add(r, 1, "m");
					o += this._prepare(i.options.renderer.monthRow, i).replace(/\{months\}/, l);
				}
				var c = this._prepare(i.options.renderer.picker, i)
						.replace(/\{months\}/, o)
						.replace(/\{weekHeader\}/g, this._generateDayHeaders(i, i.options.renderer)),
					u = function (e, s, r, o, n) {
						if (-1 != c.indexOf("{" + e + ":" + o + "}")) {
							var l = i.options.commands[o],
								d = i.options.commandsAsDateFormat ? l.date.apply(t, [i]) : null;
							c = c.replace(new RegExp("\\{" + e + ":" + o + "\\}", "g"), "<" + s + (l.status ? ' title="' + i.options[l.status] + '"' : "") + ' class="' + i.options.renderer.commandClass + " " + i.options.renderer.commandClass + "-" + o + " " + n + (l.enabled(i) ? "" : " " + i.options.renderer.disabledClass) + '">' + (d ? a.formatDate(i.options[l.text], d, i.getConfig()) : i.options[l.text]) + "</" + r + ">");
						}
					};
				for (var h in i.options.commands) u("button", 'button type="button"', "button", h, i.options.renderer.commandButtonClass), u("link", 'a href="javascript:void(0)"', "a", h, i.options.renderer.commandLinkClass);
				if (((c = e(c)), s[1] > 1)) {
					var p = 0;
					e(i.options.renderer.monthSelector, c).each(function () {
						var t = ++p % s[1];
						e(this).addClass(1 == t ? "first" : 0 == t ? "last" : "");
					});
				}
				var g = this;
				return (
					c
						.find(i.options.renderer.daySelector + " a")
						.hover(
							function () {
								e(this).addClass(i.options.renderer.highlightedClass);
							},
							function () {
								(i.inline ? e(this).parents("." + g.markerClassName) : i.div).find(i.options.renderer.daySelector + " a").removeClass(i.options.renderer.highlightedClass);
							}
						)
						.click(function () {
							g._selectDatePlugin(t, this);
						})
						.end()
						.find("select." + this._monthYearClass + ":not(." + this._anyYearClass + ")")
						.change(function () {
							var i = e(this).val().split("/");
							g._showMonthPlugin(t, parseInt(i[1], 10), parseInt(i[0], 10));
						})
						.end()
						.find("select." + this._anyYearClass)
						.click(function () {
							e(this)
								.css("visibility", "hidden")
								.next("input")
								.css({
									left: this.offsetLeft,
									top: this.offsetTop,
									width: this.offsetWidth,
									height: this.offsetHeight,
								})
								.show()
								.focus();
						})
						.end()
						.find("input." + g._monthYearClass)
						.change(function () {
							try {
								var a = parseInt(e(this).val(), 10);
								(a = isNaN(a) ? i.drawDate.getFullYear() : a), g._showMonthPlugin(t, a, i.drawDate.getMonth() + 1, i.drawDate.getDate());
							} catch (e) {
								alert(e);
							}
						})
						.keydown(function (t) {
							13 == t.keyCode ? e(t.target).change() : 27 == t.keyCode && (e(t.target).hide().prev("select").css("visibility", "visible"), i.target.focus());
						}),
					c.find("." + i.options.renderer.commandClass).click(function () {
						if (!e(this).hasClass(i.options.renderer.disabledClass)) {
							var s = this.className.replace(new RegExp("^.*" + i.options.renderer.commandClass + "-([^ ]+).*$"), "$1");
							a._performActionPlugin(t, s);
						}
					}),
					i.options.isRTL && c.addClass(i.options.renderer.rtlClass),
					s[0] * s[1] > 1 && c.addClass(i.options.renderer.multiClass),
					i.options.pickerClass && c.addClass(i.options.pickerClass),
					e("body").append(c),
					c.find(i.options.renderer.monthSelector).each(function () {
						e(this).outerWidth();
					}),
					e.isFunction(i.options.onShow) && i.options.onShow.apply(t, [c, i]),
					c
				);
			},
			_generateMonth: function (t, i, s, r, o, n) {
				var l = a.daysInMonth(s, r),
					d = i.options.monthsToShow;
				d = e.isArray(d) ? d : [1, d];
				var c = i.options.fixedWeeks || d[0] * d[1] > 1,
					u = i.options.firstDay,
					h = (a.newDate(s, r, 1).getDay() - u + 7) % 7,
					p = c ? 6 : Math.ceil((h + l) / 7),
					g = i.options.selectOtherMonths && i.options.showOtherMonths,
					f = i.pickingRange ? i.selectedDates[0] : i.get("minDate"),
					m = i.get("maxDate"),
					y = o.week.indexOf("{weekOfYear}") > -1,
					b = a.today(),
					v = a.newDate(s, r, 1);
				a.add(v, -h - (c && v.getDay() == u ? 7 : 0), "d");
				for (var x = v.getTime(), k = "", w = 0; w < p; w++) {
					for (var _ = y ? '<span class="dp' + x + '">' + (e.isFunction(i.options.calculateWeek) ? i.options.calculateWeek(v) : 0) + "</span>" : "", j = "", C = 0; C < 7; C++) {
						var S = !1;
						if (i.options.rangeSelect && i.selectedDates.length > 0) S = v.getTime() >= i.selectedDates[0] && v.getTime() <= i.selectedDates[1];
						else
							for (var Q = 0; Q < i.selectedDates.length; Q++)
								if (i.selectedDates[Q].getTime() == v.getTime()) {
									S = !0;
									break;
								}
						var B = e.isFunction(i.options.onDate) ? i.options.onDate.apply(t, [v, v.getMonth() + 1 == r]) : {},
							D = (g || v.getMonth() + 1 == r) && this._isSelectable(t, v, B.selectable, f, m);
						(j += this._prepare(o.day, i).replace(/\{day\}/g, (D ? '<a href="javascript:void(0)"' : "<span") + ' class="dp' + x + " " + (B.dateClass || "") + (S && (g || v.getMonth() + 1 == r) ? " " + o.selectedClass : "") + (D ? " " + o.defaultClass : "") + ((v.getDay() || 7) < 6 ? "" : " " + o.weekendClass) + (v.getMonth() + 1 == r ? "" : " " + o.otherMonthClass) + (v.getTime() == b.getTime() && v.getMonth() + 1 == r ? " " + o.todayClass : "") + (v.getTime() == i.drawDate.getTime() && v.getMonth() + 1 == r ? " " + o.highlightedClass : "") + '"' + (B.title || (i.options.dayStatus && D) ? ' title="' + (B.title || a.formatDate(i.options.dayStatus, v, i.getConfig())) + '"' : "") + ">" + (i.options.showOtherMonths || v.getMonth() + 1 == r ? B.content || v.getDate() : "&nbsp;") + (D ? "</a>" : "</span>"))), a.add(v, 1, "d"), (x = v.getTime());
					}
					k += this._prepare(o.week, i)
						.replace(/\{days\}/g, j)
						.replace(/\{weekOfYear\}/g, _);
				}
				var $ = this._prepare(o.month, i).match(/\{monthHeader(:[^\}]+)?\}/);
				($ = $[0].length <= 13 ? "MM yyyy" : $[0].substring(13, $[0].length - 1)), ($ = n ? this._generateMonthSelection(i, s, r, f, m, $, o) : a.formatDate($, a.newDate(s, r, 1), i.getConfig()));
				var T = this._prepare(o.weekHeader, i).replace(/\{days\}/g, this._generateDayHeaders(i, o));
				return this._prepare(o.month, i)
					.replace(/\{monthHeader(:[^\}]+)?\}/g, $)
					.replace(/\{weekHeader\}/g, T)
					.replace(/\{weeks\}/g, k);
			},
			_generateDayHeaders: function (e, t) {
				for (var i = "", a = 0; a < 7; a++) {
					var s = (a + e.options.firstDay) % 7;
					i += this._prepare(t.dayHeader, e).replace(/\{day\}/g, '<span class="' + this._curDoWClass + s + '" title="' + e.options.dayNames[s] + '">' + e.options.dayNamesMin[s] + "</span>");
				}
				return i;
			},
			_generateMonthSelection: function (e, t, i, s, r, o) {
				if (!e.options.changeMonth) return a.formatDate(o, a.newDate(t, i, 1), e.getConfig());
				for (var n = e.options["monthNames" + (o.match(/mm/i) ? "" : "Short")], l = o.replace(/m+/i, "\\x2E").replace(/y+/i, "\\x2F"), d = '<select class="' + this._monthYearClass + '" title="' + e.options.monthStatus + '">', c = 1; c <= 12; c++) (!s || a.newDate(t, c, a.daysInMonth(t, c)).getTime() >= s.getTime()) && (!r || a.newDate(t, c, 1).getTime() <= r.getTime()) && (d += '<option value="' + c + "/" + t + '"' + (i == c ? ' selected="selected"' : "") + ">" + n[c - 1] + "</option>");
				(d += "</select>"), (l = l.replace(/\\x2E/, d));
				var u = e.options.yearRange;
				if ("any" == u) d = '<select class="' + this._monthYearClass + " " + this._anyYearClass + '" title="' + e.options.yearStatus + '"><option>' + t + '</option></select><input class="' + this._monthYearClass + " " + this._curMonthClass + i + '" value="' + t + '">';
				else {
					u = u.split(":");
					var h = a.today().getFullYear(),
						p = u[0].match("c[+-].*") ? t + parseInt(u[0].substring(1), 10) : (u[0].match("[+-].*") ? h : 0) + parseInt(u[0], 10),
						g = u[1].match("c[+-].*") ? t + parseInt(u[1].substring(1), 10) : (u[1].match("[+-].*") ? h : 0) + parseInt(u[1], 10);
					(d = '<select class="' + this._monthYearClass + '" title="' + e.options.yearStatus + '">'), (p = a.add(a.newDate(p + 1, 1, 1), -1, "d")), (g = a.newDate(g, 1, 1));
					var f = function (e) {
						0 != e && (d += '<option value="' + i + "/" + e + '"' + (t == e ? ' selected="selected"' : "") + ">" + e + "</option>");
					};
					if (p.getTime() < g.getTime()) {
						(p = (s && s.getTime() > p.getTime() ? s : p).getFullYear()), (g = (r && r.getTime() < g.getTime() ? r : g).getFullYear());
						for (var m = p; m <= g; m++) f(m);
					} else for (p = (r && r.getTime() < p.getTime() ? r : p).getFullYear(), g = (s && s.getTime() > g.getTime() ? s : g).getFullYear(), m = p; m >= g; m--) f(m);
					d += "</select>";
				}
				return l.replace(/\\x2F/, d);
			},
			_prepare: function (e, t) {
				var i = function (t, i) {
					for (;;) {
						var a = e.indexOf("{" + t + ":start}");
						if (-1 == a) return;
						var s = e.substring(a).indexOf("{" + t + ":end}");
						s > -1 && (e = e.substring(0, a) + (i ? e.substr(a + t.length + 8, s - t.length - 8) : "") + e.substring(a + s + t.length + 6));
					}
				};
				i("inline", t.inline), i("popup", !t.inline);
				for (var a = /\{l10n:([^\}]+)\}/, s = null; (s = a.exec(e)); ) e = e.replace(s[0], t.options[s[1]]);
				return e;
			},
		});
		var i = ["getDate", "isDisabled", "isSelectable", "retrieveDate"];
		e.fn.datepick = function (t) {
			var s,
				r,
				o = Array.prototype.slice.call(arguments, 1);
			return (
				(r = o),
				("option" == (s = t) && (0 == r.length || (1 == r.length && "string" == typeof r[0]))) || e.inArray(s, i) > -1
					? a["_" + t + "Plugin"].apply(a, [this[0]].concat(o))
					: this.each(function () {
							if ("string" == typeof t) {
								if (!a["_" + t + "Plugin"]) throw "Unknown command: " + t;
								a["_" + t + "Plugin"].apply(a, [this].concat(o));
							} else a._attachPlugin(this, t || {});
					  })
			);
		};
		var a = (e.datepick = new t());
		e(function () {
			e(document)
				.mousedown(a._checkExternalClick)
				.resize(function () {
					a._hidePlugin(a.curInst);
				});
		});
	})(jQuery),
	(function (e) {
		var t = {
			init: function (t, i) {
				return (
					debug.log("INIT thumbnailScroller"),
					this.each(function () {
						var i = e(this),
							a = i.data("thumbnailScroller"),
							s = i.children(".jTscrollerContainer"),
							r = i.children(".jTscrollerContainer").children(".jTscroller"),
							o = i.parent().children(".jTscrollerNextButton"),
							n = i.parent().children(".jTscrollerPrevButton"),
							l = i.parent().children(".jNextTrigger");
						if (
							(i.parent().children(".jPrevTrigger"),
							void 0 === a
								? ((a = e.extend(
										{
											scrollerType: "hoverPrecise",
											scrollerOrientation: "horizontal",
											scrollEasing: "easeOutCirc",
											scrollEasingAmount: 800,
											acceleration: 2,
											scrollSpeed: 600,
											noScrollCenterSpace: 0,
											autoScrolling: 0,
											autoScrollingSpeed: 8e3,
											autoScrollingEasing: "easeInOutQuad",
											autoScrollingDelay: 2500,
										},
										t
								  )),
								  i.data("thumbnailScroller", a))
								: (a = e.extend(a, t)),
							"horizontal" == a.scrollerOrientation)
						) {
							s.css("width", "999999px");
							var d = r.outerWidth(!0) + s.innerWidth() - s.width();
							s.css("width", d);
						} else d = r.outerWidth(!0);
						var c,
							u,
							h,
							p,
							g = r.outerHeight(!0);
						if (d > i.width() || g > i.height())
							if (
								(l.hover(
									function () {
										h = !0;
									},
									function () {
										h = !1;
									}
								),
								"hoverAccelerate" == a.scrollerType)
							) {
								var f,
									m = 8,
									y = function (e) {
										(c = findPos(this)), (u = e.pageX - c[1]), e.pageY, c[0];
									};
								i.unbind("mouseenter.Thumbnail mouseleave.Thumbnail"),
									i.bind("mouseenter.Thumbnail", function () {
										i.unbind("mousemove.Thumbnail"), i.bind("mousemove.Thumbnail", y), clearInterval(f), (f = setInterval(k, m));
									}),
									i.bind("mouseleave.Thumbnail", function () {
										clearInterval(f), r.stop();
									}),
									n.add(o).hide();
							} else
								"clickButtons" == a.scrollerType &&
									(n.hide(),
									o.show(),
									o.click(function (t) {
										t.preventDefault();
										var s = r.position().left,
											l = d + (s - i.width());
										r.position().top,
											i.height(),
											n.stop().show("fast"),
											"horizontal" == a.scrollerOrientation &&
												(l >= i.width()
													? r.stop().animate(
															{
																left: "-=" + i.width(),
															},
															a.scrollSpeed,
															a.scrollEasing,
															function () {
																if ((l == i.width() && o.stop().hide("fast"), dragInProgress)) {
																	var t = parseInt(e(".ui-sortable-helper").css("left"));
																	e(".ui-sortable-helper").css("left", t + i.width()), e("#sortable").sortable("refresh");
																}
															}
													  )
													: (o.stop().hide("fast"),
													  r.stop().animate(
															{
																left: i.width() - d,
															},
															a.scrollSpeed,
															a.scrollEasing,
															function () {
																if (dragInProgress) {
																	var t = parseInt(e(".ui-sortable-helper").css("left"));
																	e(".ui-sortable-helper").css("left", t + l), e("#sortable").sortable("refresh");
																}
															}
													  )));
									}),
									n.click(function (e) {
										e.preventDefault();
										var t = r.position().left;
										i.width(),
											r.position().top,
											i.height(),
											o.stop().show("fast"),
											"horizontal" == a.scrollerOrientation &&
												(t + i.width() <= 0
													? r.stop().animate(
															{
																left: "+=" + i.width(),
															},
															a.scrollSpeed,
															a.scrollEasing,
															function () {
																t + i.width() == 0 && n.stop().hide("fast");
															}
													  )
													: (n.stop().hide("fast"),
													  r.stop().animate(
															{
																left: 0,
															},
															a.scrollSpeed,
															a.scrollEasing
													  )));
									}));
						else n.add(o).hide();
						var b = i.width() - d,
							v = i.width() / 2 - a.noScrollCenterSpace;

						function x() {
							dragInProgress && e("#sortable").sortable("refresh");
						}

						function k() {
							if (u <= v) p = Math.round(((v - u) / v) * (m + a.acceleration));
							else {
								if (!(u >= i.width() - v || h)) return;
								p = Math.round((-(u - (i.width() - v)) / v) * (m + a.acceleration));
							}
							e(".ui-sortable-helper").add(r).stop(!0, !0);
							var t = r.position().left;
							return p > 0 && 0 == t
								? (x(), !1)
								: p < 0 && t == b
								? (x(), !1)
								: (t + p > 0 && (p = -t),
								  t + p < b && (p = b - t),
								  t + p == b
										? (x(), !1)
										: b == t
										? (x(), !1)
										: (e(".ui-sortable-helper").animate(
												{
													left: "-=" + p,
												},
												m,
												"linear",
												function () {
													x();
												}
										  ),
										  void r.animate(
												{
													left: "+=" + p,
												},
												m,
												"linear",
												function () {
													x();
												}
										  )));
						}
					})
				);
			},
			destroy: function (t) {
				return e(this).each(function () {
					debug.log("destroy thumbnailScroller");
					var t = e(this);
					t.removeData("thumbnailScroller");
					var i = t.children(".jTscrollerContainer").children(".jTscroller"),
						a = t.parent().children(".jTscrollerNextButton"),
						s = t.parent().children(".jTscrollerPrevButton");
					i.stop(), a.stop(), s.stop(), a.unbind("click.Thumbnail"), s.unbind("click.Thumbnail"), t.unbind("mousemove.Thumbnail"), t.unbind("hover.Thumbnail");
				});
			},
		};
		e.fn.thumbnailScroller = function () {
			var i = arguments[0];
			if (t[i]) (i = t[i]), (arguments = Array.prototype.slice.call(arguments, 1));
			else {
				if ("object" != typeof i && i) return e.error("Method " + i + " does not exist on jQuery.thumbnailScroller"), this;
				i = t.init;
			}
			return i.apply(this, arguments);
		};

		/*---------------------------------------------------------------------------------------------*/
		/**
		 * Util object defines all necessary Util function that are used all over the place
		 * Something like static calls with possible returns
		 * Static Class
		 *
		 * @class $Brid.Util
		 */
		var Util = {
			charts: [],
			numberWithCommas: function (x) {
				return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
			},
			Macro: {
				macros: [],
				activeElement: null,
				setActive: function (elem) {
					this.activeElement = elem;
					debug.log("active element", this.activeElement);
				},
				init: function () {
					$_self = this;
					$_self.macros = [];
					//Populate macros
					jQuery(".macro").each(function (k, v) {
						$_self.macros.push(jQuery(this).attr("data-id"));
					});

					this.start();
				},
				start: function () {
					jQuery(this.activeElement)
						.off("input.Macro")
						.on("input.Macro", function () {
							var a = jQuery(this).val();
							$Brid.Util.Macro.checkOtherMacros(a); //bracelets {}, __ __
							$Brid.Util.Macro.checkMacros(a); //bracelets []
						});

					jQuery(".macro")
						.off("click.Macro")
						.on("click.Macro", function (e) {
							// debug.log('Macro');

							var str = jQuery(this).attr("data-id");

							debug.log("Macdro data-id:", str);

							//jQuery('#Ad0AdTagUrl').select(function(event) {
							var elem = jQuery($Brid.Util.Macro.activeElement);
							//alert(elem);
							var start = elem.prop("selectionStart");
							var end = elem.prop("selectionEnd");

							var prefixStr = elem.val().substring(0, start);
							var sufixStr = elem.val().substring(end, elem.val().length);
							var selectedStr = elem.val().substring(start, end);

							debug.log("Nu,", start, end);

							debug.log("selectedStr,", selectedStr);
							debug.log("prefixStr,", prefixStr);
							debug.log("sufixStr,", sufixStr);
							elem.val(prefixStr + str + sufixStr);
						});
				},
				checkMacros: function (m) {
					var matches = []; //Brid macro list

					matches = $Brid.Util.Macro.testAdTagUrlMacros(m);

					if (matches.length > 0) {
						//Populate Brid macros array

						//Compare with matches found in ad tag
						jQuery(matches).each(function (k, v) {
							var index = jQuery.inArray(v, $Brid.Util.Macro.macros);

							if (index == -1) {
								jQuery(".error-macro")
									.html("We have noticed unrecognized macros in your ad tag URL (e.g. " + v + "). Please use the macros available below and populate your ad tag accordingly or ignore this message if our system made a mistake.")
									.show();
								//debug.error('Unknown macro:', v);
							} else {
								jQuery(".error-macro").hide();
							}
						});
					} else {
						//jQuery('.error-macro').hide();
					}
				},
				checkOtherMacros: function (m) {
					var matches = []; //Brid macro list

					matches = $Brid.Util.Macro.testAdTagUrlMacrosSpecific(m);

					if (matches.length > 0) {
						//Populate Brid macros array
						jQuery(".error-macro")
							.html("We have noticed unrecognized macros in your ad tag URL (e.g. " + matches.join(",") + "). Please use the macros available below and populate your ad tag accordingly or ignore this message if our system made a mistake.")
							.show();
					} else {
						jQuery(".error-macro").hide();
					}
				},
				testAdTagUrlMacros: function (m) {
					//Search macros between []
					var matches = [];
					var regex = /\[([a-zA-Z0-9\-\_]+)\]/g;
					var match = regex.exec(m);
					while (match != null) {
						matches.push("[" + match[1] + "]");
						match = regex.exec(m);
					}

					return matches;
				},
				testAdTagUrlMacrosSpecific: function (m) {
					//Search macros between {}
					var matches = [];
					var regex = /\{([a-zA-Z0-9\-\_]+)\}/g;
					var match = regex.exec(m);
					while (match != null) {
						matches.push("{" + match[1] + "}");
						match = regex.exec(m);
					}

					//Search macros between __ __
					var regex = /\_\_([a-zA-Z0-9\-\_]+)\_\_/g;
					var match = regex.exec(m);
					while (match != null) {
						matches.push("__" + match[1] + "__");
						match = regex.exec(m);
					}

					return matches;
				},
			},
			/*//Call this function add class shrink-text to textarea to automatically shrink textarea height
        initShrinkField : function(){
            var st = jQuery('.shrink-text');
            st.each(function(k,v){
                var h = (jQuery(v).val().length / 2) + 20
                h = h>50 ? h : 50;
                jQuery(v).css('height', h+'px');
            });

            //alert('a')

            st.off('input.Shrink textarea.Shrink').on('input.Shrin textarea.Shrink', function(){

                //alert('aaaa');
                var a = jQuery(this).val() , len = a.length;
                var h = parseInt(len/2) + 15;

                //Expand adTag Url height against adtag url length
                if(h>50){
                    jQuery(this).css('height', h+'px');
                }else{
                    jQuery(this).css('height', '50px');
                }
            });


        },*/
			initSticky: function () {
				if (jQuery(".sticky-me").length > 0) {
					jQuery(".sticky-me").attr("data-width", jQuery(".sticky-me").width());
					jQuery(document).ready(function () {
						jQuery(".sticky-me").attr("data-width", jQuery(".sticky-me").width());
					});
					jQuery("#content-right")
						.off("scroll.Sticky")
						.on("scroll.Sticky", function (e) {
							if (jQuery(".sticky-me").length > 0) {
								var offset = 80;

								var scroll = jQuery("#content-right").scrollTop();

								// + 135px to add height of top bar and pagination between elements
								var sticky_height = jQuery(".sticky-me").height() + 135;
								var win_height = jQuery(window).height();

								//jQuery('.sticky-me').scroll().enable();
								//var leftPos  = jQuery(".sticky-me")[0].getBoundingClientRect().left   + jQuery(window)['scrollLeft']();
								var rightPos = jQuery(".sticky-me")[0].getBoundingClientRect().right + jQuery(window)["scrollLeft"]();
								//var topPos   = jQuery("#element")[0].getBoundingClientRect().top    + jQuery(window)['scrollTop']();
								//var bottomPos= jQuery("#element")[0].getBoundingClientRect().bottom + jQuery(window)['scrollTop']();

								var right_offset = jQuery(window).width() - rightPos;

								if (sticky_height < win_height) {
									var w = jQuery(".sticky-me").attr("data-width");
									debug.log("width", w);
									//jQuery('.sticky-me').css({'position' : 'absolute', 'top' : offset+scroll+'px', 'right' : '0px'});
									jQuery(".sticky-me").css({
										position: "relative",
										top: scroll + "px",
										width: w + "px",
										right: "-15px",
										padding: "0px",
									});
								} else {
									jQuery(".sticky-me").css({
										position: "relative",
										top: "inherit",
										right: "-15px",
									});
								}
							} else {
								jQuery("#content-right").off("scroll.Sticky");
							}
						});
				}
			},
			calculateVisibilityForDiv: function (div$) {
				var windowHeight = jQuery(window).height(),
					docScroll = jQuery(document).scrollTop(),
					divPosition = div$.offset().top,
					divHeight = div$.height(),
					hiddenBefore = docScroll - divPosition,
					hiddenAfter = divPosition + divHeight - (docScroll + windowHeight);

				if (docScroll > divPosition + divHeight || divPosition > docScroll + windowHeight) {
					return 0;
				} else {
					var result = 100;

					if (hiddenBefore > 0) {
						result -= (hiddenBefore * 100) / divHeight;
					}

					if (hiddenAfter > 0) {
						result -= (hiddenAfter * 100) / divHeight;
					}

					return result;
				}
			},
			setupPage: function () {
				var h = jQuery(window).height();
				var topBarHeight = jQuery("#bridTopNav").height();
				var right_content_height = h - topBarHeight;
				var content_right = jQuery("#content-right");
				var content = jQuery("#content");
				var sidebar = jQuery(".sidebar");

				content_right.css({ height: right_content_height + "px" });

				if (!$Brid.Util.isMobileDevice() && User.id != undefined) {
					var content_height = content.height();

					sidebar.height(right_content_height);

					sidebar.hover(
						function () {
							jQuery(this).css({ overflow: "auto" });
						},
						function () {
							jQuery(this).css({ overflow: "hidden" });
						}
					);

					var width = jQuery(window).width() - sidebar.width();

					var rightOffset = 10; //give it some space to the right
					content_right.css({ width: width - rightOffset }).animate({ opacity: 1 }, 5); //we animate to prevent juping of divs that are calculated on the fly
					//content.css({'visibility' : 'visible'});
					//content.fadeIn();

					if (content_height < right_content_height) {
						content.css({
							"min-height": right_content_height - jQuery("#footer").height() - 2 + "px",
						});
					}
					//debug.log(right_content_height, content_height);
				} else {
					sidebar.css({ display: "none" });
					jQuery("body").css("overflow", "none");
					content.css({ visibility: "visible" });
					content_right.css({
						opacity: "1",
						overflow: "auto",
						position: "initial",
						"max-width": "auto",
						"min-width": "auto",
						height: right_content_height + "px",
					});
				}
			},
			alignFooter: function () {
				var h = jQuery(window).height();
				var topBarHeight = jQuery("#bridTopNav").height();

				var right_content_height = h - topBarHeight;
				var content_height = jQuery("#content").height();

				if (content_height < right_content_height) {
					jQuery("#content").css({
						"min-height": right_content_height - jQuery("#footer").height() - 2 + "px",
					});
				}
			},
			/**
			 * Assign colors to labels of the chart.js
			 */
			assignColors: function (datasets) {
				var colors = [
					"rgb(54, 162, 235)", //blue
					"rgb(75, 192, 192)", //green
					"rgb(201, 203, 207)", //grey
					"rgb(255, 159, 64)", //orange
					"rgb(153, 102, 255)", //purple
					"rgb(255, 99, 132)", //red
					"rgb(255, 205, 86)", //yellow
					"rgb(54, 162, 235)", //blue
					"rgb(75, 192, 192)", //green
					"rgb(201, 203, 207)", //grey
					"rgb(255, 159, 64)", //orange
					"rgb(153, 102, 255)", //purple
					"rgb(255, 99, 132)", //red
					"rgb(255, 205, 86)", //yellow
				];
				for (var i in datasets) {
					datasets[i].backgroundColor = colors[i];
					datasets[i].borderColor = colors[i];
					datasets[i].fill = false;
				}
				return datasets;
			},
			repaintChart: function (id) {
				debug.log("repaintChart", id);
				if (id != undefined) {
					$Brid.Util.charts[id].chart.destroy();
					$Brid.Util.charts[id].chart = new Chart(document.getElementById(id).getContext("2d"), $Brid.Util.charts[id].config);
				}
			},
			/**
			 * Draw chart.js
			 * @param id element id
			 * @param datasets - dataset
			 * @param labels - labels
			 * @param options - Options to configure chart
			 */
			chart: function (id, datasets, labels, options, type) {
				debug.log("chart", id, datasets, labels, options, type);

				if (!type) {
					type = "line";
				}
				var el = document.getElementById(id);
				if (el == undefined) {
					debug.error("Element " + id + " does not exist");
					return false;
				}
				var ctx = el.getContext("2d");

				datasets = $Brid.Util.assignColors(datasets);
				var config = {
					type: type,
					data: {
						labels: labels,
						datasets: datasets,
					},
					options,
				};

				$Brid.Util.charts[id] = {
					chart: new Chart(ctx, config),
					config: config,
				};
			},
			getChartOptions: function (type) {
				var chartOpt = {};
				switch (type) {
					case "%":
						chartOpt = {
							type: "%",
							tooltips: {
								callbacks: {
									label: function (tooltipItem, chart) {
										return chart.datasets[tooltipItem.datasetIndex].label + ": " + $Brid.Util.numberWithCommas(tooltipItem.yLabel.toFixed(2)) + " %";
									},
								},
							},
							animation: false,
							legend: {
								position: "top",
							},
							scales: {
								yAxes: [
									{
										ticks: {
											// Include a dollar sign in the ticks
											callback: function (value, index, values) {
												return $Brid.Util.numberWithCommas(parseInt(value)) + " %";
											},
										},
									},
								],
							},
						};
						break;
					case "$":
						chartOpt = {
							type: "$",
							tooltips: {
								callbacks: {
									label: function (tooltipItem, chart) {
										return chart.datasets[tooltipItem.datasetIndex].label + ": $" + $Brid.Util.numberWithCommas(tooltipItem.yLabel.toFixed(2));
									},
								},
							},
							animation: false,
							legend: {
								position: "top",
							},
							scales: {
								yAxes: [
									{
										ticks: {
											// Include a dollar sign in the ticks
											callback: function (value, index, values) {
												return "$" + $Brid.Util.numberWithCommas(value.toFixed(2));
											},
										},
									},
								],
							},
						};
						break;
					case "GB":
						chartOpt = {
							type: "gb",
							tooltips: {
								callbacks: {
									label: function (tooltipItem, chart) {
										return chart.datasets[tooltipItem.datasetIndex].label + ": " + $Brid.Util.numberWithCommas((tooltipItem.yLabel / 1024 / 1024 / 1024).toFixed(3)) + " GB";
									},
								},
							},
							animation: false,
							legend: {
								position: "top",
							},
							scales: {
								yAxes: [
									{
										ticks: {
											// Include a dollar sign in the ticks
											callback: function (value, index, values) {
												return $Brid.Util.numberWithCommas(parseInt(value / 1024 / 1024 / 1024)) + " GB";
											},
										},
									},
								],
							},
						};
						break;
					case "number":
					default:
						chartOpt = {
							type: "number",
							tooltips: {
								callbacks: {
									label: function (tooltipItem, chart) {
										return chart.datasets[tooltipItem.datasetIndex].label + ": " + $Brid.Util.numberWithCommas(tooltipItem.yLabel);
									},
								},
							},
							animation: false,
							legend: {
								position: "top",
							},
							scales: {
								yAxes: [
									{
										ticks: {
											// Include a dollar sign in the ticks
											callback: function (value, index, values) {
												if (value > 1000) {
													var f = value;
													var numberType = "";
													if (value > 1000 && value < 1000000) {
														f = value / 1000;
														numberType = "K"; //thousands
													} else if (value >= 1000000) {
														f = value / 1000000;
														numberType = "M"; //milions
													}

													if (f.toString().indexOf("999999") != -1) {
														f = f + 0.000000000000001;
													}

													if (f.toString().indexOf("000000") != -1) {
														f = f - 0.000000000000001;
													}

													//return $Brid.Util.numberWithCommas(f)+' '+numberType;
													return f + " " + numberType;
												} else {
													//return Math.floor(value);
													return value;
												}
											},
										},
									},
								],
							},
						};
						break;
				}
				return chartOpt;
			},
			/* Load prettify script */
			prettyPrint: function () {
				function initPrettyPrint() {
					PR.prettyPrint();
				}
				loadScript(["https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"], initPrettyPrint);
			},
			loadChart: function (d) {
				debug.log("loadChart", d);
				var id = d.id;
				var datasets = d.data;
				var labels = d.labels;
				var options = $Brid.Util.getChartOptions(d.options_type);

				debug.log("draw chart", id, options);

				function initChart() {
					$Brid.Util.chart(id, datasets, labels, options);
					//setTimeout(function(){ $Brid.Util.chart(id, datasets, labels, options); }, 3000);
				}
				//if(window['Chart']==undefined){
				//jQuery( document ).ready(function(){
				loadScript(["https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"], initChart);
				//})

				//}
			},

			initLinks: function () {
				jQuery(".bmodal")
					.off("click.Brid")
					.on("click.Brid", function (e) {
						e.preventDefault();

						var link = jQuery(this).attr("href");
						try {
							closeSearch();
						} catch (e) {}

						$Brid.Ajax.loadAjaxUrl(link, jQuery(this));
					});
			},
			/**
			 * Array of allowed streaming extenstions
			 *
			 * @property allowedStreamingExtensions
			 * @type {Array}
			 */
			allowedStreamingExtensions: ["m3u8", "mpd", "f4m", "smil"],
			/**
			 * Center div horizontaly and verticaly
			 * Parent div must have height or max-height property, if it is missing it will center it horizontaly
			 * $Brid.Util.center('.divClass');
			 */
			align: function (divClassName) {
				debug.log("$Brid.Util.align()", divClassName);
				jQuery(divClassName).css({
					position: "absolute",
					left: "50%",
					top: "50%",
					"margin-left": -jQuery(divClassName).width() / 2,
					"margin-top": -jQuery(divClassName).height() / 2,
				});
			},
			/**
			 * Scroll to div
			 */
			scrollTo: function (to) {
				//alert(jQuery("#"+to).offset().top)
				setTimeout(function () {
					jQuery("html, body").animate(
						{
							scrollTop: jQuery("#" + to).offset().top - 60,
						},
						300
					);
				}, 300);
			},
			/**
			 * When clicked on embed code, try to copy embed into clipboard
			 */
			tryToCopy: function () {
				debug.log("$Brid.Util.tryToCopy()");
				try {
					document.execCommand("copy");
					jQuery(".codeCopied").show().html('<i class="fa fa-check-circle" aria-hidden="true"></i> Code copied.').delay(2000).fadeOut("slow");
					debug.log("$Brid.Util.tryToCopy()", "success");
				} catch (err) {
					jQuery(".codeCopied").show().html("Press Ctrl + C  or Cmd + C to copy embed code.").delay(2000).fadeOut("slow");
					debug.error("$Brid.Util.tryToCopy()", "error");
				}
			},
			checkIsUrlYoutube: function (introUrl) {
				debug.log("$Brid.Util.checkIsUrlYoutube()", introUrl.indexOf("youtube"), introUrl.indexOf("youtu.be"));
				if (introUrl.indexOf("youtube") != -1 || introUrl.indexOf("youtu.be") != -1) {
					debug.log("$Brid.Util.checkIsUrlYoutube()", "yes");
					return true;
				}
				debug.log("$Brid.Util.checkIsUrlYoutube()", "no");
				return false;
			},
			/**
			 * Remove http or https from url
			 * @property val (jQuery(this) of the input field)
			 */
			filterProtocol: function (val) {
				var url = jQuery(val).val();
				url = url.replace(/(https?:\/\/)/, "");
				jQuery(val).val(url);
				if (url.match(/^(rtmp:\/\/)/)) {
					//wrong url!!
					//jQuery('.fetchDivHSpan').hide();
				}
			},
			/**
			 * Execute callback if there is any
			 *
			 * @method executeCallback
			 * @param {Object} Object on which we want to execute "method"
			 * @param {String} method that we want to execute
			 * @param {Object} Argument that we want to pass to the method that we want to execute
			 */
			executeCallback: function (obj, method, arg) {
				try {
					if (method != undefined) {
						debug.log("$Brid.Util.executeCallback()", "Object: " + obj.className + " on click call: " + obj.className + "." + method + "(); Args:", arg, "Object:", obj);

						if (arg != undefined) {
							obj[method].apply(obj, [arg]); //chk will be sent as an argument
						} else {
							obj[method].apply(obj); //chk will be sent as an argument
						}
					} else {
						debug.warn("Callback method (" + obj.className + "." + method + '()) is undefined. Add function "method" attribute of the HTML element and define your method "' + method + '" in "' + obj.name + '" Object. Method will receive input element as argument.', obj);
					}
				} catch (e) {
					if (e instanceof TypeError) {
						debug.warn('Check is there callback method "' + method + '" defined in object "' + obj.className + '". Called undefined Function: ' + obj.className + "." + method + "();", e.message, e.stack);
					} else {
						debug.error("$Brid.Util.executeCallback()", "Object call: " + obj.className + "." + method + "();", e.message, { stack: e.stack });
					}
				}
			},
			/**
			 * Do uppercase of the first char of the string
			 *
			 * @method ucfirst
			 * @param {String}
			 */
			ucfirst: function (string) {
				debug.log("$Brid.Util.ucfirst()");
				return string.charAt(0).toUpperCase() + string.slice(1);
			},
			/**
			 * Make random ID of the string
			 *
			 * @method makeid
			 * @param {Integer} len | Length of the unique id, defualt is 5
			 */
			makeid: function (len) {
				debug.log("$Brid.Util.makeid()");
				if (len == undefined) len = 5;

				return Math.random().toString(36).substr(2, len);
			},
			/**
			 * Get Content Type based on file extension
			 *
			 * @method getMimeByExt
			 * @param {String}
			 */
			getMimeByExt: function (filename) {
				debug.log("$Brid.Util.getMimeByExt()", filename);
				var extToMimes = {
					".svg": "image/svg+xml",
					".vtt": "vtt",
					".3dm": "x-world/x-3dmf",
					".3dmf": "x-world/x-3dmf",
					".a": "application/octet-stream",
					".aab": "application/x-authorware-bin",
					".aam": "application/x-authorware-map",
					".aas": "application/x-authorware-seg",
					".abc": "text/vnd.abc",
					".acgi": "text/html",
					".afl": "video/animaflex",
					".ai": "application/postscript",
					".aif": "audio/aiff",
					".aif": "audio/x-aiff",
					".aifc": "audio/aiff",
					".aifc": "audio/x-aiff",
					".aiff": "audio/aiff",
					".aiff": "audio/x-aiff",
					".aim": "application/x-aim",
					".aip": "text/x-audiosoft-intra",
					".ani": "application/x-navi-animation",
					".aos": "application/x-nokia-9000-communicator-add-on-software",
					".aps": "application/mime",
					".arc": "application/octet-stream",
					".arj": "application/arj",
					".arj": "application/octet-stream",
					".art": "image/x-jg",
					".asf": "video/x-ms-asf",
					".asm": "text/x-asm",
					".asp": "text/asp",
					".asx": "application/x-mplayer2",
					".asx": "video/x-ms-asf",
					".asx": "video/x-ms-asf-plugin",
					".au": "audio/basic",
					".au": "audio/x-au",
					".avi": "application/x-troff-msvideo",
					".avi": "video/avi",
					".avi": "video/msvideo",
					".avi": "video/x-msvideo",
					".avs": "video/avs-video",
					".bcpio": "application/x-bcpio",
					".bin": "application/mac-binary",
					".bin": "application/macbinary",
					".bin": "application/octet-stream",
					".bin": "application/x-binary",
					".bin": "application/x-macbinary",
					".bm": "image/bmp",
					".bmp": "image/bmp",
					".bmp": "image/x-windows-bmp",
					".boo": "application/book",
					".book": "application/book",
					".boz": "application/x-bzip2",
					".bsh": "application/x-bsh",
					".bz": "application/x-bzip",
					".bz2": "application/x-bzip2",
					".c": "text/plain",
					".c++": "text/plain",
					".cat": "application/vnd.ms-pki.seccat",
					".cc": "text/plain",
					".cc": "text/x-c",
					".ccad": "application/clariscad",
					".cco": "application/x-cocoa",
					".cdf": "application/cdf",
					".cdf": "application/x-cdf",
					".cdf": "application/x-netcdf",
					".cer": "application/pkix-cert",
					".cer": "application/x-x509-ca-cert",
					".cha": "application/x-chat",
					".chat": "application/x-chat",
					".class": "application/java",
					".class": "application/java-byte-code",
					".class": "application/x-java-class",
					".com": "application/octet-stream",
					".com": "text/plain",
					".conf": "text/plain",
					".cpio": "application/x-cpio",
					".cpp": "text/x-c",
					".cpt": "application/mac-compactpro",
					".cpt": "application/x-compactpro",
					".cpt": "application/x-cpt",
					".crl": "application/pkcs-crl",
					".crl": "application/pkix-crl",
					".crt": "application/pkix-cert",
					".crt": "application/x-x509-ca-cert",
					".crt": "application/x-x509-user-cert",
					".csh": "application/x-csh",
					".csh": "text/x-script.csh",
					".css": "application/x-pointplus",
					".css": "text/css",
					".cxx": "text/plain",
					".dcr": "application/x-director",
					".deepv": "application/x-deepv",
					".def": "text/plain",
					".der": "application/x-x509-ca-cert",
					".dif": "video/x-dv",
					".dir": "application/x-director",
					".dl": "video/dl",
					".dl": "video/x-dl",
					".doc": "application/msword",
					".dot": "application/msword",
					".dp": "application/commonground",
					".drw": "application/drafting",
					".dump": "application/octet-stream",
					".dv": "video/x-dv",
					".dvi": "application/x-dvi",
					".dwf": "drawing/x-dwf(old)",
					".dwf": "model/vnd.dwf",
					".dwg": "application/acad",
					".dwg": "image/vnd.dwg",
					".dwg": "image/x-dwg",
					".dxf": "application/dxf",
					".dxf": "image/vnd.dwg",
					".dxf": "image/x-dwg",
					".dxr": "application/x-director",
					".el": "text/x-script.elisp",
					".elc": "application/x-bytecode.elisp(compiledelisp)",
					".elc": "application/x-elc",
					".env": "application/x-envoy",
					".eps": "application/postscript",
					".es": "application/x-esrehber",
					".etx": "text/x-setext",
					".evy": "application/envoy",
					".evy": "application/x-envoy",
					".exe": "application/octet-stream",
					".f": "text/plain",
					".f": "text/x-fortran",
					".f77": "text/x-fortran",
					".f90": "text/plain",
					".f90": "text/x-fortran",
					".fdf": "application/vnd.fdf",
					".fif": "application/fractals",
					".fif": "image/fif",
					".fli": "video/fli",
					".fli": "video/x-fli",
					".flo": "image/florian",
					".flx": "text/vnd.fmi.flexstor",
					".fmf": "video/x-atomic3d-feature",
					".for": "text/plain",
					".for": "text/x-fortran",
					".fpx": "image/vnd.fpx",
					".fpx": "image/vnd.net-fpx",
					".frl": "application/freeloader",
					".funk": "audio/make",
					".g": "text/plain",
					".g3": "image/g3fax",
					".gif": "image/gif",
					".gl": "video/gl",
					".gl": "video/x-gl",
					".gsd": "audio/x-gsm",
					".gsm": "audio/x-gsm",
					".gsp": "application/x-gsp",
					".gss": "application/x-gss",
					".gtar": "application/x-gtar",
					".gz": "application/x-compressed",
					".gz": "application/x-gzip",
					".gzip": "application/x-gzip",
					".gzip": "multipart/x-gzip",
					".h": "text/plain",
					".h": "text/x-h",
					".hdf": "application/x-hdf",
					".help": "application/x-helpfile",
					".hgl": "application/vnd.hp-hpgl",
					".hh": "text/plain",
					".hh": "text/x-h",
					".hlb": "text/x-script",
					".hlp": "application/hlp",
					".hlp": "application/x-helpfile",
					".hlp": "application/x-winhelp",
					".hpg": "application/vnd.hp-hpgl",
					".hpgl": "application/vnd.hp-hpgl",
					".hqx": "application/binhex",
					".hqx": "application/binhex4",
					".hqx": "application/mac-binhex",
					".hqx": "application/mac-binhex40",
					".hqx": "application/x-binhex40",
					".hqx": "application/x-mac-binhex40",
					".hta": "application/hta",
					".htc": "text/x-component",
					".htm": "text/html",
					".html": "text/html",
					".htmls": "text/html",
					".htt": "text/webviewhtml",
					".htx": "text/html",
					".ice": "x-conference/x-cooltalk",
					".ico": "image/x-icon",
					".idc": "text/plain",
					".ief": "image/ief",
					".iefs": "image/ief",
					".iges": "application/iges",
					".iges": "model/iges",
					".igs": "application/iges",
					".igs": "model/iges",
					".ima": "application/x-ima",
					".imap": "application/x-httpd-imap",
					".inf": "application/inf",
					".ins": "application/x-internett-signup",
					".ip": "application/x-ip2",
					".isu": "video/x-isvideo",
					".it": "audio/it",
					".iv": "application/x-inventor",
					".ivr": "i-world/i-vrml",
					".ivy": "application/x-livescreen",
					".jam": "audio/x-jam",
					".jav": "text/plain",
					".jav": "text/x-java-source",
					".java": "text/plain",
					".java": "text/x-java-source",
					".jcm": "application/x-java-commerce",
					".jfif": "image/jpeg",
					".jfif": "image/pjpeg",
					".jfif-tbnl": "image/jpeg",
					".jpe": "image/jpeg",
					".jpe": "image/pjpeg",
					".jpeg": "image/jpeg",
					".jpg": "image/jpeg",
					".jps": "image/x-jps",
					".js": "application/x-javascript",
					".jut": "image/jutvision",
					".kar": "audio/midi",
					".kar": "music/x-karaoke",
					".ksh": "application/x-ksh",
					".ksh": "text/x-script.ksh",
					".la": "audio/nspaudio",
					".la": "audio/x-nspaudio",
					".lam": "audio/x-liveaudio",
					".latex": "application/x-latex",
					".lha": "application/lha",
					".lha": "application/octet-stream",
					".lha": "application/x-lha",
					".lhx": "application/octet-stream",
					".list": "text/plain",
					".lma": "audio/nspaudio",
					".lma": "audio/x-nspaudio",
					".log": "text/plain",
					".lsp": "application/x-lisp",
					".lsp": "text/x-script.lisp",
					".lst": "text/plain",
					".lsx": "text/x-la-asf",
					".ltx": "application/x-latex",
					".lzh": "application/octet-stream",
					".lzh": "application/x-lzh",
					".lzx": "application/lzx",
					".lzx": "application/octet-stream",
					".lzx": "application/x-lzx",
					".m": "text/plain",
					".m": "text/x-m",
					".m1v": "video/mpeg",
					".m2a": "audio/mpeg",
					".m2v": "video/mpeg",
					".m3u": "audio/x-mpequrl",
					".man": "application/x-troff-man",
					".map": "application/x-navimap",
					".mar": "text/plain",
					".mbd": "application/mbedlet",
					".mc": "application/x-magic-cap-package-1.0",
					".mcd": "application/mcad",
					".mcd": "application/x-mathcad",
					".mcf": "image/vasa",
					".mcf": "text/mcf",
					".mcp": "application/netmc",
					".me": "application/x-troff-me",
					".mht": "message/rfc822",
					".mhtml": "message/rfc822",
					".mid": "application/x-midi",
					".mid": "audio/midi",
					".mid": "audio/x-mid",
					".mid": "audio/x-midi",
					".mid": "music/crescendo",
					".mid": "x-music/x-midi",
					".midi": "application/x-midi",
					".midi": "audio/midi",
					".midi": "audio/x-mid",
					".midi": "audio/x-midi",
					".midi": "music/crescendo",
					".midi": "x-music/x-midi",
					".mif": "application/x-frame",
					".mif": "application/x-mif",
					".mime": "message/rfc822",
					".mime": "www/mime",
					".mjf": "audio/x-vnd.audioexplosion.mjuicemediafile",
					".mjpg": "video/x-motion-jpeg",
					".mm": "application/base64",
					".mm": "application/x-meme",
					".mme": "application/base64",
					".mod": "audio/mod",
					".mod": "audio/x-mod",
					".moov": "video/quicktime",
					".mov": "video/quicktime",
					".movie": "video/x-sgi-movie",
					".mp2": "audio/mpeg",
					".mp2": "audio/x-mpeg",
					".mp2": "video/mpeg",
					".mp2": "video/x-mpeg",
					".mp2": "video/x-mpeq2a",
					".mp3": "audio/mpeg3",
					".mp3": "audio/x-mpeg-3",
					".mp3": "video/mpeg",
					".mp3": "video/x-mpeg",
					".mpa": "audio/mpeg",
					".mpa": "video/mpeg",
					".mpc": "application/x-project",
					".mpe": "video/mpeg",
					".mpeg": "video/mpeg",
					".mpg": "audio/mpeg",
					".mpg": "video/mpeg",
					".mpga": "audio/mpeg",
					".mpp": "application/vnd.ms-project",
					".mpt": "application/x-project",
					".mpv": "application/x-project",
					".mpx": "application/x-project",
					".mrc": "application/marc",
					".ms": "application/x-troff-ms",
					".mv": "video/x-sgi-movie",
					".my": "audio/make",
					".mzz": "application/x-vnd.audioexplosion.mzz",
					".nap": "image/naplps",
					".naplps": "image/naplps",
					".nc": "application/x-netcdf",
					".ncm": "application/vnd.nokia.configuration-message",
					".nif": "image/x-niff",
					".niff": "image/x-niff",
					".nix": "application/x-mix-transfer",
					".nsc": "application/x-conference",
					".nvd": "application/x-navidoc",
					".o": "application/octet-stream",
					".oda": "application/oda",
					".omc": "application/x-omc",
					".omcd": "application/x-omcdatamaker",
					".omcr": "application/x-omcregerator",
					".p": "text/x-pascal",
					".p10": "application/pkcs10",
					".p10": "application/x-pkcs10",
					".p12": "application/pkcs-12",
					".p12": "application/x-pkcs12",
					".p7a": "application/x-pkcs7-signature",
					".p7c": "application/pkcs7-mime",
					".p7c": "application/x-pkcs7-mime",
					".p7m": "application/pkcs7-mime",
					".p7m": "application/x-pkcs7-mime",
					".p7r": "application/x-pkcs7-certreqresp",
					".p7s": "application/pkcs7-signature",
					".part": "application/pro_eng",
					".pas": "text/pascal",
					".pbm": "image/x-portable-bitmap",
					".pcl": "application/vnd.hp-pcl",
					".pcl": "application/x-pcl",
					".pct": "image/x-pict",
					".pcx": "image/x-pcx",
					".pdb": "chemical/x-pdb",
					".pdf": "application/pdf",
					".pfunk": "audio/make",
					".pgm": "image/x-portable-greymap",
					".pic": "image/pict",
					".pict": "image/pict",
					".pkg": "application/x-newton-compatible-pkg",
					".pko": "application/vnd.ms-pki.pko",
					".pl": "text/plain",
					".pl": "text/x-script.perl",
					".plx": "application/x-pixclscript",
					".pm": "image/x-xpixmap",
					".pm": "text/x-script.perl-module",
					".pm4": "application/x-pagemaker",
					".pm5": "application/x-pagemaker",
					".png": "image/png",
					".pnm": "application/x-portable-anymap",
					".pnm": "image/x-portable-anymap",
					".pot": "application/mspowerpoint",
					".pot": "application/vnd.ms-powerpoint",
					".pov": "model/x-pov",
					".ppa": "application/vnd.ms-powerpoint",
					".ppm": "image/x-portable-pixmap",
					".pps": "application/mspowerpoint",
					".pps": "application/vnd.ms-powerpoint",
					".ppt": "application/mspowerpoint",
					".ppt": "application/powerpoint",
					".ppt": "application/vnd.ms-powerpoint",
					".ppt": "application/x-mspowerpoint",
					".ppz": "application/mspowerpoint",
					".pre": "application/x-freelance",
					".prt": "application/pro_eng",
					".ps": "application/postscript",
					".psd": "application/octet-stream",
					".pvu": "paleovu/x-pv",
					".pwz": "application/vnd.ms-powerpoint",
					".py": "text/x-script.phyton",
					".pyc": "applicaiton/x-bytecode.python",
					".qcp": "audio/vnd.qcelp",
					".qd3": "x-world/x-3dmf",
					".qd3d": "x-world/x-3dmf",
					".qif": "image/x-quicktime",
					".qt": "video/quicktime",
					".qtc": "video/x-qtc",
					".qti": "image/x-quicktime",
					".qtif": "image/x-quicktime",
					".ra": "audio/x-pn-realaudio",
					".ra": "audio/x-pn-realaudio-plugin",
					".ra": "audio/x-realaudio",
					".ram": "audio/x-pn-realaudio",
					".ras": "application/x-cmu-raster",
					".ras": "image/cmu-raster",
					".ras": "image/x-cmu-raster",
					".rast": "image/cmu-raster",
					".rexx": "text/x-script.rexx",
					".rf": "image/vnd.rn-realflash",
					".rgb": "image/x-rgb",
					".rm": "application/vnd.rn-realmedia",
					".rm": "audio/x-pn-realaudio",
					".rmi": "audio/mid",
					".rmm": "audio/x-pn-realaudio",
					".rmp": "audio/x-pn-realaudio",
					".rmp": "audio/x-pn-realaudio-plugin",
					".rng": "application/ringing-tones",
					".rng": "application/vnd.nokia.ringing-tone",
					".rnx": "application/vnd.rn-realplayer",
					".roff": "application/x-troff",
					".rp": "image/vnd.rn-realpix",
					".rpm": "audio/x-pn-realaudio-plugin",
					".rt": "text/richtext",
					".rt": "text/vnd.rn-realtext",
					".rtf": "application/rtf",
					".rtf": "application/x-rtf",
					".rtf": "text/richtext",
					".rtx": "application/rtf",
					".rtx": "text/richtext",
					".rv": "video/vnd.rn-realvideo",
					".s": "text/x-asm",
					".s3m": "audio/s3m",
					".saveme": "aapplication/octet-stream",
					".sbk": "application/x-tbook",
					".scm": "application/x-lotusscreencam",
					".scm": "text/x-script.guile",
					".scm": "text/x-script.scheme",
					".scm": "video/x-scm",
					".sdml": "text/plain",
					".sdp": "application/sdp",
					".sdp": "application/x-sdp",
					".sdr": "application/sounder",
					".sea": "application/sea",
					".sea": "application/x-sea",
					".set": "application/set",
					".sgm": "text/sgml",
					".sgm": "text/x-sgml",
					".sgml": "text/sgml",
					".sgml": "text/x-sgml",
					".sh": "application/x-bsh",
					".sh": "application/x-sh",
					".sh": "application/x-shar",
					".sh": "text/x-script.sh",
					".shar": "application/x-bsh",
					".shar": "application/x-shar",
					".shtml": "text/html",
					".shtml": "text/x-server-parsed-html",
					".sid": "audio/x-psid",
					".sit": "application/x-sit",
					".sit": "application/x-stuffit",
					".skd": "application/x-koan",
					".skm": "application/x-koan",
					".skp": "application/x-koan",
					".skt": "application/x-koan",
					".sl": "application/x-seelogo",
					".smi": "application/smil",
					".smil": "application/smil",
					".snd": "audio/basic",
					".snd": "audio/x-adpcm",
					".sol": "application/solids",
					".spc": "application/x-pkcs7-certificates",
					".spc": "text/x-speech",
					".spl": "application/futuresplash",
					".spr": "application/x-sprite",
					".sprite": "application/x-sprite",
					".src": "application/x-wais-source",
					".ssi": "text/x-server-parsed-html",
					".ssm": "application/streamingmedia",
					".sst": "application/vnd.ms-pki.certstore",
					".step": "application/step",
					".stl": "application/sla",
					".stl": "application/vnd.ms-pki.stl",
					".stl": "application/x-navistyle",
					".stp": "application/step",
					".sv4cpio": "application/x-sv4cpio",
					".sv4crc": "application/x-sv4crc",
					".svf": "image/vnd.dwg",
					".svf": "image/x-dwg",
					".svr": "application/x-world",
					".svr": "x-world/x-svr",
					".swf": "application/x-shockwave-flash",
					".t": "application/x-troff",
					".talk": "text/x-speech",
					".tar": "application/x-tar",
					".tbk": "application/toolbook",
					".tbk": "application/x-tbook",
					".tcl": "application/x-tcl",
					".tcl": "text/x-script.tcl",
					".tcsh": "text/x-script.tcsh",
					".tex": "application/x-tex",
					".texi": "application/x-texinfo",
					".texinfo": "lication/x-texinfo",
					".text": "application/plain",
					".text": "text/plain",
					".tgz": "application/gnutar",
					".tgz": "application/x-compressed",
					".tif": "image/tiff",
					".tif": "image/x-tiff",
					".tiff": "image/tiff",
					".tiff": "image/x-tiff",
					".tr": "application/x-troff",
					".tsi": "audio/tsp-audio",
					".tsp": "application/dsptype",
					".tsp": "audio/tsplayer",
					".tsv": "text/tab-separated-values",
					".turbot": "image/florian",
					".txt": "text/plain",
					".uil": "text/x-uil",
					".uni": "text/uri-list",
					".unis": "text/uri-list",
					".unv": "application/i-deas",
					".uri": "text/uri-list",
					".uris": "text/uri-list",
					".ustar": "application/x-ustar",
					".ustar": "multipart/x-ustar",
					".uu": "application/octet-stream",
					".uu": "text/x-uuencode",
					".uue": "text/x-uuencode",
					".vcd": "application/x-cdlink",
					".vcs": "text/x-vcalendar",
					".vda": "application/vda",
					".vdo": "video/vdo",
					".vew": "application/groupwise",
					".viv": "video/vivo",
					".viv": "video/vnd.vivo",
					".vivo": "video/vivo",
					".vivo": "video/vnd.vivo",
					".vmd": "application/vocaltec-media-desc",
					".vmf": "application/vocaltec-media-file",
					".voc": "audio/voc",
					".voc": "audio/x-voc",
					".vos": "video/vosaic",
					".vox": "audio/voxware",
					".vqe": "audio/x-twinvq-plugin",
					".vqf": "audio/x-twinvq",
					".vql": "audio/x-twinvq-plugin",
					".vrml": "application/x-vrml",
					".vrml": "model/vrml",
					".vrml": "x-world/x-vrml",
					".vrt": "x-world/x-vrt",
					".vsd": "application/x-visio",
					".vst": "application/x-visio",
					".vsw": "application/x-visio",
					".w60": "application/wordperfect6.0",
					".w61": "application/wordperfect6.1",
					".w6w": "application/msword",
					".wav": "audio/wav",
					".wav": "audio/x-wav",
					".wb1": "application/x-qpro",
					".wbmp": "image/vnd.wap.wbmp",
					".web": "application/vnd.xara",
					".wiz": "application/msword",
					".wk1": "application/x-123",
					".wmf": "windows/metafile",
					".wml": "text/vnd.wap.wml",
					".wmlc": "application/vnd.wap.wmlc",
					".wmls": "text/vnd.wap.wmlscript",
					".wmlsc": "application/vnd.wap.wmlscriptc",
					".word": "application/msword",
					".wp": "application/wordperfect",
					".wp5": "application/wordperfect",
					".wp5": "application/wordperfect6.0",
					".wp6": "application/wordperfect",
					".wpd": "application/wordperfect",
					".wpd": "application/x-wpwin",
					".wq1": "application/x-lotus",
					".wri": "application/mswrite",
					".wri": "application/x-wri",
					".wrl": "application/x-world",
					".wrl": "model/vrml",
					".wrl": "x-world/x-vrml",
					".wrz": "model/vrml",
					".wrz": "x-world/x-vrml",
					".wsc": "text/scriplet",
					".wsrc": "application/x-wais-source",
					".wtk": "application/x-wintalk",
					".xbm": "image/x-xbitmap",
					".xbm": "image/x-xbm",
					".xbm": "image/xbm",
					".xdr": "video/x-amt-demorun",
					".xgz": "xgl/drawing",
					".xif": "image/vnd.xiff",
					".xl": "application/excel",
					".xla": "application/excel",
					".xla": "application/x-excel",
					".xla": "application/x-msexcel",
					".xlb": "application/excel",
					".xlb": "application/vnd.ms-excel",
					".xlb": "application/x-excel",
					".xlc": "application/excel",
					".xlc": "application/vnd.ms-excel",
					".xlc": "application/x-excel",
					".xld": "application/excel",
					".xld": "application/x-excel",
					".xlk": "application/excel",
					".xlk": "application/x-excel",
					".xll": "application/excel",
					".xll": "application/vnd.ms-excel",
					".xll": "application/x-excel",
					".xlm": "application/excel",
					".xlm": "application/vnd.ms-excel",
					".xlm": "application/x-excel",
					".xls": "application/excel",
					".xls": "application/vnd.ms-excel",
					".xls": "application/x-excel",
					".xls": "application/x-msexcel",
					".xlt": "application/excel",
					".xlt": "application/x-excel",
					".xlv": "application/excel",
					".xlv": "application/x-excel",
					".xlw": "application/excel",
					".xlw": "application/vnd.ms-excel",
					".xlw": "application/x-excel",
					".xlw": "application/x-msexcel",
					".xm": "audio/xm",
					".xml": "application/xml",
					".xml": "text/xml",
					".xmz": "xgl/movie",
					".xpix": "application/x-vnd.ls-xpix",
					".xpm": "image/x-xpixmap",
					".xpm": "image/xpm",
					".x-png": "image/png",
					".xsr": "video/x-amt-showrun",
					".xwd": "image/x-xwd",
					".xwd": "image/x-xwindowdump",
					".xyz": "chemical/x-pdb",
					".z": "application/x-compress",
					".z": "application/x-compressed",
					".zip": "application/x-compressed",
					".zip": "application/x-zip-compressed",
					".zip": "application/zip",
					".zip": "multipart/x-zip",
					".zoo": "application/octet-stream",
				};
				var ext = "." + $Brid.Util.getExtension(filename);

				if (extToMimes.hasOwnProperty(ext)) {
					return extToMimes[ext];
				}
				return "";
			},
			/**
			 * Position element on the centar of the parent
			 *
			 * @method center
			 * @param {jQuery} Object element - Element that we want to centar
			 * @param {jQuery} Object element - Element in relation to which we want to center
			 */
			center: function (element, parent) {
				var left = (jQuery(parent).width() - jQuery(element).outerWidth()) / 2;
				var top = (jQuery(parent).height() - jQuery(element).outerHeight()) / 2;
				debug.log("$Brid.Util.center()", "Left:", left, "Top:", top);
				jQuery(element).css({
					position: "absolute",
					left: left,
					top: top,
				});
			},
			/**
			 * Check is mobile
			 *
			 * @method isMobileDevice
			 * @param {String} "ios"
			 * @return {Boolean}
			 */
			isMobileDevice: function (option) {
				debug.log("$Brid.Util.isMobileDevice()", option);
				if (typeof option == "undefined") {
					return jQuery.browser.mobile;
				} else if (option == "ios") {
					return navigator.userAgent.match(/iPhone|iPad|iPod/i);
				} else {
					return jQuery.browser.mobile;
				}
			},
			/**
			 * Check is argument valid email address
			 *
			 * @method isEmailValid
			 * @param {String} url
			 * @return {Boolean}
			 */
			isEmailValid: function (email) {
				debug.log("$Brid.Util.isEmailValid()", email);
				var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
				return pattern.test(email);
			},
			/**
			 * MAYBE REDUDANT!!!!!!!!!!!!!!!!!!!!! USE isUrl or isFileUrl???
			 * Check is argument valid url string
			 *
			 * @method isFileUrl
			 * @param {String} url
			 * @return {Boolean}
			 */
			isFileUrl: function (url) {
				debug.error("$Brid.Util.isFileUrl() Possible redudant method @see $Brid.Util.isUrl VS $Brid.Util.isFileUrl", url);
				var regex = new RegExp("(http|ftp|https)://[a-z0-9-_]+(.[a-z0-9-_]+)+(.[a-z]{2,4})+/[a-z0-9-_/]+(.[a-z]{2,4})", "i");
				return regex.test(url);
			},
			/**
			 * Check is argument valid url string
			 *
			 * @method isUrl
			 * @param {String} url
			 * @return {Boolean}
			 */
			isUrl: function (url) {
				debug.log("$Brid.Util.isUrl()", url);
				//var regex = new RegExp("((http|https|ftp|rtmp):)?\/\/(www\.)?([a-z0-9\-_\.])+\.([a-z]{2,6})\/(.)*", "i");
				//In search of the perfect URL validation regex: https://mathiasbynens.be/demo/url-regex
				//alert('a');
				var regex = new RegExp(
					"^" +
						// protocol identifier
						//"(?:(?:https?|ftp)://)" + //fixed by losmi to allow url without protocol
						"(?:(((?:https?|ftp):)?)//)" +
						// user:pass authentication
						"(?:\\S+(?::\\S*)?@)?" +
						"(?:" +
						// IP address exclusion
						// private & local networks
						"(?!(?:10|127)(?:\\.\\d{1,3}){3})" +
						"(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})" +
						"(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})" +
						// IP address dotted notation octets
						// excludes loopback network 0.0.0.0
						// excludes reserved space >= 224.0.0.0
						// excludes network & broacast addresses
						// (first & last IP address of each class)
						"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])" +
						"(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}" +
						"(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))" +
						"|" +
						// host name
						"(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)" +
						// domain name
						"(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*" +
						// TLD identifier
						"(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))" +
						// TLD may end with dot
						"\\.?" +
						")" +
						// port number
						"(?::\\d{2,5})?" +
						// resource path
						"(?:[/?#]\\S*)?" +
						"$",
					"i"
				);
				debug.log("$Brid.Util.isUrl()", regex.test(url));
				return regex.test(url);
			},
			/**
			 * Check is extension of the url string against allowedExtensions array
			 *
			 * @method
			 * @param {String} url
			 * @param {Array} allowedExtensions
			 * @return {Boolean}
			 */
			checkExtension: function (url, allowedExtensions) {
				debug.log("$Brid.Util.checkExtension()", url, allowedExtensions);
				if (allowedExtensions == undefined) throw new ArgumentException('"allowedExtensions" second argument is missing.');
				var extension = url.substr(url.lastIndexOf(".") + 1, 4);
				extension = extension.replace("?", "").replace("#", "").trim();
				if (jQuery.inArray(extension.toLowerCase(), allowedExtensions) > -1) {
					return true;
				}
				debug.warn("$Brid.Util.checkExtension()", "Bad extension: ", extension);
				return false;
			},
			/**
			 * get resource extension
			 *
			 * @method
			 * @param {String} resource
			 * @return {String}
			 */
			getExtension: function (resource) {
				debug.log("$Brid.Util.getExtension()", resource);
				return resource.split(".").pop();
			},
			/**
			 * Prevent only numbers
			 * $Brid.Util.onlyNumbers
			 *
			 * @method onlyNumbers
			 * @param {Object} Event
			 */
			onlyNumbers: function (e) {
				if ((e.which < 48 || e.which > 57) && e.which != 37 && e.which != 8 && e.which != 0) {
					// keyCode ne radi u FF
					debug.log(e.which);
					return false;
				}
			},
			/**
			 * Set page title
			 * $Brid.Util.setTitle(title);
			 *
			 * @method setTitle
			 * @param {String} title
			 */
			setTitle: function (title) {
				if (title != undefined || title != "") {
					debug.log("TITLE", title, typeof title);
					document.title = document.querySelector("meta[property='og:title']").getAttribute("content") + " | " + title;
				}
			},
			/**
			 * $Brid.Util.clickUrl
			 *
			 * @method clickUrl
			 * @param {Object} Event
			 */
			clickUrl: function (e) {
				if (jQuery(this).attr("data-target") != undefined) {
					window.open(jQuery(this).attr("data-href"));
				} else {
					window.location = jQuery(this).attr("data-href");
				}
			},
			/**
			 * Show dialog (modal box)
			 * $Brid.Util.openDialog(msg, title);
			 *
			 * @method openDialog
			 * @param {String} message
			 * @param {String} title
			 */
			openDialog: function (msg, title) {
				var cnt = "";
				if (title != undefined) {
					cnt += "<h2>" + title + "</h2>";
				}
				cnt += "<p>" + msg + "</p>";
				//Defined in jquery.plugins.min.js
				modal.open({ content: cnt });
			},

			/**
			 * keeps original ratio on checkbox selected
			 */
			originalAspectRatio: null,

			/**
			 * Change width or height
			 */
			calculateWH: function (val) {
				if ($Brid.Util.originalAspectRatio == undefined) {
					$Brid.Util.calculateAspectRatio();
				}

				//debug.error('aaaa', val);

				debug.log("calculateWH");
				var $thisObject = jQuery(val),
					id,
					value;
				if (!parseInt(jQuery("#keepOriginalRatio").val())) {
					return;
				}

				var id = $thisObject.attr("id");
				var value = parseInt($thisObject.val());

				//var h = parseInt((value/$Brid.Util.originalAspectRatio));

				debug.log("id.......", id, "value....", value, "aspect....", $Brid.Util.originalAspectRatio);
				//if()

				if (id == "PlayerWidth") {
					jQuery("#PlayerHeight").val(parseInt(value / $Brid.Util.originalAspectRatio));
				} else {
					jQuery("#PlayerWidth").val(parseInt(value * $Brid.Util.originalAspectRatio));
				}

				if (id == "UnitWidth") {
					jQuery("#UnitHeight").val(parseInt(value / $Brid.Util.originalAspectRatio));
				} else {
					jQuery("#UnitWidth").val(parseInt(value * $Brid.Util.originalAspectRatio));
				}
			},

			calculateAspectRatio: function () {
				// debug.error("aspect width", jQuery('#PlayerWidth').val());
				var width, height;
				if (jQuery("#PlayerWidth").length == 0) {
					width = parseInt(jQuery("#UnitWidth").val());
					height = parseInt(jQuery("#UnitHeight").val());
				} else {
					//debug.log("aaaaaaaaaa");
					width = parseInt(jQuery("#PlayerWidth").val());
					height = parseInt(jQuery("#PlayerHeight").val());
				}
				debug.log("calculateAspectRatio width ", width, "height ", height, "originalAspectRatio", $Brid.Util.originalAspectRatio);
				if (width == 0 || height == 0 || !width || !height) {
					$Brid.Util.originalAspectRatio = 1;
				} else {
					//$Brid.Util.originalAspectRatio = Math.round((width/height) * 100) / 100;
					$Brid.Util.originalAspectRatio = ((width / height) * 100) / 100;
				}
				//alert($Brid.Util.originalAspectRatio);
			},
			closeModalBox: function () {
				if (typeof modal == "object" && typeof modal.close == "function") {
					modal.close();
				}
			},

			/**
			 * Url validator
			 *
			 * @method isUrl
			 * @param {String} url
			 * @return {Boolean}
			 */
			isUrlString: function (url) {
				debug.log("$Brid.Util.isUrlString()", url);
				var urlPattern = /^((https?|ftp|rtmp):\/\/|(www|ftp)\.)[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+([/?].*)?$/;
				return url.match(urlPattern);
			},
			/**
			 * Youtube Url validator
			 *
			 * @method isUrl
			 * @param {String} url
			 * @return {Boolean}
			 */
			isYoutubeUrl: function (url) {
				debug.log("$Brid.Util.isYoutubeUrl()", url);
				var pattern = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;
				return url.match(pattern);
			},

			/**
			 * Checks if Url is streaming url
			 * @param {String} url
			 * @return {Boolean}
			 */
			isStreamingUrl: function (url) {
				debug.log("$Brid.Util.isStreamingUrl()", url, this.allowedStreamingExtensions);

				var re = /\b(?:rtmp[setp]*)|(?:^https?):\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:m3u8|mpd|f4m|smil)+([\?].*)?$/gim;
				// merge conflict
				//var re = /^https?:\/\/(?:[a-z0-9\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:m3u8|mpd|f4m|smil)+([\?].*)?$/gmi;

				var str = url;
				var m = re.exec(str);
				return m !== null;
				//return $Brid.Util.checkExtension(url, this.allowedStreamingExtensions) || ($Brid.Util.isUrl(url) && url.match(/^rtmp:\/\//) != null);
			},
			confirm: function (conf) {
				var config = {
					text: "Are you sure?",
					title: "Alert warrning",
					yesFunction: null,
					yesClass: "confirmYes",
					yesNamespace: "LeaveConfirm",
					cancelFunction: callbacks.cancel,
					cancelClass: "confirmNo",
					cancelNamespace: "LeaveCancel",
				};

				config = jQuery.extend(true, config, conf);

				//'Leaving this page will interrupt all your current uploads.<br/>Are you sure you want to leave the page?
				$Brid.Util.openDialog(config.text + '<p style="text-align:center"><button class="radius secondary ' + config.yesClass + '" style="margin-right:1rem">Yes</button><button class="radius ' + config.cancelClass + '">No</button></p>', config.title);

				if (config.yesFunction) {
					jQuery("." + config.yesClass)
						.off("click." + config.yesNamespace)
						.on("click." + config.yesNamespace, config.yesFunction);
				}

				jQuery("." + config.cancelClass)
					.off("click." + config.cancelNamespace)
					.on("click." + config.cancelNamespace, config.cancelFunction);
			},
			/**
			 * Checks if Url is twitch url
			 * Must end with id
			 *
			 * @param {String} url
			 * @return {Boolean}
			 */
			isTwitchUrl: function (url) {
				return url.match(/^(https?|http):\/\/www.twitch.tv/) && /^\d+$/.test(url.substring(url.lastIndexOf("/") + 1));
			},

			/**
			 * Select all text from element
			 *
			 * @param {String|Object} el
			 */
			selectText: function (el) {
				debug.log("$Brid.Util.selectText()");
				if (typeof element == "String") {
					el = document.getElementById(el);
				}

				if (typeof window.getSelection != "undefined" && typeof document.createRange != "undefined") {
					var range = document.createRange();
					range.selectNodeContents(el);
					var sel = window.getSelection();
					sel.removeAllRanges();
					sel.addRange(range);
				} else if (typeof document.selection != "undefined" && typeof document.body.createTextRange != "undefined") {
					var textRange = document.body.createTextRange();
					textRange.moveToElementText(el);
					textRange.select();
				}
			},
			/**
			 * Load Geo data
			 * $Brid.Util.loadGeoInfo
			 */
			loadGeoInfo: function () {
				jQuery.ajax({
					url: "/users/location.json",
					type: "GET",
					//dataType: 'json',
					success: function (location) {
						// example where I update content on the page.
						jQuery("#UserCountry").val(location.country_code);

						jQuery("#UserCity").val(location.city);
						jQuery("#UserLatitude").val(location.latitude);
						jQuery("#UserLongitude").val(location.longitude);

						/*jQuery('#region-code').html(location.region_code);
                jQuery('#UserLocation').val(location.country_name);
                jQuery('#region-name').html(location.region_name);
                jQuery('#areacode').html(location.areacode);
                jQuery('#ip').html(location.ip);
                jQuery('#zipcode').html(location.zipcode);*/
					},
				});
			},
		};
	})(jQuery);

/**
 * Protocol is requered
 * @param url
 * @param callback
 * @param forceReload
 * @param async
 */
function loadScript(url, callback, forceReload, async) {
	debug.log("Try to load script:", url, callback);

	var scripts = jQuery.merge(document.getElementsByTagName("script"), document.getElementsByTagName("link"));
	var res = 0;
	var async = (async = undefined ? false : true);

	var arrayLength = url.length;
	var doneLoading = function (res) {
		if (res + 1 == arrayLength) {
			callback();
		}
	};
}

// Disable widget tabs while uploading is running
function disableTabs() {
	// console.log("-- START --");
	jQuery(".media-router").children().off("click");
	jQuery(".media-brid-action").off("click");
	jQuery(".media-menu-item").not(".active").addClass("disabled");
}

// Enable tabs when uploading is done (video is saved) or video uploading is cancelled
function enableTabs() {
	// console.log("-- END --");
	$Brid.Html.PostVideo.init();
	$Brid.Html.QuickLibrary.init();
	jQuery(".media-menu-item").removeClass("disabled");
}

// Set global status interval variable
window.checkStatusInterval = setInterval(function () {
	return false;
}, 100000000000);
window.brid_video_data = null;
window.disable_shortcode = "0";

// After widget box is closed
// - Remove ajax interval
// - Remove exit intent prompt
jQuery(document).bind("cbox_closed", function () {
	console.log("-- box is closed --");
	// Clear status checking interval
	clearInterval(checkStatusInterval);
	// Disable exit intent
	canLeave = true;
});

// Write a message if certain status code is present and return 'bool' status
function setStatus(brid_video_item) {
	var statuses = [3, 4, 5, 6, 8];
	var statusText = "Ready to use";
	var statusClass = "color-success";
	var statusReturn = true;

	if (brid_video_item == null) {
		return false;
	}

	if (typeof brid_video_item.Video === "undefined") {
		return false;
	}

	// trace_all=0 - all encoding is done
	// trace_all=1 - not all encoding is done
	if (typeof brid_video_item.Video.trace_all !== "undefined" && (brid_video_item.Video.trace_all == 1 || statuses.includes(brid_video_item.Video.status))) {
		// console.warn("if - trace_all");

		statusText = "Encoding in progress";
		statusClass = "color-danger";
		statusReturn = false;

		// Disable copy_shortcode button
		if (disable_shortcode != "0") {
			jQuery("#copy_shortcode").addClass("disabled");
		}
	} else if (statuses.includes(brid_video_item.Video.status)) {
		// console.warn("else if - status");

		statusText = "Encoding in progress";
		statusClass = "color-danger";
		statusReturn = false;

		if (brid_video_item.Video.status == 4) {
			statusText = "Uploading in progress";
		}
		if (brid_video_item.Video.status == 5) {
			statusText = "Error, retry please";
		}

		// Disable copy_shortcode button
		if (disable_shortcode != "0") {
			jQuery("#copy_shortcode").addClass("disabled");
		}
	} else {
		// console.warn("else - status ok");

		// Clear status checking interval, vecause status is ok
		clearInterval(checkStatusInterval);

		// Enable copy_shortcode button
		if (disable_shortcode != "0") {
			jQuery("#copy_shortcode").removeClass("disabled");
		}
	}

	// Set status message
	jQuery("#VideoStatus").text(statusText).attr("class", statusClass);

	// Return status
	return statusReturn;
}

// Ajax video status check
function checkVideoStatus(video_id) {
	// Close interval if widget box is closed
	if (jQuery("#colorbox").css("display") == "none") {
		console.log("-- video ajax close interval --");
		clearInterval(checkStatusInterval);
		return false;
	}

	video_id = video_id || null;

	jQuery.ajax({
		url: "/wp-admin/admin-ajax.php",
		type: "POST",
		dataType: "json",
		data: {
			action: "getVideoInfo",
			video_id: video_id,
		},
		success: function (response) {
			debug.log("video - status checking - ", response);

			// Update video data (window variable)
			brid_video_data = response;

			// Set new status message
			setStatus(response);
		},
		error: function (response) {
			console.log("ERROR");
			console.log(response);
		},
	});
}

// Exit intent action
jQuery(document).ready(function () {
	window.canLeave = true;

	window.addEventListener("beforeunload", (e) => {
		if (canLeave == false) {
			e.preventDefault();
			let confirmationMessage = "Changes that you made may not be saved.";
			(e || window.event).returnValue = confirmationMessage; //Gecko + IE
			return confirmationMessage; //Webkit, Safari, Chrome
		}
	});
});

// like php
function htmlEntities(str) {
	return String(str).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'|/g, "&rsquo;").replace(/\[/g, "&lbrack;").replace(/\]/g, "&rbrack;");
}

// Best quality snapshoot
function bestSnapshot(snapshots, image) {
	if (snapshots == null || image == "") {
		return "";
	}

	var path = image.split("snapshot")[0] + "snapshot/";
	var renditions = ["uhd", "qhd", "fhd", "hd", "mhd", "hsd", "sd", "ld", "th"];

	for (var i in renditions) {
		if (typeof snapshots !== "undefined" && snapshots !== null) {
			if (typeof snapshots[renditions[i]] !== "undefined") {
				return path + snapshots[renditions[i]];
			}
		}
	}

	return image;
}
